{"file_contents":{"attached_assets/content-1763824378740.md":{"content":"# Your Campus Marketplace\n\nBuy, sell, and connect with students on your campus.\n\n5k+Active Users\n\n12k+Transactions\n\n98%Happy Customers\n\n[Start Exploring](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/products.html)\n\n## TOP SELLING\n\n[![Calculus Textbook](https://images.unsplash.com/photo-1544947950-fa07a98d237f?q=80&w=800&auto=format&fit=crop)\\\\\n\\\\\n**Calculus: Early Transcendentals** ₦45.00\\\\\n\\\\\n5](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/product-detail.html) [![Wireless Headphones](https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=800&auto=format&fit=crop)\\\\\n\\\\\n**Sony WH-1000XM4** ₦180.00\\\\\n\\\\\n8](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/product-detail.html) [![Graphing Calculator](https://images.unsplash.com/photo-1585336261022-680e295ce3fe?q=80&w=800&auto=format&fit=crop)\\\\\n\\\\\n**TI-84 Plus CE** ₦85.00\\\\\n\\\\\n3](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/product-detail.html) [![Dorm Lamp](https://images.unsplash.com/photo-1555685812-4b943f3e99a6?q=80&w=800&auto=format&fit=crop)\\\\\n\\\\\n**LED Desk Lamp** ₦20.00\\\\\n\\\\\n2](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/product-detail.html)\n\n[View All Products](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/products.html)\n\n## BROWSE BY CATEGORY\n\n[![Textbooks](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/img/textbooks.jpg)\\\\\n\\\\\nTextbooks](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/products.html?category=Textbooks) [![Electronics](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/img/elect.jpg)\\\\\n\\\\\nElectronics](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/products.html?category=Electronics) [![Clothing](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/img/cloths.jpg)\\\\\n\\\\\nClothing](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/products.html?category=Clothing) [![Others](https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&w=1000&auto=format&fit=crop)\\\\\n\\\\\nFurniture](https://53449586-a759-43ce-8870-258071ba3913-00-k46ev7s3169x.riker.replit.dev/products.html?category=Others)\n\n## STAY UP TO DATE ABOUT OUR LATEST OFFERS\n\nSubscribe to Newsletter","size_bytes":2442},"js/products.js":{"content":"/**\n * PRODUCTS PAGE SCRIPT\n * ====================\n * This script handles product listing, filtering, sorting, and pagination.\n * \n * WHAT IT DOES:\n * - Load products from API\n * - Filter by category, price, condition\n * - Sort by newest, price (asc/desc)\n * - Display products in grid\n * - Handle pagination (page numbers)\n * - Save/bookmark products\n * \n * HOW IT WORKS:\n * 1. Page loads → fetchProducts() to get initial products\n * 2. User changes filter → fetchProducts() called again\n * 3. Backend returns filtered products\n * 4. displayProducts() renders them to page\n */\n\n// =============================================================================\n// API CONFIGURATION\n// =============================================================================\n/**\n * API_URL determines where to send requests\n * \n * Works in both development (localhost) and production (Replit/custom domain):\n * - Uses the same hostname as the current page\n * - Always connects to port 8000\n * - Works with: localhost, Replit domains, custom domains\n * \n * WHY THIS APPROACH:\n * - No hardcoded hostnames\n * - Works everywhere without configuration\n * - Frontend and backend use same domain, different ports\n */\nconst API_URL = `${window.location.protocol}//${window.location.hostname}:8000/api`;\n\n// =============================================================================\n// CURRENT FILTER STATE\n// =============================================================================\n/**\n * Stores the current filter and sort values\n * Updated when user changes filters\n * Sent to API to fetch matching products\n */\nlet currentFilters = {\n    search: '',           // Search query (empty = no search)\n    category: '',          // Selected category name (empty = all)\n    minPrice: 0,          // Minimum price filter\n    maxPrice: 10000,      // Maximum price filter (₦10,000 Naira)\n    condition: '',        // Selected condition (empty = all)\n    sortBy: 'newest',     // Sort: newest, price-asc, price-desc\n    page: 1,              // Current page number\n    limit: 20,            // Results per page\n    // Clothing-specific filters (for category = \"Clothing\")\n    sizes: [],            // Array of selected sizes (XS, S, M, L, XL)\n    colors: [],           // Array of selected colors (Red, Blue, Black, White)\n    subCategories: []     // Array of selected clothing types (Shirts, Trousers, Dresses, Skirts)\n};\n\n// =============================================================================\n// FETCH PRODUCTS FROM API\n// =============================================================================\n/**\n * Fetch products from backend API with current filters\n * \n * FLOW:\n * 1. Build query string from currentFilters\n * 2. Skip filters that are \"default\" (empty, 0, etc.)\n * 3. Send GET request to API\n * 4. Get response with products and total count\n * 5. Call displayProducts() to render them\n * 6. Call updateResultsCount() to show \"X of Y results\"\n */\nasync function fetchProducts() {\n    try {\n        // Build query parameters\n        const params = new URLSearchParams();\n        \n        // Add search query if present\n        // Backend uses 'q' parameter for search\n        if (currentFilters.search && currentFilters.search.trim()) {\n            params.append('q', currentFilters.search);\n        }\n        \n        // Add category filter if selected\n        // Skip if 'all' or empty (no filter)\n        if (currentFilters.category && currentFilters.category !== 'all') {\n            params.append('category', currentFilters.category);\n        }\n        \n        // Add minimum price filter if greater than 0\n        if (currentFilters.minPrice > 0) {\n            params.append('minPrice', currentFilters.minPrice);\n        }\n        \n        // Add maximum price filter if less than max (₦10,000)\n        if (currentFilters.maxPrice < 10000) {\n            params.append('maxPrice', currentFilters.maxPrice);\n        }\n        \n        // Add condition filter if selected\n        // Skip if 'all' or empty (no filter)\n        if (currentFilters.condition && currentFilters.condition !== 'all') {\n            params.append('condition', currentFilters.condition);\n        }\n        \n        // Add clothing-specific filters if Clothing is selected\n        if (currentFilters.category === 'Clothing') {\n            // Add sizes if any selected (comma-separated)\n            if (currentFilters.sizes.length > 0) {\n                params.append('sizes', currentFilters.sizes.join(','));\n            }\n            \n            // Add colors if any selected (comma-separated)\n            if (currentFilters.colors.length > 0) {\n                params.append('colors', currentFilters.colors.join(','));\n            }\n            \n            // Add sub-categories if any selected (comma-separated)\n            if (currentFilters.subCategories.length > 0) {\n                params.append('subCategories', currentFilters.subCategories.join(','));\n            }\n        }\n        \n        // Add sorting method\n        params.append('sortBy', currentFilters.sortBy);\n        \n        // Add pagination\n        params.append('page', currentFilters.page);\n        params.append('limit', currentFilters.limit);\n        \n        // Make API request with all filters\n        const response = await fetch(`${API_URL}/products?${params.toString()}`);\n        const data = await response.json();\n        \n        // Display the products on the page\n        displayProducts(data.products);\n        \n        // Update the \"Showing X-Y of Z results\" text\n        updateResultsCount(data.totalResults, data.page, data.limit);\n        \n    } catch (error) {\n        console.error('Error fetching products:', error);\n        displayError();\n    }\n}\n\n// =============================================================================\n// DISPLAY PRODUCTS\n// =============================================================================\n/**\n * Render products to the page\n * \n * WHAT IT DOES:\n * 1. Get the product grid container\n * 2. For each product: Create HTML card\n * 3. Include image, name, price, category, location, condition\n * 4. Add save button to each product\n * 5. Insert all HTML into the page\n * 6. Re-initialize Lucide icons (they need to be created after HTML changes)\n */\nfunction displayProducts(products) {\n    const productGrid = document.querySelector('.product-grid');\n    \n    // Handle empty results\n    if (products.length === 0) {\n        productGrid.innerHTML = `\n            <div style=\"grid-column: 1 / -1; text-align: center; padding: 3rem;\">\n                <i data-lucide=\"package\" style=\"width: 4rem; height: 4rem; margin: 0 auto 1rem; opacity: 0.5;\"></i>\n                <h3 style=\"font-size: 1.5rem; margin-bottom: 0.5rem;\">No products found</h3>\n                <p style=\"color: var(--muted); margin-bottom: 1.5rem;\">Try adjusting your filters</p>\n                <a href=\"products.html\" class=\"btn btn-primary\">View All Products</a>\n            </div>\n        `;\n        lucide.createIcons();\n        return;\n    }\n    \n    // Create HTML for each product\n    productGrid.innerHTML = products.map(product => `\n        <a href=\"product-detail.html?id=${product.id}\" class=\"product-card\">\n            <!-- Product Image -->\n            <div class=\"product-image-container\">\n                <img src=\"${getImageUrl(product.images[0]?.imageUrl || 'https://images.unsplash.com/photo-1544947950-fa07a98d237f?q=80&w=800')}\" \n                     alt=\"${product.name}\" \n                     class=\"product-image\">\n                \n                <!-- Save Button -->\n                <!-- onclick=\"event.preventDefault()\" prevents following the link when clicking button -->\n                <button class=\"product-save-btn\" onclick=\"event.preventDefault(); toggleSave(${product.id})\">\n                    <i data-lucide=\"bookmark\" style=\"width: 1.25rem;\"></i>\n                </button>\n            </div>\n            \n            <!-- Product Info -->\n            <div class=\"product-info\">\n                <h3 class=\"product-name\">${product.name}</h3>\n                <span class=\"product-price\">₦${product.price.toFixed(2)}</span>\n                \n                <!-- Category & Location -->\n                <div class=\"product-meta\">\n                    <span class=\"meta-item\">\n                        <i data-lucide=\"tag\" style=\"width: 1rem;\"></i> \n                        ${product.category.name}\n                    </span>\n                    ${product.location ? `\n                        <span class=\"meta-item\">\n                            <i data-lucide=\"map-pin\" style=\"width: 1rem;\"></i> \n                            ${product.location}\n                        </span>\n                    ` : ''}\n                </div>\n                \n                <!-- Condition Badge -->\n                ${product.condition ? `\n                    <div style=\"margin-top: 0.5rem;\">\n                        <span style=\"font-size: 0.75rem; padding: 0.25rem 0.5rem; background: var(--secondary); border-radius: 0.25rem;\">\n                            ${product.condition}\n                        </span>\n                    </div>\n                ` : ''}\n            </div>\n        </a>\n    `).join('');\n    \n    // Re-initialize Lucide icons\n    // They need to be created after we insert new HTML\n    lucide.createIcons();\n}\n\n// =============================================================================\n// ERROR DISPLAY\n// =============================================================================\n/**\n * Display error message when products fail to load\n */\nfunction displayError() {\n    const productGrid = document.querySelector('.product-grid');\n    productGrid.innerHTML = `\n        <div style=\"grid-column: 1 / -1; text-align: center; padding: 3rem;\">\n            <i data-lucide=\"alert-circle\" style=\"width: 4rem; height: 4rem; margin: 0 auto 1rem; color: red; opacity: 0.5;\"></i>\n            <h3 style=\"font-size: 1.5rem; margin-bottom: 0.5rem;\">Error loading products</h3>\n            <p style=\"color: var(--muted);\">Please try again later</p>\n        </div>\n    `;\n    lucide.createIcons();\n}\n\n// =============================================================================\n// UPDATE RESULTS COUNT\n// =============================================================================\n/**\n * Update the \"Showing X-Y of Z results\" text\n * Helps user understand pagination\n * \n * CALCULATION:\n * - start = (page - 1) * limit + 1\n *   (Page 1, limit 20: start = 1)\n *   (Page 2, limit 20: start = 21)\n *   (Page 3, limit 20: start = 41)\n * \n * - end = min(page * limit, total)\n *   (Page 1, limit 20, total 100: end = 20)\n *   (Page 2, limit 20, total 100: end = 40)\n *   (Page 3, limit 20, total 50: end = 50) // Last page might have fewer\n */\nfunction updateResultsCount(total, page, limit) {\n    const start = (page - 1) * limit + 1;\n    const end = Math.min(page * limit, total);\n    const countElement = document.getElementById('results-count');\n    \n    if (countElement) {\n        countElement.textContent = `Showing ${start}-${end} of ${total} results`;\n    }\n    \n    // Update filter status\n    updateFilterStatus();\n}\n\n// =============================================================================\n// UPDATE FILTER STATUS\n// =============================================================================\n/**\n * Show/hide the \"View All Products\" button based on active filters\n * Updates the title to reflect current filter state\n */\nfunction updateFilterStatus() {\n    const hasFilters = currentFilters.category || \n                      currentFilters.minPrice > 0 || \n                      currentFilters.maxPrice < 10000 || \n                      currentFilters.condition;\n    \n    const viewAllBtn = document.getElementById('view-all-btn');\n    const titleElement = document.getElementById('products-title');\n    \n    if (hasFilters) {\n        // Show the \"View All Products\" button\n        if (viewAllBtn) viewAllBtn.style.display = 'inline-flex';\n        \n        // Update title to show filtered view\n        if (titleElement) {\n            const filterText = [];\n            if (currentFilters.category) filterText.push(`${currentFilters.category}`);\n            if (currentFilters.minPrice > 0 || currentFilters.maxPrice < 10000) {\n                filterText.push(`₦${currentFilters.minPrice}-₦${currentFilters.maxPrice}`);\n            }\n            if (currentFilters.condition) filterText.push(currentFilters.condition);\n            \n            titleElement.textContent = `Filtered Results: ${filterText.join(' • ')}`;\n        }\n    } else {\n        // Hide the \"View All Products\" button\n        if (viewAllBtn) viewAllBtn.style.display = 'none';\n        \n        // Reset title\n        if (titleElement) titleElement.textContent = 'All Products';\n    }\n}\n\n// =============================================================================\n// TOGGLE SAVE/BOOKMARK\n// =============================================================================\n/**\n * Save or unsave a product (bookmark/wishlist)\n * \n * REQUIRES: User must be logged in (has JWT token)\n * \n * FLOW:\n * 1. Check if user is logged in\n * 2. Send POST to /api/saved-items with productId\n * 3. Backend toggles: if saved → unsave, if not saved → save\n * 4. Update button visual state\n */\nasync function toggleSave(productId) {\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    if (!token) {\n        // Not logged in, redirect to login\n        alert('Please log in to save products');\n        window.location.href = '/login.html';\n        return;\n    }\n    \n    try {\n        // Find the save button for this product\n        const saveBtn = event.target.closest('.product-save-btn');\n        if (saveBtn) {\n            saveBtn.disabled = true;\n        }\n        \n        // Send request to toggle save\n        const response = await fetch(`${API_URL}/saved-items`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`  // Include JWT token\n            },\n            body: JSON.stringify({ productId })\n        });\n        \n        if (!response.ok) {\n            throw new Error('Failed to save item');\n        }\n        \n        const data = await response.json();\n        \n        // Update button visual state\n        if (saveBtn) {\n            if (data.isSaved) {\n                saveBtn.style.color = '#ef4444';\n                saveBtn.style.borderColor = '#ef4444';\n                showNotification('✓ Item saved!', 'success');\n            } else {\n                saveBtn.style.color = '';\n                saveBtn.style.borderColor = '';\n                showNotification('✗ Item removed from saved', 'info');\n            }\n            saveBtn.disabled = false;\n        }\n        \n        console.log(data.isSaved ? 'Product saved' : 'Product unsaved');\n        \n    } catch (error) {\n        console.error('Error toggling save:', error);\n        showNotification('Failed to save item', 'error');\n        if (event.target.closest('.product-save-btn')) {\n            event.target.closest('.product-save-btn').disabled = false;\n        }\n    }\n}\n\n/**\n * Show notification popup\n */\nfunction showNotification(message, type = 'info') {\n    const notification = document.createElement('div');\n    notification.style.cssText = `\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${type === 'success' ? '#10b981' : type === 'error' ? '#ef4444' : '#3b82f6'};\n        color: white;\n        padding: 12px 24px;\n        border-radius: 8px;\n        z-index: 9999;\n        font-weight: 500;\n        animation: slideIn 0.3s ease-in-out;\n    `;\n    notification.textContent = message;\n    document.body.appendChild(notification);\n    \n    setTimeout(() => {\n        notification.style.animation = 'slideOut 0.3s ease-in-out';\n        setTimeout(() => notification.remove(), 300);\n    }, 3000);\n}\n\n// =============================================================================\n// FILTER EVENT HANDLERS\n// =============================================================================\n/**\n * These functions are called when user changes filters\n * They update currentFilters and call fetchProducts()\n */\n\nfunction updateCategory(category) {\n    currentFilters.category = category;\n    currentFilters.page = 1;  // Reset to page 1\n    fetchProducts();\n}\n\nfunction updateCondition(condition) {\n    currentFilters.condition = condition;\n    currentFilters.page = 1;  // Reset to page 1\n    fetchProducts();\n}\n\nfunction updateSort(sortBy) {\n    currentFilters.sortBy = sortBy;\n    currentFilters.page = 1;  // Reset to page 1\n    fetchProducts();\n}\n\nfunction updatePriceRange(min, max) {\n    currentFilters.minPrice = min;\n    currentFilters.maxPrice = max;\n    currentFilters.page = 1;  // Reset to page 1\n    fetchProducts();\n}\n\nfunction updateClothingFilters() {\n    // Get all selected sizes\n    const sizeCheckboxes = document.querySelectorAll('input[name=\"size\"]:checked');\n    currentFilters.sizes = Array.from(sizeCheckboxes).map(cb => cb.value);\n    \n    // Get all selected colors\n    const colorCheckboxes = document.querySelectorAll('input[name=\"color\"]:checked');\n    currentFilters.colors = Array.from(colorCheckboxes).map(cb => cb.value);\n    \n    // Get all selected sub-categories\n    const subCategoryCheckboxes = document.querySelectorAll('input[name=\"sub-category\"]:checked');\n    currentFilters.subCategories = Array.from(subCategoryCheckboxes).map(cb => cb.value);\n    \n    currentFilters.page = 1;  // Reset to page 1\n    fetchProducts();\n}\n\nfunction clearAllFilters() {\n    currentFilters = {\n        category: '',\n        minPrice: 0,\n        maxPrice: 10000,\n        condition: '',\n        sortBy: 'newest',\n        page: 1,\n        limit: 20,\n        sizes: [],\n        colors: [],\n        subCategories: []\n    };\n    \n    // Reset all filters\n    currentFilters.search = '';\n    currentFilters.category = '';\n    currentFilters.condition = '';\n    currentFilters.minPrice = 0;\n    currentFilters.maxPrice = 10000;\n    currentFilters.sizes = [];\n    currentFilters.colors = [];\n    currentFilters.subCategories = [];\n    \n    // Reset UI elements\n    const categorySelect = document.querySelector('#category-select');\n    const conditionRadios = document.querySelectorAll('input[name=\"condition\"]');\n    const priceRange = document.querySelector('#price-range');\n    const priceValue = document.querySelector('#price-value');\n    const searchInput = document.querySelector('.search-bar input');\n    \n    if (categorySelect) categorySelect.value = 'all';\n    if (conditionRadios) conditionRadios[0].checked = true;  // Check \"Any\"\n    if (priceRange) priceRange.value = 5000;\n    if (priceValue) priceValue.textContent = '₦5000';\n    if (searchInput) searchInput.value = '';\n    \n    // Clear all clothing-specific checkboxes\n    document.querySelectorAll('input[name=\"size\"]').forEach(cb => cb.checked = false);\n    document.querySelectorAll('input[name=\"color\"]').forEach(cb => cb.checked = false);\n    document.querySelectorAll('input[name=\"sub-category\"]').forEach(cb => cb.checked = false);\n    \n    // Hide the \"View All Products\" button\n    const viewAllBtn = document.getElementById('view-all-btn');\n    if (viewAllBtn) viewAllBtn.style.display = 'none';\n    \n    // Reset title\n    const titleElement = document.getElementById('products-title');\n    if (titleElement) titleElement.textContent = 'All Products';\n    \n    // Clear URL parameters by navigating to products.html without query string\n    window.history.pushState({}, '', 'products.html');\n    \n    fetchProducts();\n}\n\n// =============================================================================\n// UPDATE SEARCH FILTER (Global search from any page)\n// =============================================================================\n/**\n * Update search filter and fetch products\n * Called from global search in app.js\n * @param {string} searchQuery - Search term from user\n */\nfunction updateSearch(searchQuery) {\n    currentFilters.search = searchQuery;\n    currentFilters.page = 1;  // Reset to page 1 when searching\n    \n    // Update search input field if it exists\n    const searchInput = document.querySelector('.search-bar input');\n    if (searchInput) {\n        searchInput.value = searchQuery;\n    }\n    \n    // Update title\n    const titleElement = document.getElementById('products-title');\n    if (titleElement) {\n        titleElement.textContent = `Search results for \"${searchQuery}\"`;\n    }\n    \n    // Show \"View All Products\" button to clear search\n    const viewAllBtn = document.getElementById('view-all-btn');\n    if (viewAllBtn) {\n        viewAllBtn.style.display = 'inline-block';\n    }\n    \n    // Fetch products with new search\n    fetchProducts();\n}\n\n// Make updateSearch available globally\nwindow.products = window.products || {};\nwindow.products.updateSearch = updateSearch;\n\n// =============================================================================\n// INITIALIZE ON PAGE LOAD\n// =============================================================================\n/**\n * When products.html loads, fetch and display initial products\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n    // Hide loader when products page loads\n    window.addEventListener('load', () => {\n        const loader = document.getElementById('loader');\n        if (loader) {\n            loader.classList.add('hidden');\n        }\n    });\n    \n    // Read URL parameters\n    const urlParams = new URLSearchParams(window.location.search);\n    const urlSearch = urlParams.get('search');\n    const urlCategory = urlParams.get('category');\n    \n    // Handle search parameter\n    if (urlSearch) {\n        currentFilters.search = urlSearch;\n        \n        // Update search input field\n        const searchInput = document.querySelector('.search-bar input');\n        if (searchInput) {\n            searchInput.value = urlSearch;\n        }\n        \n        // Update title\n        const titleElement = document.getElementById('products-title');\n        if (titleElement) {\n            titleElement.textContent = `Search results for \"${urlSearch}\"`;\n        }\n        \n        // Show \"View All Products\" button to clear search\n        const viewAllBtn = document.getElementById('view-all-btn');\n        if (viewAllBtn) {\n            viewAllBtn.style.display = 'inline-block';\n        }\n    }\n    \n    // Handle category parameter\n    if (urlCategory) {\n        currentFilters.category = urlCategory;\n        \n        // Update the category dropdown to show selected category\n        const categorySelect = document.querySelector('#category-select');\n        const mobileCategorySelect = document.querySelector('#mobile-category-select');\n        \n        if (categorySelect) {\n            categorySelect.value = urlCategory;\n        }\n        if (mobileCategorySelect) {\n            mobileCategorySelect.value = urlCategory;\n        }\n    }\n    \n    // Add click handler for \"View All Products\" button\n    const viewAllBtn = document.getElementById('view-all-btn');\n    if (viewAllBtn) {\n        viewAllBtn.addEventListener('click', clearAllFilters);\n    }\n    \n    // Fetch products\n    fetchProducts();\n});\n","size_bytes":23304},"backend/auth.py":{"content":"\"\"\"\nAUTHENTICATION MODULE\n=====================\nThis module handles all security and authentication logic:\n- Password hashing (bcrypt)\n- JWT token generation\n- JWT token verification\n- User authentication checks\n\nWHAT HAPPENS HERE:\n1. Passwords are hashed before saving to database (bcrypt)\n2. Tokens are generated when user logs in (JWT)\n3. Endpoints check tokens to verify user is logged in\n\"\"\"\n\nfrom datetime import datetime, timedelta\nfrom typing import Optional\nfrom jose import JWTError, jwt  # JWT token library\nimport bcrypt  # Password hashing library\nfrom fastapi import Depends, HTTPException, status\nfrom fastapi.security import HTTPBearer, HTTPAuthorizationCredentials\nfrom sqlalchemy.orm import Session\nfrom backend.database import get_db\nfrom backend.models import User\nimport os\n\n# =============================================================================\n# SECURITY CONFIGURATION\n# =============================================================================\n\n# Secret key used to sign JWT tokens\n# In production, this should be a long random string from environment variables\n# Currently defaults to a placeholder (CHANGE THIS IN PRODUCTION!)\n# \n# How to set in production:\n# export JWT_SECRET_KEY=\"your-super-secret-long-random-string-here\"\nSECRET_KEY = os.getenv(\"JWT_SECRET_KEY\", \"your-secret-key-change-this-in-production\")\n\n# Algorithm used to sign JWT tokens\n# HS256 = HMAC with SHA-256 (industry standard)\nALGORITHM = \"HS256\"\n\n# How long tokens last before expiring\n# 60 * 24 * 7 = 60 minutes * 24 hours * 7 days = 1 week\nACCESS_TOKEN_EXPIRE_MINUTES = 60 * 24 * 7\n\n# Security scheme for FastAPI\n# Tells FastAPI to expect \"Bearer <token>\" in Authorization header\nsecurity = HTTPBearer()\n\n# =============================================================================\n# PASSWORD HASHING FUNCTIONS\n# =============================================================================\n\ndef verify_password(plain_password: str, hashed_password: str) -> bool:\n    \"\"\"\n    Verify a plain text password against a bcrypt hash.\n    \n    THIS IS USED FOR: Login (checking if password matches stored hash)\n    \n    PARAMETERS:\n    - plain_password: Password user typed in login form\n    - hashed_password: Password hash stored in database\n    \n    RETURNS: True if password matches, False otherwise\n    \n    HOW IT WORKS:\n    1. Convert plain password to bytes (bcrypt needs bytes, not strings)\n    2. Check if password is longer than 72 chars (bcrypt limit)\n    3. Use bcrypt to verify: Does the hash match this password?\n    4. Return True or False\n    \"\"\"\n    # Convert password string to bytes (UTF-8 encoding)\n    password_bytes = plain_password.encode('utf-8')\n    \n    # Bcrypt limitation: Can only hash passwords up to 72 bytes\n    # Truncate if longer to prevent errors\n    if len(password_bytes) > 72:\n        password_bytes = password_bytes[:72]\n    \n    # bcrypt.checkpw returns True if password matches hash, False otherwise\n    # Convert hashed_password to bytes too (it's stored as string in DB)\n    return bcrypt.checkpw(password_bytes, hashed_password.encode('utf-8'))\n\ndef get_password_hash(password: str) -> str:\n    \"\"\"\n    Hash a plain text password using bcrypt.\n    \n    THIS IS USED FOR: Registration (storing password securely)\n    \n    PARAMETERS:\n    - password: Plain text password from registration form\n    \n    RETURNS: Hashed password string (safe to store in database)\n    \n    HOW IT WORKS:\n    1. Convert password to bytes\n    2. Generate a salt (random string added to password before hashing)\n    3. Hash password + salt using bcrypt\n    4. Return the hash as a string\n    \n    WHY BCRYPT?\n    - Bcrypt is SLOW on purpose (prevents brute force attacks)\n    - If attacker steals hashes, it takes forever to crack them\n    - Even with a supercomputer, each guess takes real time\n    \"\"\"\n    # Convert password string to bytes\n    password_bytes = password.encode('utf-8')\n    \n    # Truncate if longer than 72 bytes (bcrypt limit)\n    if len(password_bytes) > 72:\n        password_bytes = password_bytes[:72]\n    \n    # bcrypt.hashpw does the actual hashing\n    # bcrypt.gensalt() generates a random salt (default 12 rounds of hashing)\n    # Returns bytes, so .decode('utf-8') converts back to string for storage\n    return bcrypt.hashpw(password_bytes, bcrypt.gensalt()).decode('utf-8')\n\n# =============================================================================\n# JWT TOKEN FUNCTIONS\n# =============================================================================\n\ndef create_access_token(data: dict, expires_delta: Optional[timedelta] = None):\n    \"\"\"\n    Create a JWT token for a user.\n    \n    THIS IS USED FOR: Login (giving user a token to stay logged in)\n    \n    PARAMETERS:\n    - data: Dictionary with info to encode in token (usually {\"userId\": 123})\n    - expires_delta: How long until token expires (optional, uses default if None)\n    \n    RETURNS: JWT token string (send this to frontend)\n    \n    HOW IT WORKS:\n    1. Copy the data dict (don't modify original)\n    2. Calculate expiration time\n    3. Add expiration time to the token data\n    4. Sign the token using SECRET_KEY\n    5. Return the signed token\n    \"\"\"\n    # Make a copy of data so we don't modify the original dict\n    to_encode = data.copy()\n    \n    # Calculate expiration time\n    if expires_delta:\n        # If custom expiration provided, use it\n        expire = datetime.utcnow() + expires_delta\n    else:\n        # Otherwise use default (1 week)\n        expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    \n    # Add expiration time to token data\n    # \"exp\" is the JWT standard field for expiration\n    to_encode.update({\"exp\": expire})\n    \n    # Encode the data into a JWT token\n    # jwt.encode(data, secret_key, algorithm)\n    # Returns a token string that can be verified using SECRET_KEY\n    encoded_jwt = jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n    \n    return encoded_jwt\n\n# =============================================================================\n# JWT VERIFICATION FUNCTION\n# =============================================================================\n\ndef get_current_user(\n    credentials: HTTPAuthorizationCredentials = Depends(security),\n    db: Session = Depends(get_db)\n) -> User:\n    \"\"\"\n    Verify JWT token and get the current logged-in user.\n    \n    THIS IS USED FOR: Protected endpoints (to check if user is logged in)\n    \n    PARAMETERS:\n    - credentials: Authorization header info (provided by FastAPI's HTTPBearer)\n    - db: Database session (provided by FastAPI Depends)\n    \n    RETURNS: User object if token is valid, raises exception otherwise\n    \n    HOW IT WORKS:\n    1. Extract token from \"Authorization: Bearer <token>\" header\n    2. Decode and verify the JWT token using SECRET_KEY\n    3. Extract userId from token\n    4. Look up that user in database\n    5. Return user object if found\n    6. Raise 401 error if token invalid or user not found\n    \n    EXAMPLE USAGE:\n    @app.get(\"/api/auth/me\")\n    def get_profile(current_user: User = Depends(get_current_user)):\n        return current_user  # current_user is automatically verified!\n    \"\"\"\n    \n    # Error to raise if credentials are invalid\n    credentials_exception = HTTPException(\n        status_code=status.HTTP_401_UNAUTHORIZED,  # 401 = Not Authorized\n        detail=\"Could not validate credentials\",\n        headers={\"WWW-Authenticate\": \"Bearer\"},  # Tell client to try Bearer token\n    )\n    \n    try:\n        # Extract the token from the credentials\n        # credentials.credentials contains the token part of \"Bearer <token>\"\n        token = credentials.credentials\n        \n        # Decode the JWT token using SECRET_KEY\n        # jwt.decode verifies the signature and checks expiration\n        # If token is invalid or expired, raises JWTError\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        \n        # Extract userId from token payload\n        # We stored userId in create_access_token\n        user_id = payload.get(\"userId\")\n        \n        # Check if userId was found in token\n        if user_id is None:\n            raise credentials_exception\n            \n    except JWTError:\n        # If any JWT error occurs (invalid, expired, etc.)\n        raise credentials_exception\n    \n    # Query database for the user with this ID\n    user = db.query(User).filter(User.id == user_id).first()\n    \n    # Check if user exists\n    if user is None:\n        raise credentials_exception\n    \n    # Return the user object\n    # If we got here, token is valid and user exists\n    return user\n","size_bytes":8615},"css/loader.css":{"content":"/**\n * LOADER STYLES\n * Displays a centered spinner while page is loading\n */\n\n/* Loader Container - Full screen overlay */\n.loader-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100vh;\n    background: white;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 9999;\n    opacity: 1;\n    transition: opacity 0.3s ease-out;\n    overflow: hidden;\n}\n\n/* Hide loader */\n.loader-container.hidden {\n    opacity: 0;\n    pointer-events: none;\n}\n\n/* Spinner Circle */\n.spinner {\n    width: 50px;\n    height: 50px;\n    border: 4px solid #f0f0f0;\n    border-top: 4px solid #3b82f6;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n/* Spinner Animation */\n@keyframes spin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n}\n\n/* Loader Text */\n.loader-text {\n    margin-top: 1rem;\n    font-size: 0.9rem;\n    color: #666;\n    text-align: center;\n}\n\n/* Loading Message */\n.loader-message {\n    animation: pulse 1.5s ease-in-out infinite;\n}\n\n@keyframes pulse {\n    0%, 100% {\n        opacity: 0.6;\n    }\n    50% {\n        opacity: 1;\n    }\n}\n","size_bytes":1169},"server.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nFRONTEND HTTP SERVER\n====================\nThis is a simple HTTP server that serves the static frontend files.\n\nWHAT IT DOES:\n- Listens on port 5000 (0.0.0.0 means all network interfaces)\n- Serves HTML, CSS, JavaScript, and image files\n- Adds cache-control headers to prevent caching issues\n\nWHY NOT JUST USE A BROWSER?\n- We need a web server so the frontend can:\n  1. Load HTML files correctly\n  2. Serve files with proper MIME types\n  3. Make relative path requests work\n  4. Be accessible from the network (0.0.0.0:5000)\n\nHOW IT WORKS:\n1. Start listening on 0.0.0.0:5000\n2. When browser requests index.html → serve it\n3. When browser requests style.css → serve it with CSS headers\n4. When browser requests image.jpg → serve it with image headers\n5. For development, disable caching to see changes immediately\n\"\"\"\n\nimport http.server\nimport socketserver\nimport os\nimport urllib.request\nimport urllib.error\nimport json\n\n# Port to listen on\n# Frontend must be accessible at http://0.0.0.0:5000/\nPORT = 5000\nBACKEND_URL = \"http://localhost:8000\"\n\n# =============================================================================\n# CUSTOM REQUEST HANDLER\n# =============================================================================\n# Extend SimpleHTTPRequestHandler to add cache control headers\nclass NoCacheHTTPRequestHandler(http.server.SimpleHTTPRequestHandler):\n    \"\"\"\n    Custom HTTP request handler that disables caching.\n    \n    WHY DISABLE CACHING?\n    - During development, changes aren't visible if browser caches files\n    - Cache-Control headers tell browser not to cache\n    - Ensures users always get latest version\n    - Safe to disable during development, should be enabled in production\n    \n    HEADERS SENT:\n    - Cache-Control: no-cache, no-store, must-revalidate\n      → Don't cache, don't store, revalidate with server every time\n    - Pragma: no-cache (for HTTP/1.0 compatibility)\n    - Expires: 0 (already expired)\n    \"\"\"\n    \n    def do_GET(self):\n        \"\"\"\n        Handle GET requests.\n        Proxy /api/* requests to backend, serve static files normally.\n        \"\"\"\n        if self.path.startswith('/api/'):\n            self._proxy_api_request('GET')\n        else:\n            super().do_GET()\n    \n    def do_POST(self):\n        \"\"\"\n        Handle POST requests.\n        Proxy /api/* requests to backend.\n        \"\"\"\n        if self.path.startswith('/api/'):\n            self._proxy_api_request('POST')\n        else:\n            super().do_POST()\n    \n    def do_PUT(self):\n        \"\"\"Handle PUT requests (proxy to backend).\"\"\"\n        if self.path.startswith('/api/'):\n            self._proxy_api_request('PUT')\n        else:\n            super().do_PUT()\n    \n    def do_DELETE(self):\n        \"\"\"Handle DELETE requests (proxy to backend).\"\"\"\n        if self.path.startswith('/api/'):\n            self._proxy_api_request('DELETE')\n        else:\n            super().do_DELETE()\n    \n    def _proxy_api_request(self, method):\n        \"\"\"\n        Proxy API requests to backend server on port 8000.\n        This allows /api/* requests to work from the frontend server on port 5000.\n        \"\"\"\n        try:\n            # Build full URL for backend (self.path already includes query string)\n            full_url = BACKEND_URL + self.path\n            \n            # Read request body if present\n            content_length = int(self.headers.get('Content-Length', 0))\n            body = self.rfile.read(content_length) if content_length > 0 else None\n            \n            # Create request with proper headers\n            req = urllib.request.Request(\n                full_url,\n                data=body,\n                method=method,\n                headers={k: v for k, v in self.headers.items() if k.lower() != 'host'}\n            )\n            req.add_header('Host', 'localhost:8000')\n            \n            # Send request to backend\n            with urllib.request.urlopen(req) as response:\n                status = response.status\n                headers = dict(response.headers)\n                content = response.read()\n        except urllib.error.HTTPError as e:\n            status = e.code\n            headers = dict(e.headers)\n            content = e.read()\n        except Exception as e:\n            # Return 502 Bad Gateway if connection fails\n            self.send_response(502)\n            self.send_header('Content-Type', 'application/json')\n            self.end_headers()\n            self.wfile.write(json.dumps({'detail': str(e)}).encode())\n            return\n        \n        # Send response\n        self.send_response(status)\n        for header, value in headers.items():\n            if header.lower() not in ['connection', 'transfer-encoding']:\n                self.send_header(header, value)\n        self.end_headers()\n        self.wfile.write(content)\n    \n    def end_headers(self):\n        \"\"\"\n        Override end_headers to add cache control headers.\n        \n        This is called right before the response body is sent.\n        We add headers here so they apply to all responses.\n        \"\"\"\n        # Tell browser not to cache\n        self.send_header('Cache-Control', 'no-cache, no-store, must-revalidate')\n        self.send_header('Pragma', 'no-cache')\n        self.send_header('Expires', '0')\n        \n        # Call parent class to send remaining headers\n        super().end_headers()\n\n# =============================================================================\n# SERVER STARTUP\n# =============================================================================\n\n# Change to the directory where this script is located\n# This ensures we serve files from the project root\nos.chdir(os.path.dirname(os.path.abspath(__file__)))\n\n# Allow port reuse (helpful during development when restarting server)\n# Without this, might get \"Address already in use\" error\nsocketserver.TCPServer.allow_reuse_address = True\n\n# Create and start the server\n# TCPServer(address, request_handler)\n# - (0.0.0.0, 5000): Listen on all interfaces, port 5000\n# - NoCacheHTTPRequestHandler: Use our custom handler\nwith socketserver.TCPServer((\"0.0.0.0\", PORT), NoCacheHTTPRequestHandler) as httpd:\n    print(f\"Frontend Server running at http://0.0.0.0:{PORT}/\")\n    print(f\"Serving files from: {os.getcwd()}\")\n    print(\"Press Ctrl+C to stop the server\")\n    \n    # Keep server running indefinitely\n    # serve_forever() blocks until server is stopped\n    httpd.serve_forever()\n","size_bytes":6449},"backend/models.py":{"content":"\"\"\"\nDATABASE MODELS MODULE\n======================\nThis file defines all the database tables (represented as Python classes).\nEach class is a table, and each class attribute is a column in that table.\n\nWHAT HAPPENS HERE:\n- Defines the structure of every table in the database\n- Defines relationships between tables (e.g., a User has many Products)\n- Uses SQLAlchemy ORM which converts these classes to SQL tables\n\"\"\"\n\nfrom sqlalchemy import Column, Integer, String, Float, Text, DateTime, ForeignKey, Enum\nfrom sqlalchemy.orm import relationship\nfrom datetime import datetime\nfrom backend.database import Base\nimport enum\n\n# =============================================================================\n# ENUM DEFINITIONS (Fixed value lists)\n# =============================================================================\n# Enums are lists of allowed values. They prevent invalid data in the database.\n\nclass ProductStatus(str, enum.Enum):\n    \"\"\"\n    Possible status values for a product.\n    \n    STATUS MEANINGS:\n    - available: Product is for sale\n    - sold: Product was sold\n    - deleted: Product was deleted (soft delete - not really removed)\n    \"\"\"\n    available = \"available\"\n    sold = \"sold\"\n    deleted = \"deleted\"\n\nclass ProductCondition(str, enum.Enum):\n    \"\"\"\n    Possible condition values for a product (how used it is).\n    \n    CONDITION MEANINGS:\n    - New: Never used, still in packaging\n    - Like New: Used but looks new\n    - Good: Used but in good shape\n    - Fair: Used and shows wear\n    \"\"\"\n    new = \"New\"\n    like_new = \"Like New\"\n    good = \"Good\"\n    fair = \"Fair\"\n\n# =============================================================================\n# UNIVERSITY TABLE\n# =============================================================================\nclass University(Base):\n    \"\"\"\n    Represents a university in the system.\n    Users register with universities to enforce email domain restrictions.\n    \n    COLUMNS:\n    - id: Primary key (unique identifier)\n    - name: University name (e.g., \"Baze University\")\n    - domain: Email domain required to join (e.g., \"@bazeuniversity.edu.ng\")\n    \n    RELATIONSHIPS:\n    - users: One university has many users (users who study there)\n    \"\"\"\n    __tablename__ = \"universities\"\n    \n    # Primary key - unique identifier for each university\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # University name - required, max 255 characters\n    name = Column(String(255), nullable=False)\n    \n    # Email domain - unique (no two universities can have same domain)\n    # Users MUST have an email ending with this domain to join\n    domain = Column(String(255), nullable=False, unique=True)\n    \n    # Relationship: One university has many users\n    # back_populates=\"university\" creates the reverse relationship (User.university)\n    users = relationship(\"User\", back_populates=\"university\")\n\n# =============================================================================\n# USER TABLE (Students/Staff accounts)\n# =============================================================================\nclass User(Base):\n    \"\"\"\n    Represents a user account (student, staff member, etc.).\n    Users can create products, buy products, and save favorites.\n    \n    COLUMNS:\n    - id: Primary key\n    - full_name: User's real name\n    - username: Unique username for login\n    - email: Unique email (must match university domain)\n    - password_hash: Encrypted password (never stored in plain text)\n    - university_id: Foreign key to universities table\n    - bio: Optional user biography\n    - profile_image: URL to profile picture\n    - phone: Optional phone number\n    - created_at: When account was created\n    \n    RELATIONSHIPS:\n    - university: Which university they belong to\n    - products: All products they've created\n    - saved_items: All products they've saved/bookmarked\n    \"\"\"\n    __tablename__ = \"users\"\n    \n    # Unique ID for each user\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # User's full name (required)\n    full_name = Column(String(255), nullable=False)\n    \n    # Username must be unique (can't have two users with same username)\n    # index=True makes it faster to look up users by username\n    username = Column(String(100), unique=True, nullable=False, index=True)\n    \n    # Email must be unique (can't have two accounts with same email)\n    # index=True makes it faster to look up users by email\n    email = Column(String(255), unique=True, nullable=False, index=True)\n    \n    # Password stored as hash (encrypted) - never store plain text!\n    password_hash = Column(String(255), nullable=False)\n    \n    # Foreign key: Points to universities.id\n    # This user must belong to a university\n    university_id = Column(Integer, ForeignKey(\"universities.id\"), nullable=False)\n    \n    # Optional biography text (can be NULL)\n    bio = Column(Text, nullable=True)\n    \n    # Optional profile picture URL (can be NULL)\n    profile_image = Column(String(500), nullable=True)\n    \n    # Optional phone number (can be NULL)\n    phone = Column(String(20), nullable=True)\n    \n    # Automatic timestamp: Set to current time when user is created\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    # Relationship: This user belongs to one university\n    university = relationship(\"University\", back_populates=\"users\")\n    \n    # Relationship: This user has created many products\n    products = relationship(\"Product\", back_populates=\"seller\")\n    \n    # Relationship: This user has saved many products\n    saved_items = relationship(\"SavedItem\", back_populates=\"user\")\n    \n    # Relationship: This user has written many comments\n    comments = relationship(\"Comment\", back_populates=\"author\")\n\n# =============================================================================\n# CATEGORY TABLE (Product categories)\n# =============================================================================\nclass Category(Base):\n    \"\"\"\n    Represents a product category (e.g., \"Electronics\", \"Textbooks\").\n    Products are organized into categories for easier browsing.\n    \n    COLUMNS:\n    - id: Primary key\n    - name: Category name (unique)\n    \n    RELATIONSHIPS:\n    - products: All products in this category\n    \"\"\"\n    __tablename__ = \"categories\"\n    \n    # Unique ID for each category\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # Category name must be unique (no duplicate categories)\n    # Can't have two \"Electronics\" categories\n    name = Column(String(100), nullable=False, unique=True)\n    \n    # Relationship: This category has many products\n    products = relationship(\"Product\", back_populates=\"category\")\n\n# =============================================================================\n# PRODUCT TABLE (Listings for sale)\n# =============================================================================\nclass Product(Base):\n    \"\"\"\n    Represents a product listing (something for sale).\n    Contains all info about the item being sold.\n    \n    COLUMNS:\n    - id: Primary key\n    - name: Product name (searchable)\n    - description: Full product description\n    - price: Selling price\n    - category_id: What category it's in\n    - seller_id: Who's selling it\n    - location: Where it's located\n    - condition: How used/new it is\n    - size: Optional size (for clothing)\n    - color: Optional color\n    - status: available/sold/deleted\n    - created_at: When listed\n    - updated_at: When last modified\n    \n    RELATIONSHIPS:\n    - category: Which category this product is in\n    - seller: Which user is selling it\n    - images: All photos of the product\n    - saved_by: Users who saved/bookmarked it\n    \"\"\"\n    __tablename__ = \"products\"\n    \n    # Unique ID for each product\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # Product name (what you're selling)\n    # index=True makes it faster to search by name\n    name = Column(String(255), nullable=False, index=True)\n    \n    # Full product description (detailed info)\n    description = Column(Text, nullable=False)\n    \n    # Price in dollars\n    price = Column(Float, nullable=False)\n    \n    # Foreign key: Which category is this in?\n    category_id = Column(Integer, ForeignKey(\"categories.id\"), nullable=False)\n    \n    # Foreign key: Who is selling this?\n    seller_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)\n    \n    # Where the product is located (optional)\n    location = Column(String(255), nullable=True)\n    \n    # Condition of the product (New, Like New, Good, Fair)\n    condition = Column(String(50), nullable=True)\n    \n    # Size (for clothing) - optional\n    size = Column(String(50), nullable=True)\n    \n    # Color - optional\n    color = Column(String(50), nullable=True)\n    \n    # Current status of the product\n    # Default is \"available\" (for sale)\n    status = Column(String(50), default=\"available\")\n    \n    # When product was first listed\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    # When product was last updated\n    # Automatically updates to current time when product is modified\n    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    # Relationship: This product belongs to one category\n    category = relationship(\"Category\", back_populates=\"products\")\n    \n    # Relationship: This product has one seller (user)\n    seller = relationship(\"User\", back_populates=\"products\")\n    \n    # Relationship: This product has many images\n    # cascade=\"all, delete-orphan\" means if product is deleted, images are too\n    images = relationship(\"ProductImage\", back_populates=\"product\", cascade=\"all, delete-orphan\")\n    \n    # Relationship: This product is saved by many users\n    saved_by = relationship(\"SavedItem\", back_populates=\"product\")\n    \n    # Relationship: This product has many comments\n    comments = relationship(\"Comment\", back_populates=\"product\", cascade=\"all, delete-orphan\")\n\n# =============================================================================\n# PRODUCT IMAGE TABLE (Photos of products)\n# =============================================================================\nclass ProductImage(Base):\n    \"\"\"\n    Represents a photo of a product.\n    Products can have multiple images (up to 5).\n    \n    COLUMNS:\n    - id: Primary key\n    - product_id: Which product this image belongs to\n    - image_url: URL where the image is stored\n    - is_primary: Whether this is the main/cover image\n    - created_at: When image was uploaded\n    \n    RELATIONSHIPS:\n    - product: Which product owns this image\n    \"\"\"\n    __tablename__ = \"product_images\"\n    \n    # Unique ID for each image\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # Foreign key: Which product does this image belong to?\n    product_id = Column(Integer, ForeignKey(\"products.id\"), nullable=False)\n    \n    # URL where image is stored\n    # Can be a local path like \"/uploads/products/image123.jpg\"\n    # Or external URL like \"https://example.com/image.jpg\"\n    image_url = Column(String(500), nullable=False)\n    \n    # Is this the main/primary image? (0 = no, 1 = yes)\n    # The first image is usually the primary one shown in product list\n    is_primary = Column(Integer, default=0)\n    \n    # When image was uploaded\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    # Relationship: This image belongs to one product\n    product = relationship(\"Product\", back_populates=\"images\")\n\n# =============================================================================\n# SAVED ITEMS TABLE (Bookmarks/Wishlist)\n# =============================================================================\nclass SavedItem(Base):\n    \"\"\"\n    Represents a product that a user has saved/bookmarked.\n    Users can save products they want to remember/buy later.\n    \n    COLUMNS:\n    - id: Primary key\n    - user_id: Which user saved it\n    - product_id: Which product was saved\n    - created_at: When it was saved\n    \n    RELATIONSHIPS:\n    - user: Which user saved it\n    - product: Which product was saved\n    \"\"\"\n    __tablename__ = \"saved_items\"\n    \n    # Unique ID for each saved item\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # Foreign key: Which user saved this product?\n    user_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False)\n    \n    # Foreign key: Which product was saved?\n    product_id = Column(Integer, ForeignKey(\"products.id\"), nullable=False)\n    \n    # When the item was saved\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    # Relationship: This saved item belongs to one user\n    user = relationship(\"User\", back_populates=\"saved_items\")\n    \n    # Relationship: This saved item points to one product\n    product = relationship(\"Product\", back_populates=\"saved_by\")\n\n# =============================================================================\n# MESSAGE TABLE (Real-time Chat)\n# =============================================================================\nclass Message(Base):\n    \"\"\"\n    Represents a message between two users in a chat conversation.\n    Stores message content, sender, receiver, and timestamps.\n    \n    COLUMNS:\n    - id: Primary key\n    - sender_id: User who sent the message\n    - receiver_id: User who received the message\n    - content: Message text\n    - created_at: When the message was sent\n    - is_read: Whether the receiver has read it\n    \n    RELATIONSHIPS:\n    - sender: The user who sent the message\n    - receiver: The user who received the message\n    \"\"\"\n    __tablename__ = \"messages\"\n    \n    # Unique ID for each message\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # Foreign key: Who sent this message?\n    sender_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    \n    # Foreign key: Who received this message?\n    receiver_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    \n    # Message content\n    content = Column(Text, nullable=False)\n    \n    # Whether the receiver has read it\n    is_read = Column(Integer, default=0)  # 0 = unread, 1 = read\n    \n    # Timestamp of when message was created\n    created_at = Column(DateTime, default=datetime.utcnow, index=True)\n    \n    # Relationship: Sender user\n    sender = relationship(\"User\", foreign_keys=[sender_id])\n    \n    # Relationship: Receiver user\n    receiver = relationship(\"User\", foreign_keys=[receiver_id])\n\n# =============================================================================\n# COMMENT TABLE (Product Comments/Questions)\n# =============================================================================\nclass Comment(Base):\n    \"\"\"\n    Represents a comment on a product listing.\n    Users can ask questions or leave comments on product listings.\n    \n    COLUMNS:\n    - id: Primary key\n    - product_id: Which product is being commented on\n    - author_id: Who wrote the comment\n    - content: The comment text\n    - created_at: When the comment was posted\n    \n    RELATIONSHIPS:\n    - product: The product this comment is on\n    - author: The user who wrote the comment\n    \"\"\"\n    __tablename__ = \"comments\"\n    \n    # Unique ID for each comment\n    id = Column(Integer, primary_key=True, index=True)\n    \n    # Foreign key: Which product is this comment on?\n    product_id = Column(Integer, ForeignKey(\"products.id\"), nullable=False, index=True)\n    \n    # Foreign key: Who wrote this comment?\n    author_id = Column(Integer, ForeignKey(\"users.id\"), nullable=False, index=True)\n    \n    # The comment text content\n    content = Column(Text, nullable=False)\n    \n    # When the comment was created\n    created_at = Column(DateTime, default=datetime.utcnow, index=True)\n    \n    # Relationship: This comment belongs to one product\n    product = relationship(\"Product\", back_populates=\"comments\")\n    \n    # Relationship: This comment was written by one user\n    author = relationship(\"User\", back_populates=\"comments\")\n","size_bytes":15927},"backend/main.py":{"content":"\"\"\"\nUNIMARKET API - MAIN ENDPOINTS\n==============================\nThis is the main backend API file that handles all HTTP requests.\nIt contains all the routes (endpoints) that the frontend calls.\n\nSTRUCTURE:\n1. Import statements (required libraries)\n2. FastAPI app initialization\n3. CORS middleware setup (allows frontend to call API)\n4. Startup event (runs when server starts)\n5. API endpoints organized by feature:\n   - Health check\n   - Authentication (register, login, get profile)\n   - Products (list, get, create, update, delete)\n   - Saved items (bookmark products)\n   - Image uploads\n   - Categories\n\nWHAT HAPPENS WHEN A REQUEST COMES IN:\n1. FastAPI receives HTTP request (POST, GET, etc.)\n2. Matches URL to @app.post/@app.get decorator\n3. Validates request data with Pydantic schema\n4. Gets database session\n5. Executes endpoint function\n6. Returns response as JSON\n\"\"\"\n\nfrom fastapi import FastAPI, Depends, HTTPException, status, UploadFile, File, Query\nfrom fastapi.middleware.cors import CORSMiddleware  # Allow cross-origin requests\nfrom fastapi.staticfiles import StaticFiles  # Serve static files (images)\nfrom sqlalchemy.orm import Session\nfrom sqlalchemy import or_, and_  # SQL query helpers\nfrom typing import List, Optional\nimport os\nimport shutil\nimport uuid  # Generate unique filenames\nfrom datetime import datetime\nimport socketio  # Real-time websocket communication\n\n# Import database and authentication functions\nfrom backend.database import get_db, init_db\nfrom backend.models import User, University, Product, ProductImage, SavedItem, Category, Message, Comment\nfrom backend.schemas import (\n    UserRegister, UserLogin, UserResponse, LoginResponse, UserUpdate,\n    ProductCreate, ProductUpdate, ProductResponse, ProductListResponse,\n    SavedItemToggle, SavedItemResponse, UploadResponse, MessageCreate, MessageResponse,\n    SellerInfo, CategoryResponse, ProductImageResponse, CommentCreate, CommentResponse\n)\nfrom backend.auth import (\n    get_password_hash, verify_password, create_access_token, get_current_user\n)\n\n# =============================================================================\n# FASTAPI APP INITIALIZATION\n# =============================================================================\n# Create the FastAPI application instance\n# This is the main app object that handles all requests\napp = FastAPI(\n    title=\"UniMarket API\",\n    version=\"1.0.0\",\n    # Swagger UI will be available at /docs\n    # ReDoc will be available at /redoc\n)\n\n# Initialize Socket.IO for real-time messaging\nsio = socketio.AsyncServer(\n    async_mode='asgi',\n    cors_allowed_origins=['*'],  # Allow all origins for development\n    logger=False,\n    engineio_logger=False\n)\n\n# Create ASGI app that combines FastAPI and Socket.IO\nfrom socketio import ASGIApp\napp_with_sio = ASGIApp(sio, app)\n\n# =============================================================================\n# CORS MIDDLEWARE\n# =============================================================================\n# CORS = Cross-Origin Resource Sharing\n# Allows frontend (different domain/port) to call backend API\n# Without this, browsers block requests for security\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],  # Allow all origins (fine for development)\n    allow_credentials=True,  # Allow cookies/credentials\n    allow_methods=[\"*\"],  # Allow all HTTP methods (GET, POST, PUT, DELETE, etc.)\n    allow_headers=[\"*\"],  # Allow all headers\n)\n\n# =============================================================================\n# STATIC FILE SETUP\n# =============================================================================\n# Create uploads directory if it doesn't exist\nos.makedirs(\"backend/uploads/products\", exist_ok=True)\n\n# Mount /uploads to serve uploaded images\n# When frontend requests: /uploads/products/image.jpg\n# It serves from: backend/uploads/products/image.jpg\napp.mount(\"/uploads\", StaticFiles(directory=\"backend/uploads\"), name=\"uploads\")\n\n# =============================================================================\n# STARTUP EVENT\n# =============================================================================\n# This function runs once when the server starts\n@app.on_event(\"startup\")\ndef startup_event():\n    \"\"\"Initialize the database on server startup\"\"\"\n    init_db()  # Create tables, add default data\n\n# =============================================================================\n# HEALTH CHECK ENDPOINT\n# =============================================================================\n@app.get(\"/api/health\")\ndef health_check():\n    \"\"\"\n    Simple health check endpoint.\n    \n    Returns: {\"status\": \"healthy\"}\n    Used by: Frontend or monitoring systems to check if API is running\n    \"\"\"\n    return {\"status\": \"healthy\"}\n\n# =============================================================================\n# AUTHENTICATION ENDPOINTS\n# =============================================================================\n\n@app.post(\"/api/auth/register\", status_code=status.HTTP_201_CREATED)\ndef register(user_data: UserRegister, db: Session = Depends(get_db)):\n    \"\"\"\n    Register a new user account.\n    \n    REQUEST DATA:\n    {\n        \"fullName\": \"John Doe\",\n        \"username\": \"johndoe\",\n        \"email\": \"john@bazeuniversity.edu.ng\",\n        \"password\": \"password123\",\n        \"universityId\": 1\n    }\n    \n    RETURNS: {\"message\": \"User registered successfully.\"}\n    \n    VALIDATION:\n    1. Username must not already exist\n    2. Email must not already exist\n    3. University must exist in database\n    4. Email must match university domain (e.g., @bazeuniversity.edu.ng)\n    5. Password length validated by Pydantic (6-72 chars)\n    \n    WHAT IT DOES:\n    1. Check if username/email already registered\n    2. Get university and validate it exists\n    3. Validate email domain matches university\n    4. Hash password with bcrypt\n    5. Create new User in database\n    6. Return success message\n    \"\"\"\n    # Check if username or email already exists\n    existing_user = db.query(User).filter(\n        or_(User.username == user_data.username, User.email == user_data.email)\n    ).first()\n    \n    if existing_user:\n        if existing_user.username == user_data.username:\n            raise HTTPException(status_code=409, detail=\"Username already exists\")\n        if existing_user.email == user_data.email:\n            raise HTTPException(status_code=409, detail=\"Email already exists\")\n    \n    # Get university from database and validate it exists\n    university = db.query(University).filter(University.id == user_data.universityId).first()\n    if not university:\n        raise HTTPException(status_code=400, detail=\"Invalid university\")\n    \n    # Validate email domain matches university\n    # For Baze University, email must end with @bazeuniversity.edu.ng\n    if university.id == 1:\n        if not user_data.email.endswith(f\"@{university.domain}\"):\n            raise HTTPException(\n                status_code=400,\n                detail=f\"Email must end with @{university.domain} for {university.name}\"\n            )\n    \n    # Hash the password using bcrypt (one-way encryption)\n    hashed_password = get_password_hash(user_data.password)\n    \n    # Create new User object with hashed password\n    new_user = User(\n        full_name=user_data.fullName,\n        username=user_data.username,\n        email=user_data.email,\n        password_hash=hashed_password,  # Store hash, not plain password!\n        university_id=user_data.universityId\n    )\n    \n    # Add to database and save\n    db.add(new_user)\n    db.commit()\n    \n    return {\"message\": \"User registered successfully.\"}\n\n@app.post(\"/api/auth/login\", response_model=LoginResponse)\ndef login(credentials: UserLogin, db: Session = Depends(get_db)):\n    \"\"\"\n    Login and get JWT token.\n    \n    REQUEST DATA:\n    {\n        \"email\": \"john@bazeuniversity.edu.ng\",\n        \"password\": \"password123\"\n    }\n    \n    RETURNS:\n    {\n        \"token\": \"eyJhbGciOiJIUzI1NiIs...\",  // JWT token\n        \"user\": {  // Current user info\n            \"id\": 1,\n            \"fullName\": \"John Doe\",\n            ...\n        }\n    }\n    \n    HOW IT WORKS:\n    1. Find user by email in database\n    2. Verify password with bcrypt\n    3. If valid: Create JWT token (expires in 7 days)\n    4. Return token + user info to frontend\n    5. Frontend stores token in localStorage\n    6. Frontend includes token in Authorization header for future requests\n    \"\"\"\n    # Find user by email\n    user = db.query(User).filter(User.email == credentials.email).first()\n    \n    # Verify password\n    # verify_password does bcrypt comparison (doesn't expose the hash)\n    if not user or not verify_password(credentials.password, user.password_hash):\n        raise HTTPException(\n            status_code=401,\n            detail=\"Invalid email or password\"\n        )\n    \n    # Create JWT token\n    # Token contains userId and expires in 7 days\n    access_token = create_access_token(data={\"userId\": user.id})\n    \n    # Return token + user info\n    return {\n        \"token\": access_token,\n        \"user\": {\n            \"id\": user.id,\n            \"fullName\": user.full_name,\n            \"email\": user.email,\n            \"username\": user.username,\n            \"bio\": user.bio,\n            \"profileImage\": user.profile_image,\n            \"phone\": user.phone\n        }\n    }\n\n@app.get(\"/api/auth/me\", response_model=UserResponse)\ndef get_me(current_user: User = Depends(get_current_user)):\n    \"\"\"\n    Get current logged-in user profile.\n    \n    REQUIRES: Valid JWT token in Authorization header\n    Format: Authorization: Bearer <token>\n    \n    RETURNS: Current user's profile data\n    \n    HOW IT WORKS:\n    1. FastAPI calls get_current_user automatically\n    2. get_current_user verifies the token\n    3. Returns the User object\n    4. This endpoint just formats and returns user data\n    \"\"\"\n    return {\n        \"id\": current_user.id,\n        \"fullName\": current_user.full_name,\n        \"email\": current_user.email,\n        \"username\": current_user.username,\n        \"bio\": current_user.bio,\n        \"profileImage\": current_user.profile_image,\n        \"phone\": current_user.phone\n    }\n\n@app.get(\"/api/users\", response_model=List[UserResponse])\ndef get_all_users(db: Session = Depends(get_db)):\n    \"\"\"\n    Get all users (for messaging conversations).\n    \n    RETURNS: List of all users (excluding password)\n    \"\"\"\n    users = db.query(User).all()\n    return [\n        {\n            \"id\": u.id,\n            \"fullName\": u.full_name,\n            \"email\": u.email,\n            \"username\": u.username,\n            \"bio\": u.bio,\n            \"profileImage\": u.profile_image,\n            \"phone\": u.phone\n        }\n        for u in users\n    ]\n\n@app.get(\"/api/users/{user_id}\", response_model=UserResponse)\ndef get_user(user_id: int, db: Session = Depends(get_db)):\n    \"\"\"\n    Get user profile by ID.\n    \n    PARAMETERS:\n    - user_id: The ID of the user to retrieve\n    \n    RETURNS: User's profile data\n    \"\"\"\n    user = db.query(User).filter(User.id == user_id).first()\n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    return {\n        \"id\": user.id,\n        \"fullName\": user.full_name,\n        \"email\": user.email,\n        \"username\": user.username,\n        \"bio\": user.bio,\n        \"profileImage\": user.profile_image,\n        \"phone\": user.phone\n    }\n\n@app.put(\"/api/users/{user_id}\", response_model=UserResponse)\ndef update_user(\n    user_id: int,\n    user_data: UserUpdate,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Update user profile (own profile only).\n    \n    REQUIRES: Valid JWT token in Authorization header\n    Format: Authorization: Bearer <token>\n    \n    PARAMETERS:\n    - user_id: ID of the user to update (must match current user)\n    \n    REQUEST BODY:\n    {\n        \"fullName\": \"New Full Name\" (optional),\n        \"bio\": \"New biography\" (optional),\n        \"avatarUrl\": \"/uploads/products/image.jpg\" (optional)\n    }\n    \n    RETURNS: Updated user profile\n    \n    SECURITY:\n    - User can only update their own profile\n    - Cannot update email or username\n    \"\"\"\n    # Check if user is trying to update their own profile\n    if current_user.id != user_id:\n        raise HTTPException(\n            status_code=403,\n            detail=\"You can only update your own profile\"\n        )\n    \n    # Get the user to update\n    user = db.query(User).filter(User.id == user_id).first()\n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    # Update fields if provided\n    if user_data.fullName is not None:\n        user.full_name = user_data.fullName\n    \n    if user_data.bio is not None:\n        user.bio = user_data.bio\n    \n    if user_data.avatarUrl is not None:\n        user.profile_image = user_data.avatarUrl\n    \n    # Save changes to database\n    db.commit()\n    db.refresh(user)\n    \n    # Return updated user\n    return {\n        \"id\": user.id,\n        \"fullName\": user.full_name,\n        \"email\": user.email,\n        \"username\": user.username,\n        \"bio\": user.bio,\n        \"profileImage\": user.profile_image,\n        \"phone\": user.phone\n    }\n\n# =============================================================================\n# PRODUCT SERIALIZATION HELPER\n# =============================================================================\ndef serialize_product(product: Product) -> dict:\n    \"\"\"\n    Convert a Product object from database to JSON-ready dictionary.\n    \n    This function takes all product data (including related images, seller, category)\n    and formats it for the API response.\n    \n    WHY THIS FUNCTION?\n    - Products have relationships (images, seller, category)\n    - Need to convert these relationships to JSON\n    - Avoid repeating this code in multiple endpoints\n    \"\"\"\n    return {\n        \"id\": product.id,\n        \"name\": product.name,\n        \"description\": product.description,\n        \"price\": product.price,\n        \"location\": product.location,\n        \"condition\": product.condition,\n        \"size\": product.size,\n        \"color\": product.color,\n        \"status\": product.status,\n        \"createdAt\": product.created_at,\n        \"updatedAt\": product.updated_at,\n        # Convert images relationship to list of dicts\n        \"images\": [\n            {\n                \"id\": img.id,\n                \"imageUrl\": img.image_url,\n                \"isPrimary\": img.is_primary\n            } for img in product.images\n        ],\n        # Convert seller relationship to dict\n        \"seller\": {\n            \"id\": product.seller.id,\n            \"fullName\": product.seller.full_name,\n            \"username\": product.seller.username,\n            \"profileImage\": product.seller.profile_image\n        },\n        # Convert category relationship to dict\n        \"category\": {\n            \"id\": product.category.id,\n            \"name\": product.category.name\n        }\n    }\n\n# =============================================================================\n# PRODUCT ENDPOINTS\n# =============================================================================\n\n@app.get(\"/api/products\", response_model=ProductListResponse)\ndef get_products(\n    q: Optional[str] = Query(None),  # Search query\n    category: Optional[str] = Query(None),  # Filter by category name\n    minPrice: Optional[float] = Query(None),  # Minimum price\n    maxPrice: Optional[float] = Query(None),  # Maximum price\n    condition: Optional[str] = Query(None),  # Filter by condition (New, Like New, etc.)\n    sortBy: Optional[str] = Query(\"newest\"),  # Sort by: newest, price-asc, price-desc\n    userId: Optional[int] = Query(None),  # Filter by seller ID (show only user's listings)\n    page: int = Query(1, ge=1),  # Page number (starts at 1)\n    limit: int = Query(20, ge=1, le=100),  # Results per page\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    List all available products with filtering, sorting, and pagination.\n    \n    QUERY PARAMETERS (all optional):\n    ?q=textbook&category=Textbooks&minPrice=10&maxPrice=100&condition=Like New&sortBy=price-asc&page=1&limit=20&userId=6\n    \n    SPECIAL PARAMETERS:\n    ?userId=6 - Show only products from user ID 6 (for \"My Listings\")\n    \n    RETURNS:\n    {\n        \"page\": 1,\n        \"limit\": 20,\n        \"totalPages\": 5,\n        \"totalResults\": 100,\n        \"products\": [...]  // Array of product objects\n    }\n    \n    HOW IT WORKS:\n    1. Start with query: Get all products (or user's products if userId provided)\n    2. Apply filters: Search text, category, price range, condition\n    3. Apply sorting: newest, price ascending, or price descending\n    4. Apply pagination: Skip to correct page, limit results\n    5. Count total results and calculate total pages\n    6. Return paginated results\n    \"\"\"\n    # Start with all available products (not deleted/sold)\n    # OR if userId is provided, show only that user's products (regardless of status)\n    if userId:\n        query = db.query(Product).filter(Product.seller_id == userId)\n    else:\n        query = db.query(Product).filter(Product.status == \"available\")\n    \n    # SEARCH FILTER: Search in name or description\n    if q:\n        search_term = f\"%{q}%\"  # Add wildcards for LIKE query\n        query = query.filter(\n            or_(\n                Product.name.like(search_term),  # Search in name\n                Product.description.like(search_term)  # Search in description\n            )\n        )\n    \n    # CATEGORY FILTER: Filter by category name\n    if category:\n        cat = db.query(Category).filter(Category.name == category).first()\n        if cat:\n            query = query.filter(Product.category_id == cat.id)\n    \n    # PRICE FILTER: Minimum price\n    if minPrice is not None:\n        query = query.filter(Product.price >= minPrice)\n    \n    # PRICE FILTER: Maximum price\n    if maxPrice is not None:\n        query = query.filter(Product.price <= maxPrice)\n    \n    # CONDITION FILTER: Product condition\n    if condition:\n        query = query.filter(Product.condition == condition)\n    \n    # SORTING\n    if sortBy == \"price-asc\":\n        query = query.order_by(Product.price.asc())  # Cheapest first\n    elif sortBy == \"price-desc\":\n        query = query.order_by(Product.price.desc())  # Most expensive first\n    else:\n        query = query.order_by(Product.created_at.desc())  # Newest first (default)\n    \n    # Count total results (before pagination)\n    total = query.count()\n    total_pages = (total + limit - 1) // limit  # Ceiling division\n    \n    # PAGINATION: Skip to correct page and limit results\n    # Page 1: offset=0 (skip 0)\n    # Page 2: offset=20 (skip 20)\n    # Page 3: offset=40 (skip 40)\n    products = query.offset((page - 1) * limit).limit(limit).all()\n    \n    # Return paginated results\n    return {\n        \"page\": page,\n        \"limit\": limit,\n        \"totalPages\": total_pages,\n        \"totalResults\": total,\n        \"products\": [serialize_product(p) for p in products]\n    }\n\n@app.get(\"/api/products/{product_id}\", response_model=ProductResponse)\ndef get_product(product_id: int, db: Session = Depends(get_db)):\n    \"\"\"\n    Get details for a single product.\n    \n    URL: /api/products/5\n    RETURNS: Complete product object with images, seller, category\n    \n    ERROR: 404 if product doesn't exist\n    \"\"\"\n    # Find product by ID\n    product = db.query(Product).filter(Product.id == product_id).first()\n    \n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    return serialize_product(product)\n\n@app.post(\"/api/products\", status_code=status.HTTP_201_CREATED, response_model=ProductResponse)\ndef create_product(\n    product_data: ProductCreate,\n    current_user: User = Depends(get_current_user),  # Require login\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Create a new product listing.\n    \n    REQUIRES: Valid JWT token (must be logged in)\n    \n    REQUEST DATA:\n    {\n        \"name\": \"Textbook\",\n        \"description\": \"Used calculus textbook...\",\n        \"price\": 45.99,\n        \"categoryId\": 1,\n        \"location\": \"Library Building\",\n        \"condition\": \"Like New\",\n        \"size\": null,\n        \"color\": null,\n        \"images\": [\"/uploads/products/image1.jpg\", \"/uploads/products/image2.jpg\"]\n    }\n    \n    RETURNS: Complete product object\n    \n    VALIDATION:\n    1. Category must exist\n    2. Must provide 1-5 images\n    3. Images must be uploaded first (via /api/upload endpoint)\n    \n    HOW IT WORKS:\n    1. Get current user from token\n    2. Validate category exists\n    3. Validate 1-5 images provided\n    4. Create Product in database (seller_id = current_user.id)\n    5. Add ProductImage records for each image\n    6. First image is marked as primary\n    7. Return created product\n    \"\"\"\n    # Validate category exists\n    category = db.query(Category).filter(Category.id == product_data.categoryId).first()\n    if not category:\n        raise HTTPException(status_code=400, detail=\"Invalid category\")\n    \n    # Validate 1-5 images provided\n    if len(product_data.images) < 1 or len(product_data.images) > 5:\n        raise HTTPException(status_code=400, detail=\"Product must have between 1 and 5 images\")\n    \n    # Create new Product object\n    new_product = Product(\n        name=product_data.name,\n        description=product_data.description,\n        price=product_data.price,\n        category_id=product_data.categoryId,\n        seller_id=current_user.id,  # Set seller to current user\n        location=\"Baze University\",  # All products are at Baze University (only sellers from Baze)\n        condition=product_data.condition,\n        size=product_data.size,\n        color=product_data.color,\n        status=\"available\"  # New products are available for sale\n    )\n    \n    # Save product to database\n    db.add(new_product)\n    db.commit()\n    db.refresh(new_product)  # Refresh to get the ID\n    \n    # Add images to the product\n    for idx, image_url in enumerate(product_data.images):\n        product_image = ProductImage(\n            product_id=new_product.id,\n            image_url=image_url,\n            is_primary=1 if idx == 0 else 0  # First image is primary\n        )\n        db.add(product_image)\n    \n    # Save images to database\n    db.commit()\n    db.refresh(new_product)\n    \n    return serialize_product(new_product)\n\n@app.put(\"/api/products/{product_id}\", response_model=ProductResponse)\ndef update_product(\n    product_id: int,\n    product_data: ProductUpdate,\n    current_user: User = Depends(get_current_user),  # Require login\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Update a product listing.\n    \n    REQUIRES: Valid JWT token AND must be the product owner\n    \n    AUTHORIZATION: Only the seller can update their own products\n    \n    HOW IT WORKS:\n    1. Find product by ID\n    2. Check current user is the seller\n    3. Update provided fields (others unchanged)\n    4. If images provided: delete old ones, add new ones\n    5. Update the updated_at timestamp\n    6. Return updated product\n    \"\"\"\n    # Find product\n    product = db.query(Product).filter(Product.id == product_id).first()\n    \n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    # Check authorization: user must be the seller\n    if product.seller_id != current_user.id:\n        raise HTTPException(status_code=403, detail=\"You can only edit your own products\")\n    \n    # Get only the fields that were provided (not None)\n    update_data = product_data.model_dump(exclude_unset=True)\n    \n    # Handle images if provided\n    if \"images\" in update_data:\n        images = update_data.pop(\"images\")  # Remove from update_data\n        \n        # Validate image count\n        if len(images) < 1 or len(images) > 5:\n            raise HTTPException(status_code=400, detail=\"Product must have between 1 and 5 images\")\n        \n        # Delete old images\n        db.query(ProductImage).filter(ProductImage.product_id == product_id).delete()\n        \n        # Add new images\n        for idx, image_url in enumerate(images):\n            product_image = ProductImage(\n                product_id=product_id,\n                image_url=image_url,\n                is_primary=1 if idx == 0 else 0\n            )\n            db.add(product_image)\n    \n    # Handle category if provided\n    if \"categoryId\" in update_data:\n        category = db.query(Category).filter(Category.id == update_data[\"categoryId\"]).first()\n        if not category:\n            raise HTTPException(status_code=400, detail=\"Invalid category\")\n        product.category_id = update_data.pop(\"categoryId\")\n    \n    # Update all other fields\n    for key, value in update_data.items():\n        setattr(product, key, value)\n    \n    # Update the updated_at timestamp\n    product.updated_at = datetime.utcnow()\n    \n    # Save changes\n    db.commit()\n    db.refresh(product)\n    \n    return serialize_product(product)\n\n@app.delete(\"/api/products/{product_id}\", status_code=status.HTTP_204_NO_CONTENT)\ndef delete_product(\n    product_id: int,\n    current_user: User = Depends(get_current_user),  # Require login\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Delete a product listing (soft delete).\n    \n    REQUIRES: Valid JWT token AND must be the product owner\n    \n    SOFT DELETE: Product is marked as \"deleted\" (not permanently removed)\n    This keeps history and allows potential recovery\n    \n    HOW IT WORKS:\n    1. Find product by ID\n    2. Check current user is the seller\n    3. Set product.status = \"deleted\"\n    4. Save to database\n    5. Return 204 (No Content) - success with no response body\n    \n    RESULT: Product no longer appears in product listings\n    \"\"\"\n    # Find product\n    product = db.query(Product).filter(Product.id == product_id).first()\n    \n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    # Check authorization\n    if product.seller_id != current_user.id:\n        raise HTTPException(status_code=403, detail=\"You can only delete your own products\")\n    \n    # Soft delete: Mark as deleted instead of removing from database\n    product.status = \"deleted\"\n    db.commit()\n    \n    return None  # 204 response with no body\n\n# =============================================================================\n# SAVED ITEMS ENDPOINTS (Bookmarks/Wishlist)\n# =============================================================================\n\n@app.post(\"/api/saved-items\", response_model=SavedItemResponse)\ndef toggle_saved_item(\n    data: SavedItemToggle,\n    current_user: User = Depends(get_current_user),  # Require login\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Toggle save/unsave a product (bookmark/wishlist).\n    \n    REQUIRES: Valid JWT token\n    \n    REQUEST DATA:\n    {\"productId\": 5}\n    \n    RETURNS:\n    {\"isSaved\": true}  // true if saved, false if unsaved\n    \n    HOW IT WORKS:\n    1. Find if product exists\n    2. Check if already saved by this user\n    3. If saved: Delete SavedItem record (unsave)\n    4. If not saved: Create SavedItem record (save)\n    5. Return current state\n    \"\"\"\n    # Validate product exists\n    product = db.query(Product).filter(Product.id == data.productId).first()\n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    # Check if already saved\n    saved_item = db.query(SavedItem).filter(\n        and_(SavedItem.user_id == current_user.id, SavedItem.product_id == data.productId)\n    ).first()\n    \n    if saved_item:\n        # Already saved: Delete to unsave\n        db.delete(saved_item)\n        db.commit()\n        return {\"isSaved\": False}\n    else:\n        # Not saved: Create new SavedItem\n        new_saved_item = SavedItem(\n            user_id=current_user.id,\n            product_id=data.productId\n        )\n        db.add(new_saved_item)\n        db.commit()\n        return {\"isSaved\": True}\n\n@app.get(\"/api/saved-items\", response_model=List[ProductResponse])\ndef get_saved_items(\n    current_user: User = Depends(get_current_user),  # Require login\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Get all products saved by current user.\n    \n    REQUIRES: Valid JWT token\n    \n    RETURNS: Array of product objects\n    \n    HOW IT WORKS:\n    1. Query all SavedItem records for current user\n    2. Extract product IDs from SavedItem records\n    3. Query all Products with those IDs\n    4. Return complete product objects\n    \"\"\"\n    # Get all saved item records for this user\n    saved_items = db.query(SavedItem).filter(SavedItem.user_id == current_user.id).all()\n    \n    # Extract product IDs\n    product_ids = [item.product_id for item in saved_items]\n    \n    # Query products by IDs\n    products = db.query(Product).filter(Product.id.in_(product_ids)).all()\n    \n    return [serialize_product(p) for p in products]\n\n# =============================================================================\n# IMAGE UPLOAD ENDPOINT\n# =============================================================================\n\n@app.post(\"/api/upload\", response_model=UploadResponse)\nasync def upload_image(file: UploadFile = File(...)):\n    \"\"\"\n    Upload a product image.\n    \n    MULTIPART FORM DATA:\n    - file: Image file (JPG, PNG, etc.)\n    \n    RETURNS:\n    {\"imageUrl\": \"/uploads/products/uuid-here.jpg\"}\n    \n    FILE VALIDATION:\n    - Must be an image file (content-type starts with \"image/\")\n    - Not validated: File size, dimensions, etc.\n    \n    HOW IT WORKS:\n    1. Validate file is an image\n    2. Generate unique filename (UUID + original extension)\n    3. Save file to backend/uploads/products/\n    4. Return URL to access the image\n    5. Frontend uses returned URL when creating product\n    \n    FILE STORAGE:\n    - Uploaded to: backend/uploads/products/{uuid}.{extension}\n    - Accessible at: /uploads/products/{uuid}.{extension}\n    - Not stored in database (only the URL is stored)\n    \"\"\"\n    # Validate file is an image\n    if not file.content_type.startswith(\"image/\"):\n        raise HTTPException(status_code=400, detail=\"File must be an image\")\n    \n    # Generate unique filename to avoid conflicts\n    # Use UUID (universally unique identifier) + original extension\n    # Example: 3fa85f64-5717-4562-b3fc-2c963f66afa6.jpg\n    file_extension = file.filename.split(\".\")[-1]\n    unique_filename = f\"{uuid.uuid4()}.{file_extension}\"\n    file_path = f\"backend/uploads/products/{unique_filename}\"\n    \n    # Save file to disk\n    with open(file_path, \"wb\") as buffer:\n        shutil.copyfileobj(file.file, buffer)  # Copy file contents\n    \n    # Return URL to access the uploaded image\n    # Frontend will use this URL in the images array when creating product\n    return {\"imageUrl\": f\"/uploads/products/{unique_filename}\"}\n\n# =============================================================================\n# CATEGORY ENDPOINT\n# =============================================================================\n\n@app.get(\"/api/categories\")\ndef get_categories(db: Session = Depends(get_db)):\n    \"\"\"\n    Get all product categories.\n    \n    RETURNS: Array of category objects\n    [\n        {\"id\": 1, \"name\": \"Textbooks\"},\n        {\"id\": 2, \"name\": \"Electronics\"},\n        {\"id\": 3, \"name\": \"Clothing\"},\n        ...\n    ]\n    \n    USED BY: Frontend to populate category dropdown filters\n    \"\"\"\n    categories = db.query(Category).all()\n    return [{\"id\": c.id, \"name\": c.name} for c in categories]\n\n# =============================================================================\n# REAL-TIME MESSAGING (Socket.IO)\n# =============================================================================\n\n# Track connected users: {user_id: socket_id}\nconnected_users = {}\n\n@sio.event\nasync def connect(sid, environ):\n    \"\"\"Handle user connection to Socket.IO\"\"\"\n    print(f\"Client connected: {sid}\")\n\n@sio.event\nasync def disconnect(sid):\n    \"\"\"Handle user disconnection from Socket.IO\"\"\"\n    # Remove user from connected list\n    for user_id, socket_id in list(connected_users.items()):\n        if socket_id == sid:\n            del connected_users[user_id]\n    print(f\"Client disconnected: {sid}\")\n\n@sio.event\nasync def authenticate(sid, data):\n    \"\"\"Authenticate user for Socket.IO connection\"\"\"\n    user_id = data.get('userId')\n    if user_id:\n        connected_users[user_id] = sid\n        await sio.emit('authenticated', {'status': 'ok', 'userId': user_id}, to=sid)\n\n@sio.event\nasync def send_message(sid, data):\n    \"\"\"Handle real-time message sending via Socket.IO\"\"\"\n    # This is just the real-time event - messages are also saved via REST API\n    receiver_id = data.get('receiverId')\n    content = data.get('content')\n    sender_id = data.get('senderId')\n    \n    # Emit to receiver if connected\n    if receiver_id in connected_users:\n        receiver_sid = connected_users[receiver_id]\n        await sio.emit('receive_message', {\n            'senderId': sender_id,\n            'content': content,\n            'timestamp': datetime.utcnow().isoformat()\n        }, to=receiver_sid)\n    \n    # Emit back to sender for confirmation\n    await sio.emit('message_sent', {'status': 'success'}, to=sid)\n\n# =============================================================================\n# MESSAGE REST API ENDPOINTS\n# =============================================================================\n\n@app.post(\"/api/messages\", response_model=MessageResponse)\nasync def send_message_api(\n    message_data: MessageCreate,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Send a message to another user.\n    \n    REQUEST BODY:\n    {\n        \"receiverId\": 5,\n        \"content\": \"Hi, is this still available?\"\n    }\n    \n    RETURNS: Message object with timestamp\n    \"\"\"\n    # Verify receiver exists\n    receiver = db.query(User).filter(User.id == message_data.receiverId).first()\n    if not receiver:\n        raise HTTPException(status_code=404, detail=\"Receiver not found\")\n    \n    # Create message with current user as sender\n    new_message = Message(\n        sender_id=current_user.id,\n        receiver_id=message_data.receiverId,\n        content=message_data.content\n    )\n    \n    db.add(new_message)\n    db.commit()\n    db.refresh(new_message)\n    \n    # Emit real-time notification via Socket.IO if receiver is connected\n    if message_data.receiverId in connected_users:\n        await sio.emit('receive_message', {\n            'senderId': current_user.id,\n            'content': message_data.content,\n            'timestamp': new_message.created_at.isoformat()\n        }, to=connected_users[message_data.receiverId])\n    \n    return {\n        \"id\": new_message.id,\n        \"senderId\": new_message.sender_id,\n        \"receiverId\": new_message.receiver_id,\n        \"content\": new_message.content,\n        \"createdAt\": new_message.created_at,\n        \"isRead\": new_message.is_read\n    }\n\n@app.get(\"/api/messages/{user_id}\", response_model=List[MessageResponse])\ndef get_messages(\n    user_id: int,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    \"\"\"\n    Get all messages between users.\n    \n    PARAMETERS:\n    - user_id: The other user's ID (conversation partner)\n    \n    RETURNS: List of messages in chronological order\n    \"\"\"\n    # Get all messages between the current user and the specified user\n    messages = db.query(Message).filter(\n        or_(\n            and_(Message.sender_id == current_user.id, Message.receiver_id == user_id),\n            and_(Message.sender_id == user_id, Message.receiver_id == current_user.id)\n        )\n    ).order_by(Message.created_at).all()\n    \n    # Mark messages as read (for current user)\n    for msg in messages:\n        if msg.receiver_id == current_user.id and msg.is_read == 0:\n            msg.is_read = 1\n    db.commit()\n    \n    return [\n        {\n            \"id\": m.id,\n            \"senderId\": m.sender_id,\n            \"receiverId\": m.receiver_id,\n            \"content\": m.content,\n            \"createdAt\": m.created_at,\n            \"isRead\": m.is_read\n        }\n        for m in messages\n    ]\n\n# =============================================================================\n# COMMENT ENDPOINTS (Product Comments/Questions)\n# =============================================================================\n\n@app.post(\"/api/products/{product_id}/comments\", response_model=CommentResponse)\ndef create_comment(\n    product_id: int,\n    comment_data: CommentCreate,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    \"\"\"Create a new comment on a product\"\"\"\n    # Check if product exists\n    product = db.query(Product).filter(Product.id == product_id).first()\n    if not product:\n        raise HTTPException(status_code=404, detail=\"Product not found\")\n    \n    # Create new comment\n    new_comment = Comment(\n        product_id=product_id,\n        author_id=current_user.id,\n        content=comment_data.content\n    )\n    \n    db.add(new_comment)\n    db.commit()\n    db.refresh(new_comment)\n    \n    return {\n        \"id\": new_comment.id,\n        \"productId\": new_comment.product_id,\n        \"authorId\": new_comment.author_id,\n        \"content\": new_comment.content,\n        \"createdAt\": new_comment.created_at,\n        \"author\": {\n            \"id\": current_user.id,\n            \"fullName\": current_user.full_name,\n            \"username\": current_user.username,\n            \"email\": current_user.email,\n            \"bio\": current_user.bio,\n            \"profileImage\": current_user.profile_image,\n            \"phone\": current_user.phone\n        }\n    }\n\n@app.get(\"/api/products/{product_id}/comments\", response_model=List[CommentResponse])\ndef get_comments(\n    product_id: int,\n    db: Session = Depends(get_db)\n):\n    \"\"\"Get all comments for a product\"\"\"\n    comments = db.query(Comment).filter(Comment.product_id == product_id).order_by(Comment.created_at.desc()).all()\n    \n    return [\n        {\n            \"id\": c.id,\n            \"productId\": c.product_id,\n            \"authorId\": c.author_id,\n            \"content\": c.content,\n            \"createdAt\": c.created_at,\n            \"author\": {\n                \"id\": c.author.id,\n                \"fullName\": c.author.full_name,\n                \"username\": c.author.username,\n                \"email\": c.author.email,\n                \"bio\": c.author.bio,\n                \"profileImage\": c.author.profile_image,\n                \"phone\": c.author.phone\n            }\n        }\n        for c in comments\n    ]\n\n@app.delete(\"/api/comments/{comment_id}\", status_code=status.HTTP_204_NO_CONTENT)\ndef delete_comment(\n    comment_id: int,\n    current_user: User = Depends(get_current_user),\n    db: Session = Depends(get_db)\n):\n    \"\"\"Delete a comment (only author or seller can delete)\"\"\"\n    comment = db.query(Comment).filter(Comment.id == comment_id).first()\n    if not comment:\n        raise HTTPException(status_code=404, detail=\"Comment not found\")\n    \n    # Check if current user is the author or the product seller\n    if comment.author_id != current_user.id and comment.product.seller_id != current_user.id:\n        raise HTTPException(status_code=403, detail=\"You can only delete your own comments\")\n    \n    db.delete(comment)\n    db.commit()\n    \n    return None\n","size_bytes":39162},"backend/__init__.py":{"content":"","size_bytes":0},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"bcrypt>=5.0.0\",\n    \"fastapi>=0.121.3\",\n    \"passlib[bcrypt]>=1.7.4\",\n    \"pillow>=12.0.0\",\n    \"psycopg2-binary>=2.9.11\",\n    \"pydantic[email]>=2.12.4\",\n    \"pyjwt>=2.10.1\",\n    \"python-engineio>=4.12.3\",\n    \"python-jose[cryptography]>=3.5.0\",\n    \"python-multipart>=0.0.20\",\n    \"python-socketio>=5.14.3\",\n    \"sqlalchemy>=2.0.44\",\n    \"uvicorn[standard]>=0.38.0\",\n]\n","size_bytes":517},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","size_bytes":96},"start.sh":{"content":"#!/bin/bash\n\n# =============================================================================\n# UNIMARKET STARTUP SCRIPT\n# =============================================================================\n# This script starts both the backend API and frontend web server.\n# It runs them as background processes so both can run simultaneously.\n\n# WHAT IT DOES:\n# 1. Start FastAPI backend server on port 8000\n# 2. Start Python HTTP server (frontend) on port 5000\n# Both servers run in parallel\n\n# HOW TO RUN:\n# bash start.sh\n\n# WHAT YOU'LL SEE:\n# \"Starting FastAPI backend on port 8000...\"\n# \"Starting frontend server on port 5000...\"\n\n# TO STOP:\n# Press Ctrl+C to stop both servers\n\n# =============================================================================\n# START BACKEND SERVER\n# =============================================================================\n# uvicorn = ASGI server that runs FastAPI\n# backend.main:app = Run the FastAPI app from backend/main.py\n# --host 0.0.0.0 = Listen on all interfaces (accessible from frontend)\n# --port 8000 = Listen on port 8000\n# & = Run in background so we can start frontend too\n\necho \"Starting FastAPI backend on port 8000...\"\nuvicorn backend.main:app_with_sio --host 0.0.0.0 --port 8000 &\n\n# =============================================================================\n# START FRONTEND SERVER\n# =============================================================================\n# This starts server.py (Python's SimpleHTTPServer)\n# This serves the static HTML/CSS/JavaScript files\n# --host 0.0.0.0:5000 = Listen on all interfaces, port 5000\n# No & here because it runs in foreground (frontend server is the \"main\" process)\n\necho \"Starting frontend server on port 5000...\"\npython3 server.py\n\n# Note: When you Ctrl+C, it stops the frontend server\n# The backend server (running in background) will also stop\n","size_bytes":1848},"replit.md":{"content":"# UniMarket - Campus Marketplace\n\n## Overview\nUniMarket is a full-stack, peer-to-peer campus marketplace designed exclusively for Baze University students. It facilitates secure buying, selling, and communication using Nigerian Naira (₦). The platform offers comprehensive product management, real-time messaging, user authentication, and profile management, aiming to create a vibrant internal economy within the university.\n\n## User Preferences\nI prefer detailed explanations and clear, concise language. Please ensure all code changes are well-documented. I favor iterative development and prefer to be asked before major changes are implemented. Do not make changes to the `replit.md` file itself. Do not make changes to files in the `backend/uploads/products/` directory.\n\n## System Architecture\nUniMarket employs a client-server architecture. The frontend, built with vanilla HTML, CSS, and JavaScript, communicates with a FastAPI backend. Real-time features are handled via Socket.IO.\n\n### UI/UX Decisions\n- **Responsive Design**: Mobile-first approach using CSS media queries.\n- **Styling**: Modern CSS3 with CSS variables for theming.\n- **Iconography**: Lucide Icons via CDN for a lightweight solution.\n\n### Technical Implementations\n- **Frontend**: Vanilla HTML5, CSS3, JavaScript (ES6+), Socket.IO Client.\n- **Backend**: Python 3.11 with FastAPI, SQLAlchemy ORM, JWT for authentication, bcrypt for password hashing, and Uvicorn as the ASGI server.\n- **Real-time Messaging**: Socket.IO for instant message delivery with a REST API fallback for persistence.\n- **Authentication**: Stateless JWT tokens with a 7-day expiry and university email domain validation (`@bazeuniversity.edu.ng`).\n- **Image Handling**: Product and profile image uploads with compression and lazy loading.\n- **Database**: SQLite for development, PostgreSQL-ready for production, managed with SQLAlchemy.\n\n### Feature Specifications\n- **User Authentication**: University-gated registration, secure password hashing, JWT-based authentication, \"Remember Me\" functionality.\n- **User Profiles**: Avatar upload, customizable bio, username/full name management, viewable stats (listings/sales), edit-only by owner.\n- **Product Management**: Create, view, edit, and delete listings with multiple images, category filtering, price/condition sorting, and soft deletes.\n- **Messaging System**: Real-time Socket.IO chat, conversation list, message persistence, read status, unread notifications, and message history.\n- **Saved Items (Wishlist)**: Bookmark products for later viewing, with persistence and removal options.\n\n### System Design Choices\n- **Dual Server Setup**: Frontend (static files) and Backend (FastAPI) run concurrently, orchestrated by a `start.sh` script.\n- **Database Agnostic**: Designed for easy transition between SQLite (development) and PostgreSQL (production).\n- **CORS Enabled**: Configured for cross-origin requests between frontend and backend.\n- **Performance**: Async/await for concurrency, database indexing, connection pooling, and client-side optimizations like lazy loading.\n- **Security**: JWT tokens, bcrypt hashing, SQL injection prevention via ORM, user authorization checks, and environment variable usage for secrets.\n\n## External Dependencies\n- **Database**: SQLite (development), PostgreSQL (production)\n- **Real-time Communication**: Socket.IO\n- **Icons**: Lucide Icons (via CDN)\n- **Password Hashing**: bcrypt\n- **Web Server**: Uvicorn (development), Gunicorn (production)\n- **Static File Server**: Nginx (production)\n- **SSL Certificates**: Let's Encrypt (production)","size_bytes":3585},"DOCUMENTATION.md":{"content":"# UniMarket Full Documentation\n\n## Overview\nUniMarket is a full-stack peer-to-peer marketplace for university students. This document explains how every part of the code works, line by line.\n\n---\n\n## Project Structure\n\n```\nUniMarket/\n├── backend/                    # FastAPI backend (Python)\n│   ├── main.py                # Main API endpoints\n│   ├── models.py              # Database table definitions\n│   ├── database.py            # Database connection setup\n│   ├── auth.py                # Authentication & security\n│   ├── schemas.py             # Request/response validation\n│   └── uploads/               # User uploaded images\n│\n├── js/                        # Frontend JavaScript\n│   ├── app.js                 # General UI interactions\n│   └── products.js            # Product filtering & sorting\n│\n├── css/                       # Stylesheets\n│   ├── style.css              # Main styles\n│   └── products.css           # Product page styles\n│\n├── HTML files                 # Frontend pages\n│   ├── index.html             # Home page\n│   ├── products.html          # Products listing\n│   ├── login.html             # Login page\n│   ├── signup.html            # Registration page\n│   └── ...\n│\n├── server.py                  # Python HTTP server (frontend)\n├── start.sh                   # Startup script\n├── unimarket.db               # SQLite database (created automatically)\n└── pyproject.toml             # Python dependencies\n```\n\n---\n\n## Backend Overview\n\n### How the Backend Works (High Level)\n\n1. **User submits data** (login, create product, etc.)\n2. **FastAPI receives the request** (main.py)\n3. **Database is queried** (models.py with SQLAlchemy)\n4. **Response is sent back** as JSON\n5. **Frontend displays the result**\n\n### Architecture\n\n```\nUser Request\n    ↓\nFastAPI Routes (main.py)\n    ↓\nValidation (schemas.py)\n    ↓\nAuthentication Check (auth.py)\n    ↓\nDatabase Query (models.py + database.py)\n    ↓\nResponse\n```\n\n---\n\n## File-by-File Breakdown\n\n### 1. backend/database.py\n**Purpose**: Database connection and initialization\n\n**Key Concepts**:\n- **Engine**: The connection to the database (SQLite or PostgreSQL)\n- **Session**: A temporary connection used for one request\n- **init_db()**: Creates tables and adds initial data on startup\n\n**What happens on startup**:\n1. Creates all database tables\n2. Adds \"Baze University\" if not exists\n3. Adds product categories if not exist\n\n---\n\n### 2. backend/models.py\n**Purpose**: Define database table structure\n\n**Tables Created**:\n- `universities`: Stores university info\n- `users`: Stores student/staff accounts\n- `categories`: Product categories (Books, Electronics, etc.)\n- `products`: Product listings\n- `product_images`: Product photos\n- `saved_items`: User bookmarks/wishlist\n\n**Key Concept - Foreign Keys**:\nA foreign key links one table to another:\n```\nUser has university_id → Points to universities table\nProduct has seller_id → Points to users table\nProduct has category_id → Points to categories table\n```\n\n**Key Concept - Relationships**:\nMake it easy to access related data:\n```python\nuser = db.query(User).first()\nuser.products  # Get all products this user created (automatic!)\nuser.university  # Get the university they belong to (automatic!)\n```\n\n---\n\n### 3. backend/auth.py\n**Purpose**: Handle login, password security, and token verification\n\n**Three Main Functions**:\n\n1. **get_password_hash(password)**\n   - Takes plain password\n   - Hashes it using bcrypt (encryption)\n   - Returns hash to store in database\n   - Used during: REGISTRATION\n\n2. **verify_password(plain_password, hash)**\n   - Takes plain password from login form\n   - Checks if it matches the stored hash\n   - Returns True/False\n   - Used during: LOGIN\n\n3. **create_access_token(data)**\n   - Creates a JWT token\n   - Token contains user ID\n   - Token expires in 7 days\n   - Sent to frontend\n   - Used during: LOGIN SUCCESS\n\n4. **get_current_user(credentials, db)**\n   - Reads token from Authorization header\n   - Verifies token is valid and not expired\n   - Finds user in database\n   - Returns user object\n   - Used during: EVERY PROTECTED ENDPOINT\n\n**How Authentication Flow Works**:\n\n```\nREGISTRATION:\nUser enters password\n  ↓\nget_password_hash() → bcrypt hashes it\n  ↓\nStore hash in database (NOT plain password)\n\nLOGIN:\nUser enters email and password\n  ↓\nFind user by email in database\n  ↓\nverify_password(password, stored_hash) → True/False\n  ↓\nIf True: create_access_token() → Send token to frontend\n  ↓\nFrontend stores token in localStorage\n\nMAKING API REQUESTS:\nFrontend sends: Authorization: Bearer <token>\n  ↓\nget_current_user() reads the token\n  ↓\nVerifies signature using SECRET_KEY\n  ↓\nChecks if expired\n  ↓\nFinds user in database\n  ↓\nReturns user to endpoint (or raises 401 error)\n```\n\n---\n\n### 4. backend/schemas.py\n**Purpose**: Validate incoming data and format outgoing data\n\n**What it does**:\n- Checks that data matches expected format\n- Example: Email must be valid, password must be 6+ chars\n- Converts between Python objects and JSON\n\n**Example**:\n```python\nclass UserRegister(BaseModel):\n    fullName: str = Field(..., min_length=2, max_length=255)\n    # ↑ fullName must be string, 2-255 chars\n    \n    password: str = Field(..., min_length=6, max_length=72)\n    # ↑ password must be 6-72 chars (bcrypt limit)\n```\n\nWhen frontend sends:\n```json\n{\n    \"fullName\": \"John Doe\",\n    \"email\": \"john@bazeuniversity.edu.ng\",\n    \"password\": \"password123\",\n    \"universityId\": 1\n}\n```\n\nPydantic automatically:\n- Checks format is correct\n- Validates email format\n- Validates password length\n- Returns error if anything is wrong\n\n---\n\n### 5. backend/main.py\n**Purpose**: All API endpoints (routes)\n\n**How endpoints work**:\n```python\n@app.post(\"/api/auth/login\")\ndef login(credentials: UserLogin, db: Session = Depends(get_db)):\n    # endpoint code here\n```\n\nBreaking this down:\n- `@app.post()`: HTTP POST request\n- `\"/api/auth/login\"`: URL path\n- `credentials: UserLogin`: Validate request with UserLogin schema\n- `db: Session = Depends(get_db)`: Get database session automatically\n\n**Main Endpoints**:\n\n1. **POST /api/auth/register**\n   - Validates email doesn't exist\n   - Validates username doesn't exist\n   - Validates university domain\n   - Hashes password\n   - Saves to database\n\n2. **POST /api/auth/login**\n   - Finds user by email\n   - Verifies password\n   - Creates JWT token\n   - Returns token + user data\n\n3. **GET /api/auth/me**\n   - Requires valid JWT\n   - Returns current user profile\n\n4. **GET /api/products**\n   - List all available products\n   - Support filtering: category, price, condition\n   - Support sorting: newest, price-asc, price-desc\n   - Support pagination: page, limit\n\n5. **GET /api/products/{id}**\n   - Get details for one product\n\n6. **POST /api/products**\n   - Create new product (requires login)\n   - Validate 1-5 images provided\n   - Save to database with seller_id\n\n7. **PUT /api/products/{id}**\n   - Update product (requires login, must be owner)\n   - Check user is the seller\n   - Update fields\n\n8. **DELETE /api/products/{id}**\n   - Delete product (soft delete - mark as \"deleted\")\n   - Requires login, must be owner\n\n9. **POST /api/saved-items**\n   - Toggle save/unsave product\n   - Creates or deletes SavedItem record\n\n10. **GET /api/saved-items**\n    - Get user's saved products (requires login)\n\n11. **POST /api/upload**\n    - Handle image uploads\n    - Save to backend/uploads/products/\n    - Return URL\n\n12. **GET /api/categories**\n    - List all product categories\n\n---\n\n## Frontend Overview\n\n### How Frontend Works\n\n1. User opens website → server.py serves HTML\n2. HTML loads CSS and JavaScript\n3. JavaScript runs code to add interactivity\n4. When user clicks buttons/submits forms → JavaScript makes API calls\n5. API returns JSON data\n6. JavaScript updates page with new data\n\n### Key Frontend Concepts\n\n**localStorage**: Browser storage that persists after page refresh\n```javascript\nlocalStorage.setItem('token', 'abc123')  // Save token\nlocalStorage.getItem('token')            // Get token\nlocalStorage.removeItem('token')         // Delete token\n```\n\n**API Calls from Frontend**:\n```javascript\nfetch('http://localhost:8000/api/products', {\n    method: 'GET',  // or POST, PUT, DELETE\n    headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token  // Include token for protected endpoints\n    },\n    body: JSON.stringify(data)  // Send data for POST/PUT\n})\n```\n\n---\n\n### 6. js/app.js\n**Purpose**: General UI interactions\n\n**What it does**:\n- Mobile menu toggle\n- Sticky header shadow\n- Animated counters\n- Save/bookmark buttons\n- Dropdown menus\n- Search functionality\n\n---\n\n### 7. js/products.js\n**Purpose**: Product page filtering and sorting\n\n**Key Functions**:\n\n1. **fetchProducts()**\n   - Makes API call with current filters\n   - Builds query string: ?category=Electronics&sortBy=price-asc\n   - Gets products from backend\n   - Calls displayProducts() to show results\n\n2. **displayProducts(products)**\n   - Takes product array from API\n   - Creates HTML for each product\n   - Inserts into page\n   - Updates Lucide icons\n\n3. **Event Listeners**:\n   - Category dropdown → calls fetchProducts()\n   - Price slider → updates currentFilters, doesn't fetch yet\n   - Apply Filter button → calls fetchProducts()\n   - Sort dropdown → calls fetchProducts()\n   - Clear All button → resets filters, calls fetchProducts()\n\n---\n\n## How Data Flows Through the App\n\n### Registration Flow\n```\n1. User enters credentials on signup.html\n2. JavaScript sends POST /api/auth/register\n3. Backend validates email, username, university domain\n4. Backend hashes password with bcrypt\n5. Backend saves new User to database\n6. Frontend receives success message\n7. Frontend redirects to login.html\n```\n\n### Login Flow\n```\n1. User enters email and password on login.html\n2. JavaScript sends POST /api/auth/login\n3. Backend finds user by email\n4. Backend verifies password with bcrypt\n5. Backend creates JWT token\n6. Backend returns token + user data\n7. Frontend stores token in localStorage\n8. Frontend redirects to products.html\n9. Frontend makes API calls with token in header\n```\n\n### Create Product Flow\n```\n1. User fills form on sell.html\n2. JavaScript uploads images → POST /api/upload\n3. Backend saves images, returns URLs\n4. JavaScript sends POST /api/products with image URLs\n5. Backend validates images (1-5)\n6. Backend saves Product to database with seller_id\n7. Frontend shows success message\n8. Product appears on products.html\n```\n\n### Browse Products Flow\n```\n1. User visits products.html\n2. JavaScript calls fetchProducts()\n3. fetchProducts() builds query string\n4. Sends GET /api/products?category=Electronics&sortBy=price-asc\n5. Backend queries database with filters\n6. Backend returns matching products + images + seller info\n7. JavaScript displays products in grid\n```\n\n---\n\n## Security Features\n\n### 1. Password Security\n- Passwords hashed with bcrypt (one-way encryption)\n- Password verification only compares hashes\n- Plain passwords never stored in database\n\n### 2. Authentication\n- JWT tokens for stateless authentication\n- Tokens expire in 7 days\n- Tokens signed with SECRET_KEY (secret string)\n- Only backend can create valid tokens\n\n### 3. Email Validation\n- University email required for registration\n- @bazeuniversity.edu.ng enforced for Baze\n- Prevents fake accounts\n\n### 4. Authorization\n- Protected endpoints check token validity\n- Users can only edit/delete their own products\n- Users can only view their own saved items\n\n---\n\n## Environment Variables\n\n**LOCAL DEVELOPMENT**:\n```bash\n# Uses defaults (SQLite, localhost)\nDATABASE_URL=sqlite:///./unimarket.db\nJWT_SECRET_KEY=your-secret-key-here\n```\n\n**PRODUCTION**:\n```bash\n# Switch to PostgreSQL for scaling\nDATABASE_URL=postgresql://user:pass@host/database\n\n# Use strong secret key\nJWT_SECRET_KEY=super-long-random-secret-string-with-upper-lower-numbers\n```\n\n---\n\n## Running Locally\n\n### Prerequisites\n- Python 3.8+\n- pip or uv package manager\n\n### Setup\n\n```bash\n# 1. Install dependencies\npip install -r requirements.txt\n# or\nuv sync\n\n# 2. Run both servers\nbash start.sh\n\n# 3. Open browser\n# Frontend: http://localhost:5000\n# API Docs: http://localhost:8000/docs\n```\n\n### What happens on first run:\n1. SQLite database created (unimarket.db)\n2. All tables created automatically\n3. Baze University added\n4. Categories (Books, Electronics, etc.) added\n\n---\n\n## Switching to PostgreSQL\n\n### Step 1: Create PostgreSQL Database\n```bash\n# Using pgAdmin or command line\ncreatedb unimarket\n```\n\n### Step 2: Set Environment Variable\n```bash\nexport DATABASE_URL=\"postgresql://user:password@localhost:5432/unimarket\"\n```\n\n### Step 3: Run App\n```bash\nbash start.sh\n```\n\n### That's it!\n- No code changes needed\n- SQLAlchemy handles both SQLite and PostgreSQL\n- Same app works with both!\n\n---\n\n## API Reference\n\n### Authentication Endpoints\n\n**Register**\n```\nPOST /api/auth/register\n{\n    \"fullName\": \"John Doe\",\n    \"username\": \"johndoe\",\n    \"email\": \"john@bazeuniversity.edu.ng\",\n    \"password\": \"password123\",\n    \"universityId\": 1\n}\n→ 201 Created: {\"message\": \"User registered successfully.\"}\n```\n\n**Login**\n```\nPOST /api/auth/login\n{\n    \"email\": \"john@bazeuniversity.edu.ng\",\n    \"password\": \"password123\"\n}\n→ 200 OK: {\"token\": \"...\", \"user\": {...}}\n```\n\n**Get Profile**\n```\nGET /api/auth/me\nHeaders: Authorization: Bearer <token>\n→ 200 OK: {\"id\": 1, \"fullName\": \"John Doe\", ...}\n```\n\n### Product Endpoints\n\n**List Products**\n```\nGET /api/products?category=Electronics&sortBy=price-asc&page=1&limit=20\n→ 200 OK: {\"page\": 1, \"products\": [...], \"totalResults\": 42}\n```\n\n**Create Product**\n```\nPOST /api/products\nHeaders: Authorization: Bearer <token>\n{\n    \"name\": \"Textbook\",\n    \"description\": \"...\",\n    \"price\": 50.00,\n    \"categoryId\": 1,\n    \"images\": [\"url1\", \"url2\"],\n    \"condition\": \"Like New\"\n}\n→ 201 Created: {...product...}\n```\n\n**Save/Unsave Product**\n```\nPOST /api/saved-items\nHeaders: Authorization: Bearer <token>\n{\"productId\": 5}\n→ 200 OK: {\"isSaved\": true}\n```\n\n---\n\n## Troubleshooting\n\n**API not responding**\n- Check server is running: `http://localhost:8000/api/health`\n- Check backend logs for errors\n\n**Frontend can't connect to API**\n- Frontend uses: `http://localhost:8000/api`\n- Backend must be running on port 8000\n\n**Database errors**\n- First run: Delete unimarket.db, restart app\n- Switches to PostgreSQL: Set DATABASE_URL env var\n\n**Login issues**\n- Check JWT_SECRET_KEY is set (or default is used)\n- Token expires in 7 days - clear localStorage and re-login\n\n---\n\n## Next Steps\n\n1. **Deploy to production**: Use Replit's publish button\n2. **Switch to PostgreSQL**: Handles 50+ concurrent users\n3. **Add more features**: Messaging, ratings, payments, etc.\n4. **Scale the database**: Use PostgreSQL replication\n\n---\n\n## Summary\n\n- **Backend** (Python/FastAPI): Handles logic, security, database\n- **Frontend** (HTML/CSS/JS): User interface, API calls\n- **Database**: Stores users, products, images, favorites\n- **Security**: Password hashing, JWT tokens, email validation\n- **Scalability**: Works with SQLite for small scale, PostgreSQL for large scale\n\nEverything is built to be beginner-friendly while remaining production-ready!\n","size_bytes":15425},"backend/schemas.py":{"content":"\"\"\"\nREQUEST/RESPONSE SCHEMAS\n========================\nThis module defines all data validation schemas using Pydantic.\n\nWHAT PYDANTIC DOES:\n1. Validates that incoming request data matches expected format\n2. Converts request data to Python objects\n3. Converts Python objects back to JSON for responses\n4. Provides automatic error messages if data is invalid\n\nWHY WE NEED THIS:\n- Type safety: Ensures API gets correct data types\n- Automatic validation: Checks constraints (min length, max length, etc.)\n- Documentation: Auto-generates API docs showing expected request formats\n- Conversion: Handles JSON ↔ Python object conversion automatically\n\nHOW IT WORKS:\n1. User sends JSON request: {\"email\": \"john@example.com\", \"password\": \"password123\"}\n2. FastAPI validates against schema (e.g., UserLogin)\n3. If valid: Create Python object and pass to endpoint\n4. If invalid: Return 422 error with details on what's wrong\n5. Endpoint returns Python object\n6. FastAPI converts back to JSON and sends to client\n\"\"\"\n\nfrom pydantic import BaseModel, EmailStr, Field, field_validator\nfrom typing import Optional, List\nfrom datetime import datetime\n\n# =============================================================================\n# AUTHENTICATION SCHEMAS\n# =============================================================================\n\nclass UserRegister(BaseModel):\n    \"\"\"\n    Schema for user registration request.\n    \n    USED BY: POST /api/auth/register\n    \n    FIELDS:\n    - fullName: User's full name (2-255 chars)\n    - username: Unique username (3-100 chars)\n    - email: Valid email address (must use university domain)\n    - password: Password (6-72 chars - bcrypt limit)\n    - universityId: Which university they belong to\n    \n    VALIDATION:\n    - fullName: At least 2 characters, max 255\n    - username: At least 3 characters, max 100\n    - email: Must be valid email format\n    - password: Between 6-72 characters (bcrypt limitation)\n    - universityId: Must be integer\n    \n    EXAMPLE REQUEST:\n    {\n        \"fullName\": \"John Doe\",\n        \"username\": \"johndoe\",\n        \"email\": \"john@bazeuniversity.edu.ng\",\n        \"password\": \"password123\",\n        \"universityId\": 1\n    }\n    \"\"\"\n    fullName: str = Field(..., min_length=2, max_length=255)  # ... = required\n    username: str = Field(..., min_length=3, max_length=100)\n    email: EmailStr  # EmailStr automatically validates email format\n    password: str = Field(..., min_length=6, max_length=72, description=\"Password must be between 6 and 72 characters (bcrypt limit)\")\n    universityId: int\n\nclass UserLogin(BaseModel):\n    \"\"\"\n    Schema for login request.\n    \n    USED BY: POST /api/auth/login\n    \n    FIELDS:\n    - email: User's email address\n    - password: User's password\n    \n    EXAMPLE REQUEST:\n    {\n        \"email\": \"john@bazeuniversity.edu.ng\",\n        \"password\": \"password123\"\n    }\n    \"\"\"\n    email: EmailStr\n    password: str = Field(..., max_length=72)\n\nclass UserResponse(BaseModel):\n    \"\"\"\n    Schema for user profile response.\n    \n    USED BY: GET /api/auth/me response\n    \n    FIELDS:\n    - id: User's ID\n    - fullName: User's full name\n    - email: User's email\n    - username: User's username\n    - bio: Optional biography\n    - profileImage: Optional profile picture URL\n    - phone: Optional phone number\n    \n    from_attributes = True:\n    Converts database model to Pydantic model automatically\n    Without this, would need to manually create dict from User object\n    \"\"\"\n    id: int\n    fullName: str\n    email: str\n    username: str\n    bio: Optional[str] = None\n    profileImage: Optional[str] = None\n    phone: Optional[str] = None\n    \n    class Config:\n        from_attributes = True  # Convert database models to this schema\n\nclass UserUpdate(BaseModel):\n    \"\"\"\n    Schema for updating user profile.\n    \n    USED BY: PUT /api/users/{user_id} request\n    \n    FIELDS:\n    - fullName: User's full name (optional, 2-255 chars)\n    - bio: User's biography (optional, max 5000 chars)\n    - avatarUrl: URL to profile picture (optional)\n    \n    All fields are optional - only update fields that are provided.\n    \n    EXAMPLE REQUEST:\n    {\n        \"fullName\": \"John Doe\",\n        \"bio\": \"I'm a student at Baze University\",\n        \"avatarUrl\": \"/uploads/products/abc123.jpg\"\n    }\n    \"\"\"\n    fullName: Optional[str] = Field(None, min_length=2, max_length=255)\n    bio: Optional[str] = Field(None, max_length=5000)\n    avatarUrl: Optional[str] = None\n\nclass LoginResponse(BaseModel):\n    \"\"\"\n    Schema for login response.\n    \n    USED BY: POST /api/auth/login response\n    \n    FIELDS:\n    - token: JWT token for authentication (send in Authorization header)\n    - user: Current user's profile information\n    \n    EXAMPLE RESPONSE:\n    {\n        \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n        \"user\": {\n            \"id\": 1,\n            \"fullName\": \"John Doe\",\n            \"email\": \"john@bazeuniversity.edu.ng\",\n            \"username\": \"johndoe\",\n            \"bio\": null,\n            \"profileImage\": null,\n            \"phone\": null\n        }\n    }\n    \"\"\"\n    token: str\n    user: UserResponse\n\n# =============================================================================\n# PRODUCT SCHEMAS\n# =============================================================================\n\nclass ProductImageResponse(BaseModel):\n    \"\"\"\n    Schema for product image in responses.\n    \n    FIELDS:\n    - id: Image ID\n    - imageUrl: URL to access the image\n    - isPrimary: Is this the main/cover image? (1=yes, 0=no)\n    \"\"\"\n    id: int\n    imageUrl: str\n    isPrimary: int\n    \n    class Config:\n        from_attributes = True\n\nclass SellerInfo(BaseModel):\n    \"\"\"\n    Schema for seller information in product responses.\n    \n    Shows basic seller info without sensitive data.\n    \n    FIELDS:\n    - id: Seller's user ID\n    - fullName: Seller's name\n    - username: Seller's username\n    - profileImage: Optional seller's profile picture\n    \"\"\"\n    id: int\n    fullName: str\n    username: str\n    profileImage: Optional[str] = None\n    \n    class Config:\n        from_attributes = True\n\nclass CategoryResponse(BaseModel):\n    \"\"\"\n    Schema for product category in responses.\n    \n    FIELDS:\n    - id: Category ID\n    - name: Category name (e.g., \"Electronics\", \"Textbooks\")\n    \"\"\"\n    id: int\n    name: str\n    \n    class Config:\n        from_attributes = True\n\nclass ProductResponse(BaseModel):\n    \"\"\"\n    Schema for complete product in responses.\n    \n    USED BY:\n    - GET /api/products/{id}\n    - GET /api/products (in the products array)\n    - GET /api/saved-items\n    \n    FIELDS:\n    - id: Product ID\n    - name: Product name/title\n    - description: Full product description\n    - price: Product price\n    - location: Where product is located (optional)\n    - condition: Product condition (New, Like New, Good, Fair)\n    - size: Product size (optional, for clothing)\n    - color: Product color (optional)\n    - status: available/sold/deleted\n    - createdAt: When product was listed\n    - updatedAt: When product was last updated\n    - images: Array of product images\n    - seller: Seller information\n    - category: Product category\n    \n    EXAMPLE:\n    {\n        \"id\": 5,\n        \"name\": \"Calculus Textbook\",\n        \"description\": \"Used calculus textbook...\",\n        \"price\": 45.99,\n        \"location\": \"Library Building\",\n        \"condition\": \"Like New\",\n        \"size\": null,\n        \"color\": null,\n        \"status\": \"available\",\n        \"createdAt\": \"2025-11-22T10:30:00\",\n        \"updatedAt\": \"2025-11-22T10:30:00\",\n        \"images\": [\n            {\"id\": 1, \"imageUrl\": \"/uploads/products/uuid.jpg\", \"isPrimary\": 1}\n        ],\n        \"seller\": {...},\n        \"category\": {...}\n    }\n    \"\"\"\n    id: int\n    name: str\n    description: str\n    price: float\n    location: Optional[str] = None\n    condition: Optional[str] = None\n    size: Optional[str] = None\n    color: Optional[str] = None\n    status: str\n    createdAt: datetime\n    updatedAt: datetime\n    images: List[ProductImageResponse]\n    seller: SellerInfo\n    category: CategoryResponse\n    \n    class Config:\n        from_attributes = True\n\nclass ProductCreate(BaseModel):\n    \"\"\"\n    Schema for creating a new product.\n    \n    USED BY: POST /api/products\n    \n    FIELDS:\n    - name: Product name (1-255 chars, required)\n    - description: Full description (required)\n    - price: Product price (must be > 0, required)\n    - categoryId: Category ID (required)\n    - location: Where product is located (optional)\n    - images: Array of image URLs (1-5 images required)\n    - condition: Product condition (optional)\n    - size: Product size like \"M\", \"Large\" (optional)\n    - color: Product color (optional)\n    \n    VALIDATION:\n    - price > 0: Can't have free or negative price\n    - 1-5 images: Must provide at least 1, max 5\n    - name min length 1: Can't be empty\n    - description min length 1: Can't be empty\n    \n    EXAMPLE REQUEST:\n    {\n        \"name\": \"Calculus Textbook\",\n        \"description\": \"Used calculus textbook, excellent condition...\",\n        \"price\": 45.99,\n        \"categoryId\": 1,\n        \"location\": \"Library Building\",\n        \"images\": [\"/uploads/products/uuid1.jpg\", \"/uploads/products/uuid2.jpg\"],\n        \"condition\": \"Like New\",\n        \"size\": null,\n        \"color\": null\n    }\n    \n    NOTE: Images must be uploaded via /api/upload endpoint first\n    \"\"\"\n    name: str = Field(..., min_length=1, max_length=255)\n    description: str = Field(..., min_length=1)\n    price: float = Field(..., gt=0)  # gt=0 means \"greater than 0\"\n    categoryId: int\n    location: Optional[str] = None\n    images: List[str] = Field(..., min_items=1, max_items=5)  # 1-5 images required\n    condition: Optional[str] = None\n    size: Optional[str] = None\n    color: Optional[str] = None\n\nclass ProductUpdate(BaseModel):\n    \"\"\"\n    Schema for updating an existing product.\n    \n    USED BY: PUT /api/products/{id}\n    \n    DIFFERENCES FROM ProductCreate:\n    - All fields are OPTIONAL (use None if not updating that field)\n    - Same validation rules, just all optional\n    \n    EXAMPLE REQUEST (only updating price and name):\n    {\n        \"name\": \"New Price on Calculus Textbook\",\n        \"price\": 35.99,\n        \"description\": null,\n        \"categoryId\": null,\n        ...other fields null...\n    }\n    \n    Only non-null fields will be updated in database\n    \"\"\"\n    name: Optional[str] = Field(None, min_length=1, max_length=255)\n    description: Optional[str] = Field(None, min_length=1)\n    price: Optional[float] = Field(None, gt=0)\n    categoryId: Optional[int] = None\n    location: Optional[str] = None\n    images: Optional[List[str]] = Field(None, min_items=1, max_items=5)\n    condition: Optional[str] = None\n    size: Optional[str] = None\n    color: Optional[str] = None\n\nclass ProductListResponse(BaseModel):\n    \"\"\"\n    Schema for list of products response (paginated).\n    \n    USED BY: GET /api/products\n    \n    FIELDS:\n    - page: Current page number\n    - limit: Number of results per page\n    - totalPages: Total number of pages\n    - totalResults: Total number of products matching filters\n    - products: Array of ProductResponse objects\n    \n    PAGINATION EXAMPLE:\n    If totalResults=100 and limit=20:\n    - Page 1: results 1-20\n    - Page 2: results 21-40\n    - Page 3: results 41-60\n    - Page 4: results 61-80\n    - Page 5: results 81-100\n    - totalPages=5\n    \n    EXAMPLE RESPONSE:\n    {\n        \"page\": 1,\n        \"limit\": 20,\n        \"totalPages\": 5,\n        \"totalResults\": 100,\n        \"products\": [...]  // Array of 20 ProductResponse objects\n    }\n    \"\"\"\n    page: int\n    limit: int\n    totalPages: int\n    totalResults: int\n    products: List[ProductResponse]\n\n# =============================================================================\n# SAVED ITEMS (BOOKMARKS) SCHEMAS\n# =============================================================================\n\nclass SavedItemToggle(BaseModel):\n    \"\"\"\n    Schema for saving/unsaving a product.\n    \n    USED BY: POST /api/saved-items\n    \n    FIELDS:\n    - productId: Which product to save/unsave\n    \n    BEHAVIOR:\n    - If product is already saved: Unsave it (delete SavedItem record)\n    - If product is not saved: Save it (create SavedItem record)\n    - Response shows current state after toggle\n    \n    EXAMPLE REQUEST:\n    {\"productId\": 5}\n    \"\"\"\n    productId: int\n\nclass SavedItemResponse(BaseModel):\n    \"\"\"\n    Schema for saved item toggle response.\n    \n    RETURNED BY: POST /api/saved-items\n    \n    FIELDS:\n    - isSaved: Current save state after toggle\n    \n    EXAMPLE RESPONSE:\n    {\"isSaved\": true}  // Now saved\n    {\"isSaved\": false}  // Now unsaved\n    \"\"\"\n    isSaved: bool\n\n# =============================================================================\n# FILE UPLOAD SCHEMA\n# =============================================================================\n\nclass UploadResponse(BaseModel):\n    \"\"\"\n    Schema for file upload response.\n    \n    USED BY: POST /api/upload\n    \n    FIELDS:\n    - imageUrl: URL where uploaded image is accessible\n    \n    USAGE FLOW:\n    1. Frontend sends image file to POST /api/upload\n    2. Backend saves file and returns this response\n    3. Frontend gets back the imageUrl\n    4. Frontend includes imageUrl in images array when creating product\n    5. Backend stores the URL in product_images table\n    \n    EXAMPLE RESPONSE:\n    {\"imageUrl\": \"/uploads/products/3fa85f64-5717-4562-b3fc-2c963f66afa6.jpg\"}\n    \n    This URL can be used in:\n    <img src=\"/uploads/products/3fa85f64-5717-4562-b3fc-2c963f66afa6.jpg\" />\n    \"\"\"\n    imageUrl: str\n\n# =============================================================================\n# MESSAGE SCHEMAS (Real-time Chat)\n# =============================================================================\n\nclass MessageCreate(BaseModel):\n    \"\"\"Schema for creating a new message\"\"\"\n    receiverId: int\n    content: str\n\nclass MessageResponse(BaseModel):\n    \"\"\"Schema for message response\"\"\"\n    id: int\n    senderId: int\n    receiverId: int\n    content: str\n    createdAt: datetime\n    isRead: int\n    \n    class Config:\n        from_attributes = True\n\n# =============================================================================\n# COMMENT SCHEMAS (Product Comments/Questions)\n# =============================================================================\n\nclass CommentCreate(BaseModel):\n    \"\"\"Schema for creating a new comment\"\"\"\n    content: str\n\nclass CommentResponse(BaseModel):\n    \"\"\"Schema for comment response\"\"\"\n    id: int\n    productId: int\n    authorId: int\n    content: str\n    createdAt: datetime\n    author: UserResponse\n    \n    class Config:\n        from_attributes = True\n","size_bytes":14680},"js/app.js":{"content":"/**\n * UNIMARKET GLOBAL SCRIPTS\n * ========================\n * This file contains global JavaScript functions used across all pages.\n * \n * WHAT IT DOES:\n * - Initialize Lucide Icons (SVG icons library)\n * - Mobile menu toggle (hamburger menu)\n * - Sticky header shadow on scroll\n * - Animated counter for hero statistics\n * - Navigation bar state management\n * - Logout functionality\n * - Helper function to convert relative image paths to backend URLs\n * \n * HOW IT WORKS:\n * 1. Wait for page to load (DOMContentLoaded)\n * 2. Run initialization code\n * 3. Attach event listeners to interactive elements\n * 4. Handle user interactions (clicks, scrolls, etc.)\n */\n\n// =============================================================================\n// IMAGE URL HELPER - CONVERT RELATIVE PATHS TO BACKEND URLs\n// =============================================================================\n// In Replit, frontend is on port 5000, backend is on port 8000\n// Product images and user avatars are stored on backend, so relative paths need to be converted\nfunction getImageUrl(imagePath) {\n    // If already a full URL or empty, return as-is\n    if (!imagePath || imagePath.startsWith('http://') || imagePath.startsWith('https://')) {\n        return imagePath;\n    }\n    \n    // Convert relative path to backend URL\n    const currentUrl = new URL(window.location.href);\n    const backendUrl = new URL(currentUrl);\n    backendUrl.port = '8000';\n    backendUrl.pathname = imagePath;\n    return backendUrl.toString();\n}\n\n// =============================================================================\n// LUCIDE ICONS INITIALIZATION\n// =============================================================================\n// Lucide is an SVG icon library that renders icons dynamically\n// We need to initialize it to convert <i data-lucide=\"icon-name\"></i> to actual icons\nlucide.createIcons();\n\n// =============================================================================\n// WAIT FOR PAGE TO LOAD\n// =============================================================================\n// DOMContentLoaded = All HTML is loaded (but images might still be loading)\n// Good time to attach event listeners and initialize UI\ndocument.addEventListener('DOMContentLoaded', () => {\n    // Re-initialize icons after DOM is ready\n    lucide.createIcons();\n\n    /* =========================================\n       MOBILE MENU TOGGLE\n       ========================================= */\n    /**\n     * Mobile hamburger menu that shows/hides navigation\n     * Only visible on small screens (see CSS media queries)\n     */\n    const menuBtn = document.querySelector('.mobile-menu-btn');\n    const mobileMenu = document.querySelector('.mobile-menu');\n\n    if (menuBtn && mobileMenu) {\n        menuBtn.addEventListener('click', () => {\n            // Toggle 'open' class to show/hide menu\n            mobileMenu.classList.toggle('open');\n        });\n        \n        // Close mobile menu when any link is clicked\n        mobileMenu.querySelectorAll('a, button').forEach(link => {\n            link.addEventListener('click', () => {\n                mobileMenu.classList.remove('open');\n            });\n        });\n    }\n\n    /* =========================================\n       STICKY HEADER SHADOW ON SCROLL\n       ========================================= */\n    /**\n     * When user scrolls down, add a shadow to header\n     * Makes it look like header is floating above content\n     * Better visual hierarchy and UX\n     */\n    const header = document.querySelector('.site-header');\n    if (header) {\n        window.addEventListener('scroll', () => {\n            if (window.scrollY > 10) {\n                // User scrolled down more than 10px\n                header.style.boxShadow = '0 4px 6px -1px rgba(0, 0, 0, 0.1)';\n            } else {\n                // User at top of page\n                header.style.boxShadow = 'none';\n            }\n        });\n    }\n\n    /* =========================================\n       ANIMATED COUNTER FOR HERO STATS\n       ========================================= */\n    /**\n     * Animate numbers counting up (e.g., 0 to 5000)\n     * Used for stats like \"5k+ Active Users\"\n     * Makes page feel more dynamic and polished\n     */\n    const animateCounter = (element, target, duration = 2000) => {\n        /**\n         * Animate a number from 0 to target over duration milliseconds\n         * \n         * PARAMETERS:\n         * - element: DOM element containing the number\n         * - target: Number to count up to\n         * - duration: How many milliseconds the animation takes\n         * \n         * HOW IT WORKS:\n         * 1. Calculate how much to increase each frame: target / (duration / 16ms)\n         * 2. setInterval runs 16ms apart (roughly 60fps)\n         * 3. Each interval, increase current by increment\n         * 4. Update element text\n         * 5. When current >= target, stop\n         */\n        const increment = target / (duration / 16);\n        let current = 0;\n\n        const timer = setInterval(() => {\n            current += increment;\n            if (current >= target) {\n                // Animation complete\n                element.textContent = target.toLocaleString();\n                clearInterval(timer);\n            } else {\n                // Still animating\n                element.textContent = Math.floor(current).toLocaleString();\n            }\n        }, 16);\n    };\n\n    // Find all stat numbers and animate them when visible\n    const heroStats = document.querySelectorAll('.stat-number');\n    if (heroStats.length > 0) {\n        const heroStatsContainer = document.querySelector('.hero-stats');\n        if (heroStatsContainer) {\n            // IntersectionObserver triggers callback when element becomes visible\n            // This prevents animating stats that user might never see\n            const observer = new IntersectionObserver((entries) => {\n                entries.forEach(entry => {\n                    if (entry.isIntersecting) {\n                        // Stats are now visible on screen\n                        heroStats.forEach(stat => {\n                            // Get target number from data attribute\n                            // Example: <span class=\"stat-number\" data-target=\"5000\">0</span>\n                            const target = parseInt(stat.getAttribute('data-target'));\n                            if (target) animateCounter(stat, target);\n                        });\n                        // Stop observing after animation starts\n                        observer.disconnect();\n                    }\n                });\n            }, { threshold: 0.5 });  // Trigger when 50% visible\n            observer.observe(heroStatsContainer);\n        }\n    }\n\n    /* =========================================\n       DROPDOWN MENUS\n       ========================================= */\n    /**\n     * Handle dropdown menus in navigation\n     * Click to show/hide, close when clicking outside\n     */\n    const dropdownToggles = document.querySelectorAll('[data-dropdown-toggle]');\n    dropdownToggles.forEach(toggle => {\n        toggle.addEventListener('click', (e) => {\n            e.preventDefault();\n            // Find the dropdown menu this toggle controls\n            const dropdownId = toggle.getAttribute('data-dropdown-toggle');\n            const dropdown = document.getElementById(dropdownId);\n            if (dropdown) {\n                dropdown.classList.toggle('show');\n            }\n        });\n    });\n\n    // Close dropdowns when clicking outside\n    document.addEventListener('click', (e) => {\n        if (!e.target.closest('[data-dropdown-toggle]') && !e.target.closest('.dropdown-menu')) {\n            document.querySelectorAll('.dropdown-menu.show').forEach(menu => {\n                menu.classList.remove('show');\n            });\n        }\n    });\n\n    /* =========================================\n       SHOP DROPDOWN MENU (Navigation)\n       ========================================= */\n    /**\n     * Handle Shop dropdown that shows categories\n     * Click Shop button to toggle, close when clicking outside\n     */\n    const navDropdownTriggers = document.querySelectorAll('.nav-dropdown-trigger');\n    navDropdownTriggers.forEach(trigger => {\n        trigger.addEventListener('click', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            // Find parent nav-dropdown and toggle open class\n            const dropdown = trigger.closest('.nav-dropdown');\n            if (dropdown) {\n                dropdown.classList.toggle('open');\n                // Close other nav dropdowns\n                document.querySelectorAll('.nav-dropdown.open').forEach(other => {\n                    if (other !== dropdown) {\n                        other.classList.remove('open');\n                    }\n                });\n            }\n        });\n    });\n\n    // Close nav dropdown when clicking outside\n    document.addEventListener('click', (e) => {\n        if (!e.target.closest('.nav-dropdown')) {\n            document.querySelectorAll('.nav-dropdown.open').forEach(dropdown => {\n                dropdown.classList.remove('open');\n            });\n        }\n    });\n\n    /* =========================================\n       PROFILE DROPDOWN MENU\n       ========================================= */\n    /**\n     * Handle profile dropdown that shows View Profile and Logout options\n     * Click profile icon to toggle, close when clicking outside\n     */\n    const profileDropdownTriggers = document.querySelectorAll('.profile-dropdown-trigger');\n    profileDropdownTriggers.forEach(trigger => {\n        trigger.addEventListener('click', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            // Find parent dropdown and toggle open class\n            const dropdown = trigger.closest('.profile-dropdown');\n            if (dropdown) {\n                dropdown.classList.toggle('open');\n                // Close other dropdowns\n                document.querySelectorAll('.profile-dropdown.open').forEach(other => {\n                    if (other !== dropdown) {\n                        other.classList.remove('open');\n                    }\n                });\n            }\n        });\n    });\n\n    // Close profile dropdown when clicking outside\n    document.addEventListener('click', (e) => {\n        if (!e.target.closest('.profile-dropdown')) {\n            document.querySelectorAll('.profile-dropdown.open').forEach(dropdown => {\n                dropdown.classList.remove('open');\n            });\n        }\n    });\n\n    /* =========================================\n       NAVBAR AUTH STATE - ICONS VS BUTTONS\n       ========================================= */\n    /**\n     * Toggle between Login/SignUp buttons and Icons (Bell, Message, Saved, Profile)\n     * When logged in: Show icon buttons, hide login/signup\n     * When logged out: Show login/signup buttons, hide icons\n     */\n    function updateNavbarAuthState() {\n        const token = localStorage.getItem('token');\n        const loggedOutActions = document.getElementById('logged-out-actions');\n        const loggedInActions = document.getElementById('logged-in-actions');\n        const mobileLoggedOutActions = document.getElementById('mobile-logged-out-actions');\n        const mobileLoggedInActions = document.getElementById('mobile-logged-in-actions');\n        \n        if (loggedOutActions && loggedInActions) {\n            if (token) {\n                // User is logged in - Show icons, hide login/signup buttons\n                loggedOutActions.classList.add('hidden');\n                loggedInActions.classList.remove('hidden');\n            } else {\n                // User is not logged in - Show login/signup buttons, hide icons\n                loggedOutActions.classList.remove('hidden');\n                loggedInActions.classList.add('hidden');\n            }\n        }\n        \n        // Update mobile menu auth state\n        if (mobileLoggedOutActions && mobileLoggedInActions) {\n            if (token) {\n                // User is logged in - Show authenticated links, hide login/signup\n                mobileLoggedOutActions.classList.add('hidden');\n                mobileLoggedInActions.classList.remove('hidden');\n            } else {\n                // User is not logged in - Show login/signup buttons, hide authenticated links\n                mobileLoggedOutActions.classList.remove('hidden');\n                mobileLoggedInActions.classList.add('hidden');\n            }\n        }\n    }\n    \n    // Update navbar auth state on page load\n    updateNavbarAuthState();\n    \n    /* =========================================\n       AUTHENTICATION STATE CHECK (Legacy)\n       ========================================= */\n    /**\n     * Check if user is logged in and update navigation\n     * Show different links for logged in vs logged out users\n     */\n    const token = localStorage.getItem('token');\n    const authLinks = document.querySelector('.auth-links');\n    \n    if (authLinks) {\n        if (token) {\n            // User is logged in\n            // Show: Profile, My Products, Logout buttons\n            // Hide: Login, Sign Up buttons\n            authLinks.innerHTML = `\n                <a href=\"profile.html\" class=\"nav-link\">Profile</a>\n                <a href=\"#\" class=\"nav-link\" onclick=\"logout(); return false;\">Logout</a>\n            `;\n        } else {\n            // User is not logged in\n            // Show: Login, Sign Up buttons\n            // Hide: Profile, My Products, Logout buttons\n            authLinks.innerHTML = `\n                <a href=\"login.html\" class=\"nav-link\">Log In</a>\n                <a href=\"signup.html\" class=\"nav-link-primary\">Sign Up</a>\n            `;\n        }\n    }\n});\n\n/* =============================================================================\n   LOGOUT FUNCTION\n   ============================================================================= */\n/**\n * Log out the current user and redirect to home page\n * \n * WHAT IT DOES:\n * 1. Remove JWT token from localStorage\n * 2. Redirect to home page\n * 3. Navigation bar automatically updates because token is gone\n */\nfunction logout() {\n    // Remove token and user data from browser storage\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    \n    // Redirect to home page\n    window.location.href = '/';\n}\n\n/* =============================================================================\n   UTILITY FUNCTIONS\n   ============================================================================= */\n\n/**\n * Get the JWT token from localStorage\n * Used before making authenticated API requests\n */\nfunction getToken() {\n    return localStorage.getItem('token');\n}\n\n/**\n * Clear broken tokens on page load\n * If token is literally \"undefined\", clear it\n */\nfunction clearBrokenToken() {\n    const token = localStorage.getItem('token');\n    \n    // If token is literally \"undefined\" or \"null\" (broken from old code), clear it\n    if (token === 'undefined' || token === 'null') {\n        console.log('❌ BROKEN TOKEN DETECTED! Clearing localStorage...');\n        localStorage.clear();\n        \n        // Only redirect if not already on login/signup\n        const currentPage = window.location.pathname;\n        if (!currentPage.includes('login') && !currentPage.includes('signup')) {\n            window.location.href = '/login.html';\n        }\n    }\n}\n\n// Clear broken token when page loads\nwindow.addEventListener('load', clearBrokenToken);\n\n/**\n * Check if user is logged in\n * Returns true if token exists, false otherwise\n */\nfunction isLoggedIn() {\n    return !!getToken();\n}\n\n/**\n * Check if user is logged in, redirect to login if not\n * Use at top of pages that require authentication\n */\nfunction requireLogin() {\n    if (!isLoggedIn()) {\n        // User not logged in, redirect to login page\n        window.location.href = '/login.html';\n    }\n}\n\n/* =============================================================================\n   UNREAD MESSAGE BADGE - Shows notification for new messages\n   ============================================================================= */\n\n/**\n * Fetch unread message count and update the notification badge\n * Called on page load and when new messages arrive\n */\nasync function updateMessageBadge() {\n    try {\n        const token = getToken();\n        const userStr = localStorage.getItem('user');\n        \n        if (!token || !userStr) {\n            // Hide badge if not logged in\n            const badge = document.getElementById('message-badge');\n            if (badge) badge.classList.add('hidden');\n            console.debug('Badge update skipped: user not logged in');\n            return;\n        }\n        \n        // Parse user object to get ID\n        const user = JSON.parse(userStr);\n        const userId = user.id;\n        \n        if (!userId) {\n            console.debug('No userId found in user object');\n            return;\n        }\n        \n        console.debug('Updating message badge for user:', userId);\n        \n        // Get all users to check for messages\n        const response = await fetch('/api/users', {\n            headers: { 'Authorization': `Bearer ${token}` }\n        });\n        \n        if (!response.ok) {\n            console.warn('Failed to fetch users for message badge. Status:', response.status);\n            // Don't clear token - just skip badge update\n            return;\n        }\n        \n        const users = await response.json();\n        let unreadCount = 0;\n        \n        // Check messages with each user for unread count\n        for (let user of users) {\n            if (user.id === parseInt(userId)) continue; // Skip current user\n            \n            try {\n                const msgResponse = await fetch(`/api/messages/${user.id}`, {\n                    headers: { 'Authorization': `Bearer ${token}` }\n                });\n                \n                if (msgResponse.ok) {\n                    const messages = await msgResponse.json();\n                    // Count unread messages (is_read = 0 and we are receiver)\n                    for (let msg of messages) {\n                        if (msg.isRead === 0 && msg.receiverId === parseInt(userId)) {\n                            unreadCount++;\n                        }\n                    }\n                }\n            } catch (error) {\n                // Continue checking other users even if one fails\n                console.debug('Error checking messages with user', user.id);\n            }\n        }\n        \n        // Update badge - show just a red dot if unread messages exist\n        const badge = document.getElementById('message-badge');\n        console.log('Badge element:', badge, 'Unread count:', unreadCount);\n        if (badge) {\n            if (unreadCount > 0) {\n                badge.textContent = '●';\n                badge.classList.remove('hidden');\n                badge.style.fontSize = '0.75rem';\n                badge.style.color = '#ef4444';\n                console.log('✅ Badge updated with unread count:', unreadCount);\n            } else {\n                badge.classList.add('hidden');\n                console.log('No unread messages');\n            }\n        } else {\n            console.warn('Message badge element not found on this page');\n        }\n    } catch (error) {\n        console.error('Error updating message badge:', error);\n        // Don't block the rest of the app if badge update fails\n    }\n}\n\n/**\n * Update message badge when page loads (if user is logged in)\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (isLoggedIn()) {\n        updateMessageBadge();\n        // Check for new messages every 5 seconds\n        setInterval(() => {\n            if (isLoggedIn()) {\n                updateMessageBadge();\n            }\n        }, 5000);\n    }\n    \n    // Global search functionality\n    initializeGlobalSearch();\n});\n\n// =============================================================================\n// GLOBAL SEARCH - Works from any page\n// =============================================================================\n/**\n * Initialize search bars on all pages\n * When user types in search bar and presses Enter or clicks search,\n * redirect to products.html with search query parameter\n */\nfunction initializeGlobalSearch() {\n    const searchBars = document.querySelectorAll('.search-bar');\n    \n    searchBars.forEach(searchBar => {\n        const searchInput = searchBar.querySelector('input');\n        const searchIcon = searchBar.querySelector('.search-icon');\n        \n        if (!searchInput) return;\n        \n        // Handle Enter key in search input\n        searchInput.addEventListener('keypress', (event) => {\n            if (event.key === 'Enter') {\n                event.preventDefault();\n                performSearch(searchInput.value);\n            }\n        });\n        \n        // Handle search icon click - toggle expand on mobile, search on desktop\n        if (searchIcon) {\n            searchIcon.addEventListener('click', (e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                \n                // Check if we're on mobile\n                const isMobile = window.innerWidth < 768;\n                \n                if (isMobile) {\n                    // Toggle expand on mobile\n                    if (!searchBar.classList.contains('expanded')) {\n                        // Expand\n                        searchBar.classList.add('expanded');\n                        searchInput.focus();\n                    } else {\n                        // Collapse and search if there's text\n                        if (searchInput.value.trim()) {\n                            performSearch(searchInput.value);\n                        } else {\n                            searchBar.classList.remove('expanded');\n                        }\n                    }\n                } else {\n                    // On desktop, perform search immediately\n                    performSearch(searchInput.value);\n                }\n            });\n        }\n        \n        // Close search bar when clicking outside (mobile only)\n        if (window.innerWidth < 768) {\n            document.addEventListener('click', (e) => {\n                if (!searchBar.contains(e.target)) {\n                    searchBar.classList.remove('expanded');\n                }\n            });\n        }\n    });\n}\n\n/**\n * Check authentication and navigate to a page\n * If user is not logged in, redirect to login page\n * If logged in, navigate to the target page\n * @param {string} targetPage - The page to navigate to (e.g., 'sell.html')\n */\nfunction checkAuthAndNavigate(targetPage) {\n    const token = localStorage.getItem('token');\n    const user = localStorage.getItem('user');\n    \n    // Check if user is authenticated\n    if (!token || !user) {\n        // Not logged in - redirect to login page\n        window.location.href = 'login.html';\n    } else {\n        // Logged in - navigate to target page\n        window.location.href = targetPage;\n    }\n}\n\n/**\n * Perform search and redirect to products page\n * @param {string} query - Search query from user\n */\nfunction performSearch(query) {\n    // Trim whitespace\n    query = query.trim();\n    \n    // Don't search if empty\n    if (!query) return;\n    \n    // Redirect to products page with search parameter\n    // If already on products page, just update the filter\n    if (window.location.pathname.includes('products.html')) {\n        // Already on products page - update search filter\n        if (window.products && window.products.updateSearch) {\n            window.products.updateSearch(query);\n        }\n    } else {\n        // Navigate to products page with search query\n        window.location.href = `products.html?search=${encodeURIComponent(query)}`;\n    }\n}\n","size_bytes":23824},"css/style.css":{"content":"/* =========================================\n   1. Fonts & Variables\n   ========================================= */\n@import url('https://fonts.googleapis.com/css2?family=Bungee&family=PT+Sans:wght@400;700&family=Poppins:wght@400;500;600;700;800&display=swap');\n\n:root {\n    /* Colors */\n    --background: #FFFFFF;\n    --foreground: hsl(240, 10%, 3.9%);\n    --muted: hsl(240, 3.8%, 46.1%);\n    --muted-foreground: hsl(240, 3.8%, 46.1%);\n    --border: hsl(240, 5.9%, 90%);\n    --input: hsl(240, 5.9%, 90%);\n    --primary: #000000;\n    --primary-foreground: #FFFFFF;\n    --secondary: hsl(240, 4.8%, 95.9%);\n    --secondary-foreground: hsl(240, 5.9%, 10%);\n    --accent: hsl(240, 4.8%, 95.9%);\n    --accent-foreground: hsl(240, 5.9%, 10%);\n    --destructive: #ef4444;\n    --destructive-foreground: #FFFFFF;\n    --ring: hsl(240, 5%, 64.9%);\n    --success: #16a34a;\n\n    /* Fonts */\n    --font-sans: 'PT Sans', sans-serif;\n    --font-heading: 'Poppins', sans-serif;\n    --font-logo: 'Bungee', cursive;\n\n    /* Radius */\n    --radius: 0.5rem;\n    --radius-lg: 0.75rem;\n    --radius-xl: 1rem;\n    --radius-full: 9999px;\n\n    /* Spacing */\n    --container-padding: 2rem;\n    --header-height: 64px;\n}\n\n/* =========================================\n   2. Reset & Base Styles\n   ========================================= */\n*,\n*::before,\n*::after {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    font-family: var(--font-sans);\n    background-color: var(--background);\n    color: var(--foreground);\n    line-height: 1.5;\n    -webkit-font-smoothing: antialiased;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    font-family: var(--font-heading);\n    line-height: 1.2;\n    margin-bottom: 1rem;\n}\n\na {\n    color: inherit;\n    text-decoration: none;\n    transition: color 0.2s ease;\n}\n\nul,\nol {\n    list-style: none;\n}\n\nimg {\n    max-width: 100%;\n    display: block;\n}\n\nbutton,\ninput,\nselect,\ntextarea {\n    font-family: inherit;\n    font-size: 1rem;\n}\n\n/* =========================================\n   3. Utility Classes\n   ========================================= */\n.container {\n    width: 100%;\n    max-width: 1280px;\n    margin: 0 auto;\n    padding-left: var(--container-padding);\n    padding-right: var(--container-padding);\n}\n\n.flex {\n    display: flex;\n}\n\n.flex-col {\n    flex-direction: column;\n}\n\n.flex-1 {\n    flex: 1;\n}\n\n.items-center {\n    align-items: center;\n}\n\n.justify-between {\n    justify-content: space-between;\n}\n\n.justify-center {\n    justify-content: center;\n}\n\n.gap-2 {\n    gap: 0.5rem;\n}\n\n.gap-4 {\n    gap: 1rem;\n}\n\n.gap-6 {\n    gap: 1.5rem;\n}\n\n.gap-8 {\n    gap: 2rem;\n}\n\n.grid {\n    display: grid;\n}\n\n.grid-cols-1 {\n    grid-template-columns: repeat(1, 1fr);\n}\n\n.grid-cols-2 {\n    grid-template-columns: repeat(2, 1fr);\n}\n\n.grid-cols-4 {\n    grid-template-columns: repeat(4, 1fr);\n}\n\n.grid-cols-5 {\n    grid-template-columns: repeat(5, 1fr);\n}\n\n.text-center {\n    text-align: center;\n}\n\n.font-bold {\n    font-weight: 700;\n}\n\n.font-semibold {\n    font-weight: 600;\n}\n\n.hidden {\n    display: none !important;\n}\n\n@media (min-width: 640px) {\n    .grid-cols-2 {\n        grid-template-columns: repeat(2, 1fr);\n    }\n}\n\n@media (min-width: 768px) {\n    .grid-cols-2 {\n        grid-template-columns: repeat(2, 1fr);\n    }\n\n    .grid-cols-4 {\n        grid-template-columns: repeat(4, 1fr);\n    }\n}\n\n@media (min-width: 1024px) {\n    .grid-cols-4 {\n        grid-template-columns: repeat(4, 1fr);\n    }\n\n    .grid-cols-5 {\n        grid-template-columns: repeat(5, 1fr);\n    }\n}\n\n/* Buttons */\n.btn {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0.75rem 1.5rem;\n    border-radius: var(--radius-full);\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    border: 1px solid transparent;\n}\n\n.btn-primary {\n    background-color: var(--primary);\n    color: var(--primary-foreground);\n}\n\n.btn-primary:hover {\n    opacity: 0.9;\n}\n\n.btn-outline {\n    background-color: transparent;\n    border-color: var(--border);\n    color: var(--foreground);\n}\n\n.btn-outline:hover {\n    background-color: var(--secondary);\n}\n\n.btn-ghost {\n    background-color: transparent;\n    color: var(--foreground);\n}\n\n.btn-ghost:hover {\n    background-color: var(--secondary);\n}\n\n.btn-icon {\n    padding: 0.125rem;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.btn-icon i[data-lucide] {\n    width: 0.5rem;\n    height: 0.5rem;\n}\n\n/* Navbar Icons - Messages, Saved Items, Profile */\n#logged-in-actions .nav-icon,\n.user-actions .nav-icon {\n    padding: 0 !important;\n    width: 20px !important;\n    height: 20px !important;\n    font-weight: normal !important;\n    display: flex !important;\n    align-items: center !important;\n    justify-content: center !important;\n}\n\n#logged-in-actions .nav-icon i[data-lucide],\n.user-actions .nav-icon i[data-lucide] {\n    width: 18px !important;\n    height: 18px !important;\n    flex-shrink: 0;\n    stroke-width: 1.5px;\n}\n\n/* Inputs */\n.input {\n    display: flex;\n    height: 2.5rem;\n    width: 100%;\n    border-radius: var(--radius);\n    border: 1px solid var(--input);\n    background-color: var(--background);\n    padding: 0.5rem 1rem;\n    font-size: 0.875rem;\n    transition: border-color 0.2s;\n}\n\n.input:focus {\n    outline: none;\n    border-color: var(--foreground);\n}\n\n.input-pill {\n    border-radius: var(--radius-full);\n}\n\ntextarea.input {\n    height: auto;\n    min-height: 100px;\n    resize: vertical;\n}\n\n/* =========================================\n   4. Header Styles\n   ========================================= */\n.site-header {\n    position: sticky;\n    top: 0;\n    z-index: 50;\n    width: 100%;\n    height: 56px;\n    background-color: var(--background);\n    border-bottom: 1px solid var(--border);\n    display: flex;\n    align-items: center;\n}\n\n.site-header .container {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.logo {\n    font-family: var(--font-logo);\n    font-size: 1.5rem;\n    color: var(--foreground);\n    letter-spacing: -0.02em;\n}\n\n.nav-links {\n    display: none;\n}\n\n.nav-link {\n    color: var(--muted);\n    font-weight: 500;\n    font-size: 0.95rem;\n    display: block;\n    width: 100%;\n}\n\n.nav-link:hover {\n    color: var(--foreground);\n}\n\n/* =========================================\n   DESKTOP SEARCH BAR (768px and up)\n   ========================================= */\n@media (min-width: 768px) {\n    .search-bar {\n        position: relative;\n        border: none;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        width: 100%;\n        margin: 0 2rem;\n        flex: 1;\n        max-width: 400px;\n    }\n\n    .search-icon {\n        position: absolute;\n        color: var(--muted);\n        width: 1.25rem;\n        height: 1.25rem;\n        cursor: pointer;\n        flex-shrink: 0;\n        left: 1rem;\n        top: 50%;\n        transform: translateY(-50%);\n        pointer-events: none;\n    }\n\n    .search-bar .input {\n        padding-left: 2.75rem;\n        display: block;\n        width: 100%;\n    }\n}\n\n/* =========================================\n   MOBILE SEARCH BAR (767px and below)\n   ========================================= */\n@media (max-width: 767px) {\n    .search-bar {\n        position: relative;\n        border: none;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n    }\n\n    .search-icon {\n        position: relative;\n        color: var(--muted);\n        width: 1.25rem;\n        height: 1.25rem;\n        cursor: pointer;\n        flex-shrink: 0;\n        pointer-events: auto;\n    }\n\n    .search-bar .input {\n        display: none;\n        width: 0;\n        transition: all 0.3s ease;\n    }\n\n    /* When expanded on mobile */\n    .search-bar.expanded {\n        position: absolute;\n        top: 0.75rem;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 85%;\n        max-width: 400px;\n    }\n\n    .search-bar.expanded .input {\n        display: block;\n        width: 100%;\n        flex: 1;\n        padding-left: 2.75rem;\n    }\n\n    .search-bar.expanded .search-icon {\n        position: absolute;\n        left: 1rem;\n        top: 50%;\n        transform: translateY(-50%);\n        pointer-events: none;\n        z-index: 1;\n    }\n}\n\n.user-actions {\n    display: none;\n    align-items: center;\n    gap: 1rem;\n}\n\n.user-actions .btn {\n    padding: 0.5rem 1rem;\n    font-size: 0.85rem;\n}\n\n.mobile-menu-btn {\n    display: block;\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: black;\n}\n\n.mobile-menu-btn i {\n    color: black;\n}\n\n.mobile-menu {\n    position: fixed;\n    top: var(--header-height);\n    left: 0;\n    width: 100%;\n    height: calc(100vh - var(--header-height));\n    background-color: var(--background);\n    padding: 2rem;\n    transform: translateX(100%);\n    transition: transform 0.3s ease-in-out;\n    z-index: 49;\n}\n\n.mobile-menu.open {\n    transform: translateX(0);\n}\n\n@media (min-width: 768px) {\n    .nav-links {\n        display: flex;\n        gap: 2rem;\n        margin-left: 2rem;\n    }\n\n    .user-actions {\n        display: flex;\n    }\n\n    .mobile-menu-btn {\n        display: none;\n    }\n\n    .mobile-menu {\n        display: none;\n    }\n}\n\n/* =========================================\n   Search Suggestions Dropdown\n   ========================================= */\n.search-bar {\n    position: relative;\n}\n\n.search-suggestions {\n    position: absolute;\n    top: calc(100% + 0.5rem);\n    left: 0;\n    right: 0;\n    background-color: var(--background);\n    border: 1px solid var(--border);\n    border-radius: var(--radius-lg);\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);\n    max-height: 300px;\n    overflow-y: auto;\n    z-index: 100;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateY(-10px);\n    transition: all 0.2s ease;\n}\n\n.search-suggestions.show {\n    opacity: 1;\n    visibility: visible;\n    transform: translateY(0);\n}\n\n.suggestion-item {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    padding: 0.75rem 1rem;\n    text-decoration: none;\n    color: var(--foreground);\n    transition: background-color 0.15s;\n}\n\n.suggestion-item:hover {\n    background-color: var(--secondary);\n}\n\n.suggestion-item:first-child {\n    border-radius: var(--radius-lg) var(--radius-lg) 0 0;\n}\n\n.suggestion-item:last-child {\n    border-radius: 0 0 var(--radius-lg) var(--radius-lg);\n}\n\n.suggestion-image {\n    width: 40px;\n    height: 40px;\n    border-radius: var(--radius);\n    object-fit: cover;\n    flex-shrink: 0;\n}\n\n.suggestion-info {\n    display: flex;\n    flex-direction: column;\n    gap: 0.125rem;\n    min-width: 0;\n}\n\n.suggestion-name {\n    font-size: 0.85rem;\n    font-weight: 500;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.suggestion-price {\n    font-size: 0.75rem;\n    color: var(--success);\n    font-weight: 600;\n}\n\n/* =========================================\n   Nav Dropdown Styles\n   ========================================= */\n.nav-dropdown {\n    position: relative;\n}\n\n.nav-dropdown-trigger {\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: var(--muted);\n    font-weight: 500;\n    font-size: 0.95rem;\n    padding: 0;\n    font-family: inherit;\n    transition: color 0.2s;\n}\n\n.nav-dropdown-trigger:hover {\n    color: var(--foreground);\n}\n\n.dropdown-icon {\n    width: 1rem;\n    height: 1rem;\n    transition: transform 0.2s ease;\n}\n\n/* Rotate icon when dropdown is open */\n.nav-dropdown.open .dropdown-icon {\n    transform: rotate(180deg);\n}\n\n/* Dropdown Menu */\n.dropdown-menu {\n    position: absolute;\n    top: calc(100% + 0.75rem);\n    left: 0;\n    min-width: 200px;\n    background-color: var(--background);\n    border: 1px solid var(--border);\n    border-radius: var(--radius-lg);\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);\n    padding: 0.5rem 0;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateY(-10px);\n    transition: all 0.2s ease;\n    z-index: 100;\n}\n\n/* Show dropdown when open */\n.nav-dropdown.open .dropdown-menu {\n    opacity: 1;\n    visibility: visible;\n    transform: translateY(0);\n}\n\n/* Dropdown Items */\n.dropdown-item {\n    display: block;\n    padding: 0.625rem 1rem;\n    color: var(--foreground);\n    font-size: 0.9rem;\n    transition: background-color 0.15s;\n}\n\n.dropdown-item:hover {\n    background-color: var(--secondary);\n}\n\n/* Separator */\n.dropdown-separator {\n    height: 1px;\n    background-color: var(--border);\n    margin: 0.5rem 0;\n}\n\n/* Category Label */\n.dropdown-label {\n    display: block;\n    padding: 0.5rem 1rem 0.25rem;\n    font-size: 0.75rem;\n    font-weight: 600;\n    color: var(--muted);\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n/* Profile Dropdown */\n.profile-dropdown {\n    position: relative;\n}\n\n.profile-dropdown-menu {\n    position: absolute;\n    top: calc(100% + 0.5rem);\n    right: 0;\n    min-width: 150px;\n    background-color: var(--background);\n    border: 1px solid var(--border);\n    border-radius: var(--radius-lg);\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);\n    padding: 0.5rem 0;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateY(-10px);\n    transition: all 0.2s ease;\n    z-index: 100;\n}\n\n.profile-dropdown.open .profile-dropdown-menu {\n    opacity: 1;\n    visibility: visible;\n    transform: translateY(0);\n}\n\n.profile-dropdown-menu .dropdown-item {\n    display: block;\n    padding: 0.625rem 1rem;\n    color: var(--foreground);\n    font-size: 0.9rem;\n    background: none;\n    border: none;\n    text-align: left;\n    width: 100%;\n    cursor: pointer;\n    transition: background-color 0.15s;\n}\n\n.profile-dropdown-menu .dropdown-item:hover {\n    background-color: var(--secondary);\n}\n\n.profile-dropdown-menu .logout-btn {\n    color: var(--destructive);\n}\n\n/* =========================================\n   5. Footer Styles\n   ========================================= */\n.site-footer {\n    background-color: var(--background);\n    border-top: 1px solid var(--border);\n    padding-top: 3rem;\n    padding-bottom: 2rem;\n    margin-top: auto;\n}\n\n.footer-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 2rem;\n    margin-bottom: 2rem;\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n@media (min-width: 768px) {\n    .footer-grid {\n        grid-template-columns: 2fr 1fr 1fr 1fr;\n        gap: 2rem;\n    }\n}\n\n.footer-brand {\n    grid-column: 1 / -1;\n}\n\n@media (min-width: 768px) {\n    .footer-brand {\n        grid-column: 1;\n    }\n}\n\n.footer-brand p {\n    color: var(--muted);\n    margin-top: 0.75rem;\n    max-width: 250px;\n    font-size: 0.85rem;\n    line-height: 1.5;\n}\n\n.footer-socials {\n    display: flex;\n    gap: 0.75rem;\n    margin-top: 1rem;\n}\n\n.social-btn {\n    width: 2rem;\n    height: 2rem;\n    border-radius: 50%;\n    background-color: var(--secondary);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--muted-foreground);\n    transition: all 0.2s;\n}\n\n.social-btn svg {\n    width: 1rem;\n    height: 1rem;\n}\n\n.social-btn:hover {\n    background-color: var(--foreground);\n    color: var(--background);\n}\n\n.footer-col h4 {\n    font-size: 0.9rem;\n    font-weight: 700;\n    margin-bottom: 1rem;\n}\n\n.footer-col ul {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.footer-col a {\n    color: var(--muted);\n    font-size: 0.8rem;\n}\n\n.footer-col a:hover {\n    color: var(--foreground);\n}\n\n.footer-bottom {\n    border-top: 1px solid var(--border);\n    padding-top: 1.5rem;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 1rem;\n    color: var(--muted);\n    font-size: 0.75rem;\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n@media (min-width: 768px) {\n    .footer-bottom {\n        flex-direction: row;\n        justify-content: space-between;\n    }\n}\n\n.payment-icons {\n    display: flex;\n    gap: 0.75rem;\n    opacity: 0.6;\n    font-size: 0.7rem;\n}\n\n/* =========================================\n   Back Button\n   ========================================= */\n.btn-back {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.25rem;\n    padding: 0.5rem 0.75rem;\n    margin-bottom: 1.5rem;\n    background: none;\n    border: none;\n    border-radius: var(--radius);\n    color: var(--muted);\n    font-family: inherit;\n    font-size: 0.9rem;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s ease;\n}\n\n.btn-back:hover {\n    background-color: var(--secondary);\n    color: var(--foreground);\n}\n\n.btn-back svg {\n    width: 1.25rem;\n    height: 1.25rem;\n}\n\n/* Back button on auth pages - positioned top left */\n.btn-back-auth {\n    position: absolute;\n    top: 2rem;\n    left: 2rem;\n    margin-bottom: 0;\n}\n\n/* =========================================\n   6. Hero Section\n   ========================================= */\n.hero {\n    position: relative;\n    height: 100vh;\n    min-height: 600px;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    background-image: url('../img/hero1.jpg');\n    background-size: cover;\n    background-position: center;\n}\n\n.hero-overlay {\n    position: absolute;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(4px);\n    z-index: 1;\n}\n\n.hero-content {\n    position: relative;\n    z-index: 2;\n    text-align: center;\n    color: #FFFFFF;\n    max-width: 800px;\n    padding: 0 1rem;\n}\n\n.hero-title {\n    font-family: var(--font-heading);\n    font-size: 2.3rem;\n    font-weight: 800;\n    margin-bottom: 1rem;\n    line-height: 1.1;\n}\n\n.hero-subtitle {\n    font-size: 1.1rem;\n    opacity: 0.9;\n    margin-bottom: 3rem;\n}\n\n@media (min-width: 768px) {\n    .hero-title {\n        font-size: 4.5rem;\n    }\n\n    .hero-subtitle {\n        font-size: 1.25rem;\n    }\n}\n\n.hero-stats {\n    display: flex;\n    justify-content: center;\n    gap: 2rem;\n    margin-bottom: 3rem;\n}\n\n.stat-item {\n    text-align: center;\n}\n\n.stat-number {\n    display: block;\n    font-family: var(--font-heading);\n    font-size: 1.5rem;\n    font-weight: 700;\n}\n\n.stat-label {\n    font-size: 0.875rem;\n    opacity: 0.8;\n}\n\n.btn-hero {\n    background-color: #FFFFFF;\n    color: #000000;\n    padding: 1rem 2.5rem;\n    font-size: 1.1rem;\n    border-radius: var(--radius-full);\n    font-weight: 700;\n    transition: transform 0.2s;\n}\n\n.btn-hero:hover {\n    transform: scale(1.05);\n}\n\n/* =========================================\n   7. Top Selling Section\n   ========================================= */\n.section-padding {\n    padding: 4rem 0;\n}\n\n.section-title {\n    font-family: var(--font-heading);\n    font-size: 2.25rem;\n    font-weight: 800;\n    text-align: center;\n    margin-bottom: 3rem;\n    text-transform: uppercase;\n    letter-spacing: -0.02em;\n}\n\n/* Mobile: 2x2 grid */\n.product-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1rem;\n    margin-bottom: 2rem;\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n/* Desktop: 4 columns */\n@media (min-width: 768px) {\n    .product-grid {\n        grid-template-columns: repeat(4, 1fr);\n        gap: 1.25rem;\n    }\n}\n\n.product-card {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.product-image-container {\n    position: relative;\n    aspect-ratio: 1;\n    background-color: var(--secondary);\n    border-radius: var(--radius-lg);\n    overflow: hidden;\n}\n\n.product-image {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.3s ease;\n}\n\n.product-card:hover .product-image {\n    transform: scale(1.05);\n}\n\n.product-save-btn {\n    position: absolute;\n    top: 0.5rem;\n    right: 0.5rem;\n    background-color: white;\n    border-radius: 50%;\n    padding: 0.35rem;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    cursor: pointer;\n    transition: transform 0.2s;\n    border: none;\n}\n\n.product-save-btn:hover {\n    transform: scale(1.1);\n}\n\n.product-save-btn svg {\n    width: 1rem;\n    height: 1rem;\n}\n\n.product-info {\n    display: flex;\n    flex-direction: column;\n    gap: 0.125rem;\n}\n\n.product-name {\n    font-weight: 600;\n    font-size: 0.875rem;\n    font-family: var(--font-heading);\n    line-height: 1.3;\n}\n\n.product-price {\n    color: var(--success);\n    font-weight: 700;\n    font-size: 0.875rem;\n}\n\n.product-stats {\n    display: flex;\n    gap: 0.5rem;\n    margin-top: 0.125rem;\n}\n\n.stat {\n    display: flex;\n    align-items: center;\n    gap: 0.2rem;\n    font-size: 0.7rem;\n    color: var(--muted);\n}\n\n.view-all-container {\n    display: flex;\n    justify-content: center;\n    margin-top: 1.5rem;\n}\n\n.btn-pill {\n    border-radius: var(--radius-full);\n    padding-left: 2rem;\n    padding-right: 2rem;\n}\n\n/* =========================================\n   8. Categories Section\n   ========================================= */\n.bg-secondary {\n    background-color: var(--secondary);\n}\n\n/* Mobile: 2x2 grid */\n.category-grid {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr 1fr;\n    gap: 0.75rem;\n    height: 280px;\n}\n\n/* Desktop: 3-column bento grid */\n@media (min-width: 768px) {\n    .category-grid {\n        grid-template-columns: 1fr 1.5fr 1fr;\n        grid-template-rows: 1fr 1fr;\n        gap: 1rem;\n        height: 260px;\n        max-width: 800px;\n        margin: 0 auto;\n    }\n}\n\n.category-card {\n    position: relative;\n    border-radius: var(--radius-lg);\n    overflow: hidden;\n    display: block;\n    height: 100%;\n}\n\n@media (min-width: 768px) {\n    .category-card:nth-child(1) {\n        grid-column: 1;\n        grid-row: 1 / 3;\n    }\n\n    .category-card:nth-child(2) {\n        grid-column: 2;\n        grid-row: 1;\n    }\n\n    .category-card:nth-child(3) {\n        grid-column: 3;\n        grid-row: 1 / 3;\n    }\n\n    .category-card:nth-child(4) {\n        grid-column: 2;\n        grid-row: 2;\n    }\n}\n\n.category-card img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.5s ease;\n}\n\n.category-card:hover img {\n    transform: scale(1.1);\n}\n\n.category-overlay {\n    position: absolute;\n    inset: 0;\n    background: linear-gradient(135deg,\n            rgba(0, 0, 0, 0.35) 0%,\n            rgba(0, 0, 0, 0.1) 60%,\n            rgba(0, 0, 0, 0) 100%);\n    transition: background 0.3s;\n    z-index: 1;\n}\n\n.category-card:hover .category-overlay {\n    background: linear-gradient(135deg,\n            rgba(0, 0, 0, 0.25) 0%,\n            rgba(0, 0, 0, 0.05) 60%,\n            rgba(0, 0, 0, 0) 100%);\n}\n\n.category-name {\n    position: absolute;\n    top: 1rem;\n    left: 1rem;\n    color: white;\n    font-family: var(--font-heading);\n    font-size: 1rem;\n    font-weight: 700;\n    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.4);\n    z-index: 2;\n}\n\n\n\n/* =========================================\n   9. Newsletter Section\n   ========================================= */\n.newsletter-card {\n    background-color: #000000;\n    border-radius: 1.5rem;\n    padding: 3rem 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n    align-items: center;\n    text-align: center;\n}\n\n@media (min-width: 1024px) {\n    .newsletter-card {\n        flex-direction: row;\n        justify-content: space-between;\n        text-align: left;\n        padding: 4rem;\n    }\n}\n\n.newsletter-title {\n    font-family: var(--font-heading);\n    font-size: 1.5rem;\n    font-weight: 800;\n    color: #FFFFFF;\n    max-width: 400px;\n    line-height: 1.2;\n}\n\n.newsletter-form-container {\n    width: 100%;\n    max-width: 500px;\n}\n\n.newsletter-form {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.email-input-wrapper {\n    position: relative;\n    width: 100%;\n}\n\n.email-icon {\n    position: absolute;\n    left: 1rem;\n    top: 50%;\n    transform: translateY(-50%);\n    color: #000000;\n    width: 1.25rem;\n    height: 1.25rem;\n}\n\n.newsletter-input {\n    width: 100%;\n    height: 3.5rem;\n    padding-left: 3rem;\n    padding-right: 1rem;\n    border-radius: var(--radius-full);\n    border: none;\n    background-color: #FFFFFF;\n    color: #000000;\n    font-family: var(--font-sans);\n}\n\n.newsletter-input:focus {\n    outline: 2px solid var(--accent);\n}\n\n.btn-subscribe {\n    width: 100%;\n    height: 3.5rem;\n    border-radius: var(--radius-full);\n    background-color: #FFFFFF;\n    color: #000000;\n    font-weight: 700;\n    border: none;\n    cursor: pointer;\n    transition: opacity 0.2s;\n}\n\n.btn-subscribe:hover {\n    opacity: 0.9;\n}\n\n/* =========================================\n   10. Product Detail Styles\n   ========================================= */\n.product-detail-layout {\n    display: grid;\n    grid-template-columns: 1fr;\n    gap: 2rem;\n    padding-top: 2rem;\n    padding-bottom: 3rem;\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n@media (min-width: 768px) {\n    .product-detail-layout {\n        grid-template-columns: 1fr 1fr;\n        gap: 2rem;\n    }\n}\n\n.gallery-container {\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n}\n\n.main-image {\n    width: 100%;\n    aspect-ratio: 1;\n    border-radius: var(--radius-lg);\n    overflow: hidden;\n    background-color: var(--secondary);\n}\n\n.main-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.gallery-thumbnails {\n    display: flex;\n    gap: 0.5rem;\n    overflow-x: auto;\n    padding-bottom: 0.25rem;\n}\n\n.thumbnail {\n    width: 50px;\n    height: 50px;\n    border-radius: var(--radius);\n    overflow: hidden;\n    cursor: pointer;\n    border: 2px solid transparent;\n    flex-shrink: 0;\n}\n\n.thumbnail.active {\n    border-color: var(--foreground);\n}\n\n.thumbnail img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.product-detail-info {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.detail-category {\n    font-size: 0.75rem;\n    color: var(--muted);\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n.detail-title {\n    font-size: 1.5rem;\n    font-weight: 700;\n    line-height: 1.2;\n    margin-bottom: 0;\n}\n\n.detail-price {\n    font-size: 1.25rem;\n    font-weight: 700;\n    color: var(--success);\n}\n\n.seller-card {\n    display: flex;\n    align-items: center;\n    gap: 0.75rem;\n    padding: 1rem;\n    border: 1px solid var(--border);\n    border-radius: var(--radius-lg);\n    margin: 0.5rem 0;\n}\n\n.seller-avatar {\n    width: 2.5rem;\n    height: 2.5rem;\n    border-radius: 50%;\n    background-color: var(--secondary);\n    overflow: hidden;\n    flex-shrink: 0;\n}\n\n.seller-avatar img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.seller-info h4 {\n    margin-bottom: 0.125rem;\n    font-size: 0.875rem;\n}\n\n.seller-rating {\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n    font-size: 0.75rem;\n    color: var(--muted);\n}\n\n.detail-description h3 {\n    font-size: 1rem;\n    margin-bottom: 0.5rem;\n}\n\n.detail-description p {\n    color: var(--muted-foreground);\n    line-height: 1.6;\n    font-size: 0.875rem;\n}\n\n.detail-actions {\n    display: flex;\n    gap: 0.75rem;\n    margin-top: 0.5rem;\n}\n\n.detail-actions .btn {\n    font-size: 0.875rem;\n    padding: 0.625rem 1rem;\n}\n\n/* Comments Section */\n.comments-section {\n    margin-top: 2rem;\n    padding-top: 2rem;\n    border-top: 1px solid var(--border);\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n    padding-bottom: 2rem;\n}\n\n.comments-section h3 {\n    font-size: 1.125rem;\n    font-weight: 700;\n}\n\n.comment-list {\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n    margin-top: 1.25rem;\n}\n\n.comment-item {\n    display: flex;\n    gap: 0.75rem;\n}\n\n.comment-avatar {\n    width: 2rem;\n    height: 2rem;\n    border-radius: 50%;\n    background-color: var(--secondary);\n    overflow: hidden;\n    flex-shrink: 0;\n}\n\n.comment-avatar img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.comment-content {\n    flex: 1;\n}\n\n.comment-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 0.25rem;\n}\n\n.comment-author {\n    font-weight: 600;\n    font-size: 0.875rem;\n}\n\n.comment-date {\n    font-size: 0.75rem;\n    color: var(--muted);\n}\n\n.comment-text {\n    color: var(--muted-foreground);\n    font-size: 0.875rem;\n    line-height: 1.5;\n}\n\n.comment-form {\n    margin-top: 1.5rem;\n    position: relative;\n}\n\n.comment-input {\n    width: 100%;\n    min-height: 80px;\n    padding: 0.75rem;\n    border-radius: var(--radius-lg);\n    gap: 1.5rem;\n    padding: 2rem 0;\n    border-bottom: 1px solid var(--border);\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.profile-header {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    padding: 2rem 0;\n    margin-bottom: 2rem;\n}\n\n@media (min-width: 768px) {\n    .profile-header {\n        flex-direction: column;\n        align-items: center;\n        padding: 3rem 0;\n        margin-bottom: 3rem;\n    }\n}\n\n.profile-avatar {\n    width: 120px;\n    height: 120px;\n    border-radius: 50%;\n    background-color: var(--secondary);\n    overflow: hidden;\n    flex-shrink: 0;\n    margin-bottom: 1.5rem;\n}\n\n@media (min-width: 768px) {\n    .profile-avatar {\n        width: 160px;\n        height: 160px;\n        margin-bottom: 2rem;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    }\n}\n\n.profile-avatar img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.profile-info {\n    flex: 1;\n    width: 100%;\n}\n\n.profile-username {\n    font-size: 1.75rem;\n    font-weight: 800;\n    margin-bottom: 0.5rem;\n}\n\n@media (min-width: 768px) {\n    .profile-username {\n        font-size: 2.25rem;\n        margin-bottom: 0.75rem;\n    }\n}\n\n.profile-stats {\n    display: flex;\n    gap: 2rem;\n    margin: 1.5rem 0;\n    justify-content: center;\n}\n\n@media (min-width: 768px) {\n    .profile-stats {\n        gap: 3rem;\n        margin: 2rem 0;\n    }\n}\n\n.profile-stat {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.profile-stat-number {\n    font-size: 1.5rem;\n    font-weight: 700;\n}\n\n@media (min-width: 768px) {\n    .profile-stat-number {\n        font-size: 2rem;\n    }\n}\n\n.profile-stat-label {\n    font-size: 0.75rem;\n    color: var(--muted);\n    margin-top: 0.25rem;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n.profile-tabs {\n    display: flex;\n    gap: 0.25rem;\n    margin-top: 2rem;\n    border-bottom: 1px solid var(--border);\n    justify-content: center;\n}\n\n@media (min-width: 768px) {\n    .profile-tabs {\n        margin-top: 2.5rem;\n    }\n}\n\n.profile-tab {\n    padding: 0.75rem 1.5rem;\n    cursor: pointer;\n    border: none;\n    background: none;\n    font-weight: 600;\n    font-size: 0.875rem;\n    color: var(--muted);\n    border-bottom: 2px solid transparent;\n    transition: all 0.2s;\n}\n\n@media (min-width: 768px) {\n    .profile-tab {\n        padding: 1rem 2rem;\n        font-size: 1rem;\n    }\n}\n\n.profile-tab.active {\n    color: var(--foreground);\n    border-bottom-color: var(--foreground);\n}\n\n.profile-tab-content {\n    padding: 2rem 0;\n    max-width: 1000px;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n@media (min-width: 768px) {\n    .profile-tab-content {\n        padding: 3rem 0;\n    }\n}\n\n.profile-tab-content h2 {\n    font-size: 1.125rem;\n}\n\n.profile-tab-content .btn {\n    font-size: 0.875rem;\n    padding: 0.5rem 1rem;\n}\n\n/* =========================================\n   14. Sell/Edit Form Styles\n   ========================================= */\n.form-card {\n    background-color: var(--background);\n    border: 1px solid var(--border);\n    border-radius: var(--radius-lg);\n    padding: 1.5rem;\n    margin-top: 1.5rem;\n    max-width: 800px;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.image-uploader {\n    border: 2px dashed var(--border);\n    border-radius: var(--radius-lg);\n    padding: 2rem;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.image-uploader:hover {\n    border-color: var(--foreground);\n    background-color: var(--secondary);\n}\n\n.image-preview-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));\n    gap: 0.75rem;\n    margin-top: 0.75rem;\n}\n\n.image-preview-item {\n    position: relative;\n    aspect-ratio: 1;\n    border-radius: var(--radius);\n    overflow: hidden;\n    background-color: var(--secondary);\n}\n\n.image-preview-item img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.image-preview-remove {\n    position: absolute;\n    top: 0.25rem;\n    right: 0.25rem;\n    background-color: var(--destructive);\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 1.25rem;\n    height: 1.25rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    font-size: 0.75rem;\n}\n\n.form-actions {\n    display: flex;\n    justify-content: flex-end;\n    gap: 0.75rem;\n    margin-top: 1.5rem;\n}\n\n/* =========================================\n   15. Empty State\n   ========================================= */\n.empty-state {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 4rem 2rem;\n    text-align: center;\n}\n\n.empty-state-icon {\n    width: 60px;\n    height: 60px;\n    color: var(--muted);\n    margin-bottom: 1rem;\n}\n\n.empty-state-title {\n    font-size: 1.25rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.empty-state-description {\n    color: var(--muted);\n    max-width: 400px;\n    margin-bottom: 2rem;\n}\n\n/* =========================================\n   16. About Page Styles\n   ========================================= */\n.about-hero {\n    position: relative;\n    height: 50vh;\n    min-height: 400px;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    background-image: url('../img/hero.jpeg');\n    background-size: cover;\n    background-position: center;\n}\n\n.about-hero-overlay {\n    position: absolute;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 1;\n}\n\n.about-hero-content {\n    position: relative;\n    z-index: 2;\n    text-align: center;\n    color: #FFFFFF;\n    max-width: 800px;\n    padding: 0 1rem;\n}\n\n.about-hero-title {\n    font-family: var(--font-heading);\n    font-size: 2rem;\n    font-weight: 800;\n    margin-bottom: 1rem;\n    line-height: 1.1;\n}\n\n.about-hero-subtitle {\n    font-size: 1rem;\n    opacity: 0.9;\n}\n\n@media (min-width: 768px) {\n    .about-hero-title {\n        font-size: 3rem;\n    }\n\n    .about-hero-subtitle {\n        font-size: 1.125rem;\n    }\n}\n\n.story-content {\n    max-width: 800px;\n    margin: 0 auto;\n    text-align: center;\n}\n\n.story-content p {\n    color: var(--muted-foreground);\n    line-height: 1.7;\n    margin-bottom: 1.5rem;\n}\n\n.story-content p:last-child {\n    margin-bottom: 0;\n}\n\n.contact-section {\n    position: relative;\n    background-image: url('https://images.unsplash.com/photo-1541339907198-e08756dedf3f?q=80&w=2070&auto=format&fit=crop');\n    background-size: cover;\n    background-position: center;\n    background-attachment: fixed;\n}\n\n.contact-section::before {\n    content: '';\n    position: absolute;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 1;\n}\n\n.contact-section .container {\n    position: relative;\n    z-index: 2;\n}\n\n.contact-card {\n    max-width: 600px;\n    margin: 0 auto;\n    background-color: rgba(255, 255, 255, 0.95);\n    backdrop-filter: blur(10px);\n    padding: 2.5rem;\n    border-radius: var(--radius-lg);\n    border: 1px solid var(--border);\n}\n\n.contact-header {\n    text-align: center;\n    margin-bottom: 2rem;\n}\n\n.contact-title {\n    font-family: var(--font-heading);\n    font-size: 1.75rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.contact-subtitle {\n    color: var(--muted);\n    font-size: 0.95rem;\n}\n\n.contact-form {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n}\n\n.input-with-icon {\n    position: relative;\n}\n\n.input-icon {\n    position: absolute;\n    left: 1rem;\n    top: 0.75rem;\n    color: var(--muted);\n    width: 1.25rem;\n    height: 1.25rem;\n}\n\n.input-with-padding {\n    padding-left: 3rem;\n}\n\n.image-preview-remove {\n    position: absolute;\n    top: 0.25rem;\n    right: 0.25rem;\n    background-color: var(--destructive);\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 1.25rem;\n    height: 1.25rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    font-size: 0.75rem;\n}\n\n.form-actions {\n    display: flex;\n    justify-content: flex-end;\n    gap: 0.75rem;\n    margin-top: 1.5rem;\n}\n\n/* =========================================\n   15. Empty State\n   ========================================= */\n.empty-state {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 4rem 2rem;\n    text-align: center;\n}\n\n.empty-state-icon {\n    width: 60px;\n    height: 60px;\n    color: var(--muted);\n    margin-bottom: 1rem;\n}\n\n.empty-state-title {\n    font-size: 1.25rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.empty-state-description {\n    color: var(--muted);\n    max-width: 400px;\n    margin-bottom: 2rem;\n}\n\n/* =========================================\n   16. About Page Styles\n   ========================================= */\n.about-hero {\n    position: relative;\n    height: 50vh;\n    min-height: 400px;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    overflow: hidden;\n    background-image: url('../img/hero.jpeg');\n    background-size: cover;\n    background-position: center;\n}\n\n.about-hero-overlay {\n    position: absolute;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 1;\n}\n\n.about-hero-content {\n    position: relative;\n    z-index: 2;\n    text-align: center;\n    color: #FFFFFF;\n    max-width: 800px;\n    padding: 0 1rem;\n}\n\n.about-hero-title {\n    font-family: var(--font-heading);\n    font-size: 2rem;\n    font-weight: 800;\n    margin-bottom: 1rem;\n    line-height: 1.1;\n}\n\n.about-hero-subtitle {\n    font-size: 1rem;\n    opacity: 0.9;\n}\n\n@media (min-width: 768px) {\n    .about-hero-title {\n        font-size: 3rem;\n    }\n\n    .about-hero-subtitle {\n        font-size: 1.125rem;\n    }\n}\n\n.story-content {\n    max-width: 800px;\n    margin: 0 auto;\n    text-align: center;\n}\n\n.story-content p {\n    color: var(--muted-foreground);\n    line-height: 1.7;\n    margin-bottom: 1.5rem;\n}\n\n.story-content p:last-child {\n    margin-bottom: 0;\n}\n\n.contact-section {\n    position: relative;\n    background-image: url('https://images.unsplash.com/photo-1541339907198-e08756dedf3f?q=80&w=2070&auto=format&fit=crop');\n    background-size: cover;\n    background-position: center;\n    background-attachment: fixed;\n}\n\n.contact-section::before {\n    content: '';\n    position: absolute;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 1;\n}\n\n.contact-section .container {\n    position: relative;\n    z-index: 2;\n}\n\n.contact-card {\n    max-width: 600px;\n    margin: 0 auto;\n    background-color: rgba(255, 255, 255, 0.95);\n    backdrop-filter: blur(10px);\n    padding: 2.5rem;\n    border-radius: var(--radius-lg);\n    border: 1px solid var(--border);\n}\n\n.contact-header {\n    text-align: center;\n    margin-bottom: 2rem;\n}\n\n.contact-title {\n    font-family: var(--font-heading);\n    font-size: 1.75rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.contact-subtitle {\n    color: var(--muted);\n    font-size: 0.95rem;\n}\n\n.contact-form {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n}\n\n.input-with-icon {\n    position: relative;\n}\n\n.input-icon {\n    position: absolute;\n    left: 1rem;\n    top: 0.75rem;\n    color: var(--muted);\n    width: 1.25rem;\n    height: 1.25rem;\n}\n\n.input-with-padding {\n    padding-left: 3rem;\n}\n\ntextarea.input-with-padding {\n    padding-top: 0.75rem;\n}\n\n.btn-full {\n    width: 100%;\n}\n\n/* =========================================\n   12. Auth Pages (Appended)\n   ========================================= */\n.auth-layout {\n    min-height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem;\n    background-color: var(--secondary);\n}\n\n.auth-card {\n    width: 100%;\n    max-width: 400px;\n    background-color: var(--background);\n    border-radius: var(--radius-lg);\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n    padding: 2.5rem;\n    border: 1px solid var(--border);\n}\n\n.auth-header {\n    text-align: center;\n    margin-bottom: 2rem;\n}\n\n.auth-logo {\n    font-family: var(--font-logo);\n    font-size: 1.5rem;\n    color: var(--foreground);\n    text-decoration: none;\n    display: inline-block;\n    margin-bottom: 1rem;\n}\n\n.auth-title {\n    font-size: 1.5rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.auth-subtitle {\n    color: var(--muted);\n    font-size: 0.875rem;\n    line-height: 1.5;\n}\n\n.auth-form {\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n}\n\n.form-group {\n    display: flex;\n    flex-direction: column;\n    gap: 0.375rem;\n}\n\n.form-label {\n    font-size: 0.875rem;\n    font-weight: 500;\n}\n\n.auth-footer {\n    margin-top: 2rem;\n    margin-bottom: 1rem;\n    line-height: 1.1;\n}\n\n.about-hero-subtitle {\n    font-size: 1rem;\n    opacity: 0.9;\n}\n\n@media (min-width: 768px) {\n    .about-hero-title {\n        font-size: 3rem;\n    }\n\n    .about-hero-subtitle {\n        font-size: 1.125rem;\n    }\n}\n\n.story-content {\n    max-width: 800px;\n    margin: 0 auto;\n    text-align: center;\n}\n\n.story-content p {\n    color: var(--muted-foreground);\n    line-height: 1.7;\n    margin-bottom: 1.5rem;\n}\n\n.story-content p:last-child {\n    margin-bottom: 0;\n}\n\n.contact-section {\n    position: relative;\n    background-image: url('https://images.unsplash.com/photo-1541339907198-e08756dedf3f?q=80&w=2070&auto=format&fit=crop');\n    background-size: cover;\n    background-position: center;\n    background-attachment: fixed;\n}\n\n.contact-section::before {\n    content: '';\n    position: absolute;\n    inset: 0;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 1;\n}\n\n.contact-section .container {\n    position: relative;\n    z-index: 2;\n}\n\n.contact-card {\n    max-width: 600px;\n    margin: 0 auto;\n    background-color: rgba(255, 255, 255, 0.95);\n    backdrop-filter: blur(10px);\n    padding: 2.5rem;\n    border-radius: var(--radius-lg);\n    border: 1px solid var(--border);\n}\n\n.contact-header {\n    text-align: center;\n    margin-bottom: 2rem;\n}\n\n.contact-title {\n    font-family: var(--font-heading);\n    font-size: 1.75rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.contact-subtitle {\n    color: var(--muted);\n    font-size: 0.95rem;\n}\n\n.contact-form {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n}\n\n.input-with-icon {\n    position: relative;\n}\n\n.input-icon {\n    position: absolute;\n    left: 1rem;\n    top: 0.75rem;\n    color: var(--muted);\n    width: 1.25rem;\n    height: 1.25rem;\n}\n\n.input-with-padding {\n    padding-left: 3rem;\n}\n\ntextarea.input-with-padding {\n    padding-top: 0.75rem;\n}\n\n.btn-full {\n    width: 100%;\n}\n\n/* =========================================\n   12. Auth Pages (Appended)\n   ========================================= */\n.auth-layout {\n    min-height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem;\n    background-color: var(--secondary);\n}\n\n.auth-card {\n    width: 100%;\n    max-width: 400px;\n    background-color: var(--background);\n    border-radius: var(--radius-lg);\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n    padding: 2.5rem;\n    border: 1px solid var(--border);\n}\n\n.auth-header {\n    text-align: center;\n    margin-bottom: 2rem;\n}\n\n.auth-logo {\n    font-family: var(--font-logo);\n    font-size: 1.5rem;\n    color: var(--foreground);\n    text-decoration: none;\n    display: inline-block;\n    margin-bottom: 1rem;\n}\n\n.auth-title {\n    font-size: 1.5rem;\n    font-weight: 700;\n    margin-bottom: 0.5rem;\n}\n\n.auth-subtitle {\n    color: var(--muted);\n    font-size: 0.875rem;\n    line-height: 1.5;\n}\n\n.auth-form {\n    display: flex;\n    flex-direction: column;\n    gap: 1.25rem;\n}\n\n.form-group {\n    display: flex;\n    flex-direction: column;\n    gap: 0.375rem;\n}\n\n.form-label {\n    font-size: 0.875rem;\n    font-weight: 500;\n}\n\n.auth-footer {\n    margin-top: 2rem;\n    text-align: center;\n    font-size: 0.875rem;\n    color: var(--muted);\n}\n\n.auth-footer a {\n    color: var(--foreground);\n    font-weight: 600;\n}\n\n.auth-footer a:hover {\n    text-decoration: underline;\n}\n\n/* =========================================\n   17. University Selection Styles\n   ========================================= */\n.uni-grid {\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 1.5rem;\n    margin-top: 2rem;\n}\n\n.uni-card {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 1.5rem;\n    border: 1px solid var(--border);\n    border-radius: var(--radius-lg);\n    text-decoration: none;\n    color: var(--foreground);\n    transition: all 0.2s ease;\n    background-color: var(--background);\n    gap: 1rem;\n    text-align: center;\n}\n\n.uni-card:hover {\n    border-color: var(--foreground);\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.uni-logo {\n    width: 60px;\n    height: 60px;\n    object-fit: contain;\n    border-radius: 50%;\n    background-color: white;\n    padding: 0.25rem;\n}\n\n.uni-name {\n    font-weight: 600;\n    font-size: 0.9rem;\n    line-height: 1.3;\n\n}\n\n.uni-card {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    padding: 1.5rem;\n    border: 1px solid var(--border);\n    border-radius: var(--radius-lg);\n    text-decoration: none;\n    color: var(--foreground);\n    transition: all 0.2s ease;\n    background-color: var(--background);\n    gap: 1rem;\n    text-align: center;\n}\n\n.uni-card:hover {\n    border-color: var(--foreground);\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.uni-logo {\n    width: 60px;\n    height: 60px;\n    object-fit: contain;\n    border-radius: 50%;\n    background-color: white;\n    padding: 0.25rem;\n}\n\n.uni-name {\n    font-weight: 600;\n    font-size: 0.9rem;\n    line-height: 1.3;\n}\n/* =========================================\n   Password Toggle Styles\n   ========================================= */\n.password-toggle {\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: none;\n    border: none;\n    cursor: pointer;\n    padding: 4px 8px;\n    color: var(--muted);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: color 0.2s;\n    z-index: 10;\n}\n\n.password-toggle:hover {\n    color: var(--foreground);\n}\n\n.password-toggle:active {\n    color: var(--primary);\n}\n\n/* =========================================\n   Status Indicator Styles\n   ========================================= */\n.status-indicator {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 50px;\n    margin-top: 1rem;\n}\n\n.status-indicator.hidden {\n    display: none;\n}\n\n.status-icon {\n    width: 2.5rem;\n    height: 2.5rem;\n    color: var(--primary);\n}\n\n.status-icon.loading {\n    animation: spin 1s linear infinite;\n    color: var(--primary);\n}\n\n.status-icon.success {\n    animation: none;\n    color: var(--success);\n}\n\n.status-icon.error {\n    animation: none;\n    color: var(--destructive);\n}\n\n@keyframes spin {\n    from {\n        transform: rotate(0deg);\n    }\n    to {\n        transform: rotate(360deg);\n    }\n}\n\n/* =============================================================================\n   NOTIFICATION BADGE - Unread Messages Indicator\n   ============================================================================= */\n\n.notification-badge {\n    position: absolute;\n    top: -8px;\n    right: -8px;\n    background-color: #ef4444;\n    color: white;\n    border-radius: 50%;\n    width: 24px;\n    height: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.75rem;\n    font-weight: 700;\n    border: 2px solid var(--background);\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n    animation: pulse 2s infinite;\n}\n\n.notification-badge.hidden {\n    display: none;\n}\n\n@keyframes pulse {\n    0%, 100% {\n        box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);\n    }\n    50% {\n        box-shadow: 0 2px 8px rgba(239, 68, 68, 0.6);\n    }\n}\n\n/* Position badge relative to nav-icon */\n#logged-in-actions .btn-icon {\n    position: relative;\n}\n\n/* Notification animations */\n@keyframes slideIn {\n    from {\n        transform: translateX(400px);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n@keyframes slideOut {\n    from {\n        transform: translateX(0);\n        opacity: 1;\n    }\n    to {\n        transform: translateX(400px);\n        opacity: 0;\n    }\n}\n","size_bytes":48540},"backend/database.py":{"content":"\"\"\"\nDATABASE SETUP AND CONNECTION MODULE\n=====================================\nThis file handles all database connection and initialization logic.\nIt's the central place where the database connection is configured.\n\nWHAT HAPPENS HERE:\n1. Creates a database engine (either SQLite or PostgreSQL based on DATABASE_URL)\n2. Sets up session management for database operations\n3. Creates all database tables on startup\n4. Seeds the database with initial data (universities and categories)\n\"\"\"\n\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.ext.declarative import declarative_base\nfrom sqlalchemy.orm import sessionmaker\nimport os\n\n# =============================================================================\n# DATABASE URL CONFIGURATION\n# =============================================================================\n# This reads the DATABASE_URL from environment variables\n# If not set, defaults to SQLite (unimarket.db file in project root)\n# \n# Examples:\n# - SQLite: \"sqlite:///./unimarket.db\"\n# - PostgreSQL: \"postgresql://user:password@localhost/unimarket\"\nDATABASE_URL = os.getenv(\"DATABASE_URL\", \"sqlite:///./unimarket.db\")\n\n# =============================================================================\n# CREATE DATABASE ENGINE\n# =============================================================================\n# The engine is what actually manages the connection to the database\n# \n# Parameters explained:\n# - DATABASE_URL: Connection string (tells it which database to use)\n# - connect_args: Additional settings for the driver\n#   * check_same_thread=False: SQLite specific - allows multiple threads to access DB\n#   * This is only used for SQLite, not PostgreSQL\nengine = create_engine(\n    DATABASE_URL,\n    connect_args={\"check_same_thread\": False} if \"sqlite\" in DATABASE_URL else {}\n)\n\n# =============================================================================\n# SESSION FACTORY\n# =============================================================================\n# SessionLocal is a factory that creates new database sessions\n# Each request gets its own session to avoid conflicts\n# \n# Parameters:\n# - autocommit=False: Don't auto-save changes (we explicitly call commit)\n# - autoflush=False: Don't auto-flush pending changes (we control when changes are sent to DB)\n# - bind=engine: Connect this session factory to our database engine\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n\n# =============================================================================\n# BASE CLASS FOR ALL MODELS\n# =============================================================================\n# This is the parent class that all database models inherit from\n# It's used by SQLAlchemy to know how to create tables\n# (See backend/models.py for examples of models using this Base)\nBase = declarative_base()\n\n# =============================================================================\n# GET DATABASE FUNCTION\n# =============================================================================\n# This function is used by FastAPI endpoints to get a database session\n# \n# WHY A GENERATOR FUNCTION?\n# - The 'yield' keyword makes this a generator function\n# - yield db: Provides the database session to the endpoint\n# - finally db.close(): Ensures the connection is closed after the endpoint finishes\n# - This is called \"dependency injection\" in FastAPI\n# \n# USAGE IN ENDPOINTS:\n# def some_endpoint(db: Session = Depends(get_db)):\n#     # db is automatically provided by FastAPI\n#     user = db.query(User).filter(...).first()\ndef get_db():\n    \"\"\"\n    Provides a database session to FastAPI endpoints.\n    Automatically closes the session when done.\n    \"\"\"\n    db = SessionLocal()  # Create a new session\n    try:\n        yield db  # Give it to the endpoint\n    finally:\n        db.close()  # Always close it when done\n\n# =============================================================================\n# INITIALIZE DATABASE\n# =============================================================================\n# This function runs when the app starts up\n# It creates all tables and adds initial data if needed\ndef init_db():\n    \"\"\"\n    Initialize the database by:\n    1. Creating all tables (based on models defined in backend/models.py)\n    2. Adding initial data (universities and product categories)\n    \"\"\"\n    \n    # Import models - these define what tables to create\n    from backend.models import User, University, Category, Product, ProductImage, SavedItem\n    \n    # Create all tables in the database\n    # This checks the Base class and all models that inherit from it\n    # and creates corresponding tables if they don't exist\n    Base.metadata.create_all(bind=engine)\n    \n    # Create a new database session for seeding data\n    db = SessionLocal()\n    try:\n        # ===== SEED: Add Universities if they don't exist =====\n        # Check if any universities already exist\n        if db.query(University).count() == 0:\n            # If no universities, create Baze University\n            baze = University(\n                id=1,\n                name=\"Baze University\",\n                domain=\"bazeuniversity.edu.ng\"  # Users must use this domain to register\n            )\n            db.add(baze)  # Add to session (not in database yet)\n            db.commit()  # Save to database\n        \n        # ===== SEED: Add Product Categories if they don't exist =====\n        # Check if any categories already exist\n        if db.query(Category).count() == 0:\n            # If no categories, create default ones\n            categories = [\n                Category(name=\"Textbooks\"),      # For school books\n                Category(name=\"Electronics\"),    # For laptops, phones, etc.\n                Category(name=\"Clothing\"),       # For clothes\n                Category(name=\"Furniture\"),      # For desks, chairs, etc.\n                Category(name=\"Other\")           # For miscellaneous items\n            ]\n            db.add_all(categories)  # Add all categories to session\n            db.commit()  # Save to database\n        \n        # ===== UPDATE: Set all existing products location to \"Baze University\" =====\n        # For existing products that may have different locations, update them\n        # Since only Baze University students can sell, all products are at Baze\n        existing_products = db.query(Product).all()\n        for product in existing_products:\n            if not product.location or product.location != \"Baze University\":\n                product.location = \"Baze University\"\n        if existing_products:\n            db.commit()\n    finally:\n        # Always close the session when done\n        db.close()\n","size_bytes":6651},"README.md":{"content":"# UniMarket\n\nUniMarket is a peer-to-peer marketplace application designed specifically for university students to buy, sell, and connect safely on campus.\n\n## Table of Contents\n- [Features](#features)\n- [Technology Stack](#technology-stack)\n- [Project Structure](#project-structure)\n- [Setup Instructions](#setup-instructions)\n- [Usage](#usage)\n\n## Features\n- **User Authentication**: Sign up and log in pages with university selection.\n- **Product Listings**: Browse products by category, price, and condition.\n- **Product Details**: View detailed information about items, including images and seller location.\n- **Responsive Design**: Fully responsive layout that works on desktop, tablet, and mobile devices.\n- **Interactive UI**: \n  - Sticky header with shadow on scroll.\n  - Mobile navigation menu.\n  - Animated counters for hero statistics.\n  - Image sliders and galleries.\n\n## Technology Stack\n- **HTML5**: Semantic markup for structure.\n- **CSS3**: Custom styling with CSS variables for theming and responsive Flexbox/Grid layouts.\n- **JavaScript (ES6+)**: Vanilla JavaScript for DOM manipulation and interactivity.\n- **Lucide Icons**: Lightweight and consistent icon set.\n\n## Project Structure\n```\nUniMarket/\n├── css/\n│   └── style.css       # Main stylesheet containing all global and component styles\n├── js/\n│   └── app.js          # Core JavaScript logic for UI interactions\n├── img/                # Image assets (logos, placeholders, etc.)\n├── index.html          # Landing page\n├── login.html          # User login page\n├── signup.html         # User registration page\n├── products.html       # Product listing/catalog page\n├── product-detail.html # Individual product view\n├── profile.html        # User profile page\n└── README.md           # Project documentation\n```\n\n## Setup Instructions\n1. **Clone the repository** (or download the source code).\n2. **Open the project**: Navigate to the project folder.\n3. **Launch**: Open `index.html` in your preferred web browser (Chrome, Firefox, Edge, etc.).\n   - No build step or server is required for the static version.\n   - For development, using a local server (like Live Server in VS Code) is recommended to ensure all assets load correctly.\n\n## Usage\n- **Navigation**: Use the top navigation bar to switch between Home, Shop, and About pages.\n- **Search**: Use the search bar in the header to find specific items.\n- **Filtering**: On the Shop page, use the sidebar filters to narrow down products by category, price, or condition.\n- **Authentication**: Click \"Sign Up\" to create an account or \"Log In\" to access existing accounts.\n\n## Contributing\n1. Fork the repository.\n2. Create a new feature branch (`git checkout -b feature/AmazingFeature`).\n3. Commit your changes (`git commit -m 'Add some AmazingFeature'`).\n4. Push to the branch (`git push origin feature/AmazingFeature`).\n5. Open a Pull Request.\n\n## License\nDistributed under the MIT License. See `LICENSE` for more information.\n","size_bytes":3032},"css/products.css":{"content":"/* =========================================\n   Product Page Specific Styles\n   ========================================= */\n\n.products-layout {\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n    padding-top: 2rem;\n    padding-bottom: 4rem;\n}\n\n@media (min-width: 1024px) {\n    .products-layout {\n        display: grid;\n        grid-template-columns: 250px 1fr;\n        align-items: start;\n    }\n}\n\n/* Sidebar */\n.filters-sidebar {\n    display: none;\n}\n\n@media (min-width: 1024px) {\n    .filters-sidebar {\n        display: block;\n        position: sticky;\n        top: calc(var(--header-height) + 2rem);\n    }\n}\n\n.filter-section {\n    margin-bottom: 2rem;\n    border-bottom: 1px solid var(--border);\n    padding-bottom: 2rem;\n}\n\n.filter-section:last-child {\n    border-bottom: none;\n}\n\n.filter-title {\n    font-weight: 700;\n    font-size: 0.9rem;\n    margin-bottom: 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.filter-group {\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n}\n\n.checkbox-label {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.9rem;\n    color: var(--muted-foreground);\n    cursor: pointer;\n}\n\n.checkbox-label input {\n    accent-color: var(--foreground);\n}\n\n/* Range Slider */\n.range-slider {\n    width: 100%;\n    accent-color: var(--foreground);\n}\n\n.range-values {\n    display: flex;\n    justify-content: space-between;\n    font-size: 0.8rem;\n    color: var(--muted);\n    margin-top: 0.5rem;\n}\n\n/* Banner */\n.products-banner {\n    position: relative;\n    height: 300px;\n    border-radius: var(--radius-lg);\n    overflow: hidden;\n    margin-bottom: 2rem;\n    display: flex;\n    align-items: center;\n    padding: 3rem;\n    background-image: url('https://images.unsplash.com/photo-1555421689-491a97ff2040?q=80&w=2070&auto=format&fit=crop');\n    background-size: cover;\n    background-position: center;\n}\n\n.products-banner-overlay {\n    position: absolute;\n    inset: 0;\n    background: linear-gradient(to right, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.2));\n    z-index: 1;\n}\n\n.products-banner-content {\n    position: relative;\n    z-index: 2;\n    color: white;\n    max-width: 500px;\n}\n\n/* Header */\n.products-header {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    margin-bottom: 2rem;\n}\n\n@media (min-width: 768px) {\n    .products-header {\n        flex-direction: row;\n        align-items: flex-end;\n        justify-content: space-between;\n    }\n}\n\n/* Pagination */\n.pagination {\n    display: flex;\n    justify-content: center;\n    gap: 0.5rem;\n    margin-top: 4rem;\n}\n\n.page-btn {\n    width: 2.5rem;\n    height: 2.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: var(--radius);\n    border: 1px solid var(--border);\n    background: var(--background);\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.page-btn:hover {\n    border-color: var(--foreground);\n}\n\n.page-btn.active {\n    background: var(--foreground);\n    color: var(--background);\n    border-color: var(--foreground);\n}\n\n/* Dropdown Styles */\n.nav-dropdown {\n    position: relative;\n}\n\n.nav-dropdown-trigger {\n    display: flex;\n    align-items: center;\n    gap: 0.25rem;\n    cursor: pointer;\n}\n\n.dropdown-icon {\n    width: 1rem;\n    height: 1rem;\n    transition: transform 0.2s;\n}\n\n.nav-dropdown:hover .dropdown-icon {\n    transform: rotate(180deg);\n}\n\n.dropdown-menu {\n    position: absolute;\n    top: 100%;\n    left: 0;\n    min-width: 200px;\n    background-color: var(--background);\n    border: 1px solid var(--border);\n    border-radius: var(--radius);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n    padding: 0.5rem;\n    opacity: 0;\n    visibility: hidden;\n    transform: translateY(10px);\n    transition: all 0.2s;\n    z-index: 50;\n}\n\n.nav-dropdown:hover .dropdown-menu {\n    opacity: 1;\n    visibility: visible;\n    transform: translateY(0);\n}\n\n.dropdown-item {\n    display: block;\n    padding: 0.5rem 1rem;\n    color: var(--foreground);\n    text-decoration: none;\n    border-radius: var(--radius-sm);\n    font-size: 0.9rem;\n    transition: background-color 0.2s;\n}\n\n.dropdown-item:hover {\n    background-color: var(--secondary);\n}\n\n.dropdown-separator {\n    height: 1px;\n    background-color: var(--border);\n    margin: 0.5rem 0;\n}\n\n.dropdown-label {\n    display: block;\n    padding: 0.5rem 1rem;\n    font-size: 0.75rem;\n    font-weight: 600;\n    color: var(--muted);\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n}\n\n/* =========================================\n   Mobile Filter Button & Modal\n   ========================================= */\n\n.mobile-filter-btn {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 2.5rem;\n    height: 2.5rem;\n    border: 1px solid var(--border);\n    background: var(--background);\n    border-radius: var(--radius);\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.mobile-filter-btn:hover {\n    border-color: var(--foreground);\n    background: var(--secondary);\n}\n\n/* Hide mobile filter button on desktop */\n@media (min-width: 1024px) {\n    .mobile-filter-btn {\n        display: none;\n    }\n}\n\n/* Filter Modal Styles */\n.filter-modal {\n    display: none;\n    position: fixed;\n    inset: 0;\n    z-index: 100;\n}\n\n.filter-modal.open {\n    display: flex;\n}\n\n.filter-modal-overlay {\n    position: absolute;\n    inset: 0;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 1;\n}\n\n.filter-modal-content {\n    position: relative;\n    z-index: 2;\n    margin-left: auto;\n    width: 100%;\n    max-width: 350px;\n    height: 100vh;\n    background: var(--background);\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n    animation: slideIn 0.3s ease-out;\n}\n\n@keyframes slideIn {\n    from {\n        transform: translateX(100%);\n    }\n    to {\n        transform: translateX(0);\n    }\n}\n\n.filter-modal-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 1.5rem;\n    border-bottom: 1px solid var(--border);\n}\n\n.filter-modal-header h2 {\n    font-size: 1.25rem;\n    font-weight: 700;\n}\n\n.filter-modal-close {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 2.5rem;\n    height: 2.5rem;\n    border: none;\n    background: transparent;\n    cursor: pointer;\n    border-radius: var(--radius);\n    transition: background 0.2s;\n}\n\n.filter-modal-close:hover {\n    background: var(--secondary);\n}\n\n.filter-modal-content > .filter-section {\n    padding: 1.5rem;\n}\n\n.filter-modal-content > div:last-child {\n    padding: 0 1.5rem 1.5rem 1.5rem;\n    margin-top: auto;\n}\n\n/* Hide desktop sidebar on mobile */\n@media (max-width: 1023px) {\n    .filters-sidebar {\n        display: none !important;\n    }\n","size_bytes":6706}},"version":2}